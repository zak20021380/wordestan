import{r as d,c as Za,b as Xa}from"./vendor-eca221ea.js";import{L as re,u as Ya,a as _t,b as gt,O as en,N as Ps,B as tn,R as ur,c as be}from"./router-d0769c13.js";import{u as cs,a as Ve,b as Ot,Q as sn,c as rn}from"./query-24e528e4.js";import{m as E,A as ve}from"./motion-678d8bf8.js";import{u as zr}from"./forms-1e4abce9.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var Wr={exports:{}},ds={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var an=d,nn=Symbol.for("react.element"),on=Symbol.for("react.fragment"),ln=Object.prototype.hasOwnProperty,cn=an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dn={key:!0,ref:!0,__self:!0,__source:!0};function qr(t,s,r){var a,n={},o=null,i=null;r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),s.ref!==void 0&&(i=s.ref);for(a in s)ln.call(s,a)&&!dn.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:nn,type:t,key:o,ref:i,props:n,_owner:cn.current}}ds.Fragment=on;ds.jsx=qr;ds.jsxs=qr;Wr.exports=ds;var e=Wr.exports,Rs={},pr=Za;Rs.createRoot=pr.createRoot,Rs.hydrateRoot=pr.hydrateRoot;let mn={data:""},xn=t=>{if(typeof window=="object"){let s=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return s.nonce=window.__nonce__,s.parentNode||(t||document.head).appendChild(s),s.firstChild}return t||mn},hn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,un=/\/\*[^]*?\*\/|  +/g,fr=/\n+/g,tt=(t,s)=>{let r="",a="",n="";for(let o in t){let i=t[o];o[0]=="@"?o[1]=="i"?r=o+" "+i+";":a+=o[1]=="f"?tt(i,o):o+"{"+tt(i,o[1]=="k"?"":s)+"}":typeof i=="object"?a+=tt(i,s?s.replace(/([^,])+/g,c=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,c):c?c+" "+h:h)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=tt.p?tt.p(o,i):o+":"+i+";")}return r+(s&&n?s+"{"+n+"}":n)+a},ze={},Hr=t=>{if(typeof t=="object"){let s="";for(let r in t)s+=r+Hr(t[r]);return s}return t},pn=(t,s,r,a,n)=>{let o=Hr(t),i=ze[o]||(ze[o]=(h=>{let m=0,l=11;for(;m<h.length;)l=101*l+h.charCodeAt(m++)>>>0;return"go"+l})(o));if(!ze[i]){let h=o!==t?t:(m=>{let l,u,w=[{}];for(;l=hn.exec(m.replace(un,""));)l[4]?w.shift():l[3]?(u=l[3].replace(fr," ").trim(),w.unshift(w[0][u]=w[0][u]||{})):w[0][l[1]]=l[2].replace(fr," ").trim();return w[0]})(t);ze[i]=tt(n?{["@keyframes "+i]:h}:h,r?"":"."+i)}let c=r&&ze.g?ze.g:null;return r&&(ze.g=ze[i]),((h,m,l,u)=>{u?m.data=m.data.replace(u,h):m.data.indexOf(h)===-1&&(m.data=l?h+m.data:m.data+h)})(ze[i],s,a,c),i},fn=(t,s,r)=>t.reduce((a,n,o)=>{let i=s[o];if(i&&i.call){let c=i(r),h=c&&c.props&&c.props.className||/^go/.test(c)&&c;i=h?"."+h:c&&typeof c=="object"?c.props?"":tt(c,""):c===!1?"":c}return a+n+(i??"")},"");function ms(t){let s=this||{},r=t.call?t(s.p):t;return pn(r.unshift?r.raw?fn(r,[].slice.call(arguments,1),s.p):r.reduce((a,n)=>Object.assign(a,n&&n.call?n(s.p):n),{}):r,xn(s.target),s.g,s.o,s.k)}let Vr,Ms,Us;ms.bind({g:1});let Ge=ms.bind({k:1});function bn(t,s,r,a){tt.p=s,Vr=t,Ms=r,Us=a}function at(t,s){let r=this||{};return function(){let a=arguments;function n(o,i){let c=Object.assign({},o),h=c.className||n.className;r.p=Object.assign({theme:Ms&&Ms()},c),r.o=/ *go\d+/.test(h),c.className=ms.apply(r,a)+(h?" "+h:""),s&&(c.ref=i);let m=t;return t[0]&&(m=c.as||t,delete c.as),Us&&m[0]&&Us(c),Vr(m,c)}return s?s(n):n}}var gn=t=>typeof t=="function",ts=(t,s)=>gn(t)?t(s):t,yn=(()=>{let t=0;return()=>(++t).toString()})(),Gr=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),wn=20,Ds="default",Kr=(t,s)=>{let{toastLimit:r}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===s.toast.id?{...i,...s.toast}:i)};case 2:let{toast:a}=s;return Kr(t,{type:t.toasts.find(i=>i.id===a.id)?1:0,toast:a});case 3:let{toastId:n}=s;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let o=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Kt=[],Jr={toasts:[],pausedAt:void 0,settings:{toastLimit:wn}},Fe={},Qr=(t,s=Ds)=>{Fe[s]=Kr(Fe[s]||Jr,t),Kt.forEach(([r,a])=>{r===s&&a(Fe[s])})},Zr=t=>Object.keys(Fe).forEach(s=>Qr(t,s)),jn=t=>Object.keys(Fe).find(s=>Fe[s].toasts.some(r=>r.id===t)),xs=(t=Ds)=>s=>{Qr(s,t)},vn={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Nn=(t={},s=Ds)=>{let[r,a]=d.useState(Fe[s]||Jr),n=d.useRef(Fe[s]);d.useEffect(()=>(n.current!==Fe[s]&&a(Fe[s]),Kt.push([s,a]),()=>{let i=Kt.findIndex(([c])=>c===s);i>-1&&Kt.splice(i,1)}),[s]);let o=r.toasts.map(i=>{var c,h,m;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((c=t[i.type])==null?void 0:c.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((h=t[i.type])==null?void 0:h.duration)||(t==null?void 0:t.duration)||vn[i.type],style:{...t.style,...(m=t[i.type])==null?void 0:m.style,...i.style}}});return{...r,toasts:o}},kn=(t,s="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||yn()}),$t=t=>(s,r)=>{let a=kn(s,t,r);return xs(a.toasterId||jn(a.id))({type:2,toast:a}),a.id},D=(t,s)=>$t("blank")(t,s);D.error=$t("error");D.success=$t("success");D.loading=$t("loading");D.custom=$t("custom");D.dismiss=(t,s)=>{let r={type:3,toastId:t};s?xs(s)(r):Zr(r)};D.dismissAll=t=>D.dismiss(void 0,t);D.remove=(t,s)=>{let r={type:4,toastId:t};s?xs(s)(r):Zr(r)};D.removeAll=t=>D.remove(void 0,t);D.promise=(t,s,r)=>{let a=D.loading(s.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let o=s.success?ts(s.success,n):void 0;return o?D.success(o,{id:a,...r,...r==null?void 0:r.success}):D.dismiss(a),n}).catch(n=>{let o=s.error?ts(s.error,n):void 0;o?D.error(o,{id:a,...r,...r==null?void 0:r.error}):D.dismiss(a)}),t};var Sn=1e3,Cn=(t,s="default")=>{let{toasts:r,pausedAt:a}=Nn(t,s),n=d.useRef(new Map).current,o=d.useCallback((u,w=Sn)=>{if(n.has(u))return;let p=setTimeout(()=>{n.delete(u),i({type:4,toastId:u})},w);n.set(u,p)},[]);d.useEffect(()=>{if(a)return;let u=Date.now(),w=r.map(p=>{if(p.duration===1/0)return;let x=(p.duration||0)+p.pauseDuration-(u-p.createdAt);if(x<0){p.visible&&D.dismiss(p.id);return}return setTimeout(()=>D.dismiss(p.id,s),x)});return()=>{w.forEach(p=>p&&clearTimeout(p))}},[r,a,s]);let i=d.useCallback(xs(s),[s]),c=d.useCallback(()=>{i({type:5,time:Date.now()})},[i]),h=d.useCallback((u,w)=>{i({type:1,toast:{id:u,height:w}})},[i]),m=d.useCallback(()=>{a&&i({type:6,time:Date.now()})},[a,i]),l=d.useCallback((u,w)=>{let{reverseOrder:p=!1,gutter:x=8,defaultPosition:g}=w||{},y=r.filter(C=>(C.position||g)===(u.position||g)&&C.height),v=y.findIndex(C=>C.id===u.id),S=y.filter((C,F)=>F<v&&C.visible).length;return y.filter(C=>C.visible).slice(...p?[S+1]:[0,S]).reduce((C,F)=>C+(F.height||0)+x,0)},[r]);return d.useEffect(()=>{r.forEach(u=>{if(u.dismissed)o(u.id,u.removeDelay);else{let w=n.get(u.id);w&&(clearTimeout(w),n.delete(u.id))}})},[r,o]),{toasts:r,handlers:{updateHeight:h,startPause:c,endPause:m,calculateOffset:l}}},_n=Ge`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,En=Ge`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ln=Ge`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,An=at("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_n} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${En} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ln} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Pn=Ge`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rn=at("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Pn} 1s linear infinite;
`,Mn=Ge`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Un=Ge`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Tn=at("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Mn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Un} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,On=at("div")`
  position: absolute;
`,$n=at("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Fn=Ge`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,In=at("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Fn} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Bn=({toast:t})=>{let{icon:s,type:r,iconTheme:a}=t;return s!==void 0?typeof s=="string"?d.createElement(In,null,s):s:r==="blank"?null:d.createElement($n,null,d.createElement(Rn,{...a}),r!=="loading"&&d.createElement(On,null,r==="error"?d.createElement(An,{...a}):d.createElement(Tn,{...a})))},Dn=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,zn=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Wn="0%{opacity:0;} 100%{opacity:1;}",qn="0%{opacity:1;} 100%{opacity:0;}",Hn=at("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Vn=at("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Gn=(t,s)=>{let r=t.includes("top")?1:-1,[a,n]=Gr()?[Wn,qn]:[Dn(r),zn(r)];return{animation:s?`${Ge(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ge(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Kn=d.memo(({toast:t,position:s,style:r,children:a})=>{let n=t.height?Gn(t.position||s||"top-center",t.visible):{opacity:0},o=d.createElement(Bn,{toast:t}),i=d.createElement(Vn,{...t.ariaProps},ts(t.message,t));return d.createElement(Hn,{className:t.className,style:{...n,...r,...t.style}},typeof a=="function"?a({icon:o,message:i}):d.createElement(d.Fragment,null,o,i))});bn(d.createElement);var Jn=({id:t,className:s,style:r,onHeightUpdate:a,children:n})=>{let o=d.useCallback(i=>{if(i){let c=()=>{let h=i.getBoundingClientRect().height;a(t,h)};c(),new MutationObserver(c).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return d.createElement("div",{ref:o,className:s,style:r},n)},Qn=(t,s)=>{let r=t.includes("top"),a=r?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Gr()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(r?1:-1)}px)`,...a,...n}},Zn=ms`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Wt=16,Xn=({reverseOrder:t,position:s="top-center",toastOptions:r,gutter:a,children:n,toasterId:o,containerStyle:i,containerClassName:c})=>{let{toasts:h,handlers:m}=Cn(r,o);return d.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Wt,left:Wt,right:Wt,bottom:Wt,pointerEvents:"none",...i},className:c,onMouseEnter:m.startPause,onMouseLeave:m.endPause},h.map(l=>{let u=l.position||s,w=m.calculateOffset(l,{reverseOrder:t,gutter:a,defaultPosition:s}),p=Qn(u,w);return d.createElement(Jn,{id:l.id,key:l.id,onHeightUpdate:m.updateHeight,className:l.visible?Zn:"",style:p},l.type==="custom"?ts(l.message,l):n?n(l):d.createElement(Kn,{toast:l,position:u}))}))},mt=D;function Xr(t,s){return function(){return t.apply(s,arguments)}}const{toString:Yn}=Object.prototype,{getPrototypeOf:zs}=Object,{iterator:hs,toStringTag:Yr}=Symbol,us=(t=>s=>{const r=Yn.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Te=t=>(t=t.toLowerCase(),s=>us(s)===t),ps=t=>s=>typeof s===t,{isArray:Et}=Array,St=ps("undefined");function Ft(t){return t!==null&&!St(t)&&t.constructor!==null&&!St(t.constructor)&&_e(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ea=Te("ArrayBuffer");function ei(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&ea(t.buffer),s}const ti=ps("string"),_e=ps("function"),ta=ps("number"),It=t=>t!==null&&typeof t=="object",si=t=>t===!0||t===!1,Jt=t=>{if(us(t)!=="object")return!1;const s=zs(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Yr in t)&&!(hs in t)},ri=t=>{if(!It(t)||Ft(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},ai=Te("Date"),ni=Te("File"),ii=Te("Blob"),oi=Te("FileList"),li=t=>It(t)&&_e(t.pipe),ci=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||_e(t.append)&&((s=us(t))==="formdata"||s==="object"&&_e(t.toString)&&t.toString()==="[object FormData]"))},di=Te("URLSearchParams"),[mi,xi,hi,ui]=["ReadableStream","Request","Response","Headers"].map(Te),pi=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bt(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),Et(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(Ft(t))return;const o=r?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let c;for(a=0;a<i;a++)c=o[a],s.call(null,t[c],c,t)}}function sa(t,s){if(Ft(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const xt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ra=t=>!St(t)&&t!==xt;function Ts(){const{caseless:t,skipUndefined:s}=ra(this)&&this||{},r={},a=(n,o)=>{const i=t&&sa(r,o)||o;Jt(r[i])&&Jt(n)?r[i]=Ts(r[i],n):Jt(n)?r[i]=Ts({},n):Et(n)?r[i]=n.slice():(!s||!St(n))&&(r[i]=n)};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Bt(arguments[n],a);return r}const fi=(t,s,r,{allOwnKeys:a}={})=>(Bt(s,(n,o)=>{r&&_e(n)?t[o]=Xr(n,r):t[o]=n},{allOwnKeys:a}),t),bi=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),gi=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},yi=(t,s,r,a)=>{let n,o,i;const c={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)i=n[o],(!a||a(i,t,s))&&!c[i]&&(s[i]=t[i],c[i]=!0);t=r!==!1&&zs(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},wi=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},ji=t=>{if(!t)return null;if(Et(t))return t;let s=t.length;if(!ta(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},vi=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&zs(Uint8Array)),Ni=(t,s)=>{const a=(t&&t[hs]).call(t);let n;for(;(n=a.next())&&!n.done;){const o=n.value;s.call(t,o[0],o[1])}},ki=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},Si=Te("HTMLFormElement"),Ci=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),br=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),_i=Te("RegExp"),aa=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};Bt(r,(n,o)=>{let i;(i=s(n,o,t))!==!1&&(a[o]=i||n)}),Object.defineProperties(t,a)},Ei=t=>{aa(t,(s,r)=>{if(_e(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(_e(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Li=(t,s)=>{const r={},a=n=>{n.forEach(o=>{r[o]=!0})};return Et(t)?a(t):a(String(t).split(s)),r},Ai=()=>{},Pi=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Ri(t){return!!(t&&_e(t.append)&&t[Yr]==="FormData"&&t[hs])}const Mi=t=>{const s=new Array(10),r=(a,n)=>{if(It(a)){if(s.indexOf(a)>=0)return;if(Ft(a))return a;if(!("toJSON"in a)){s[n]=a;const o=Et(a)?[]:{};return Bt(a,(i,c)=>{const h=r(i,n+1);!St(h)&&(o[c]=h)}),s[n]=void 0,o}}return a};return r(t,0)},Ui=Te("AsyncFunction"),Ti=t=>t&&(It(t)||_e(t))&&_e(t.then)&&_e(t.catch),na=((t,s)=>t?setImmediate:s?((r,a)=>(xt.addEventListener("message",({source:n,data:o})=>{n===xt&&o===r&&a.length&&a.shift()()},!1),n=>{a.push(n),xt.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",_e(xt.postMessage)),Oi=typeof queueMicrotask<"u"?queueMicrotask.bind(xt):typeof process<"u"&&process.nextTick||na,$i=t=>t!=null&&_e(t[hs]),b={isArray:Et,isArrayBuffer:ea,isBuffer:Ft,isFormData:ci,isArrayBufferView:ei,isString:ti,isNumber:ta,isBoolean:si,isObject:It,isPlainObject:Jt,isEmptyObject:ri,isReadableStream:mi,isRequest:xi,isResponse:hi,isHeaders:ui,isUndefined:St,isDate:ai,isFile:ni,isBlob:ii,isRegExp:_i,isFunction:_e,isStream:li,isURLSearchParams:di,isTypedArray:vi,isFileList:oi,forEach:Bt,merge:Ts,extend:fi,trim:pi,stripBOM:bi,inherits:gi,toFlatObject:yi,kindOf:us,kindOfTest:Te,endsWith:wi,toArray:ji,forEachEntry:Ni,matchAll:ki,isHTMLForm:Si,hasOwnProperty:br,hasOwnProp:br,reduceDescriptors:aa,freezeMethods:Ei,toObjectSet:Li,toCamelCase:Ci,noop:Ai,toFiniteNumber:Pi,findKey:sa,global:xt,isContextDefined:ra,isSpecCompliantForm:Ri,toJSONObject:Mi,isAsyncFn:Ui,isThenable:Ti,setImmediate:na,asap:Oi,isIterable:$i};function Q(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}b.inherits(Q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.status}}});const ia=Q.prototype,oa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{oa[t]={value:t}});Object.defineProperties(Q,oa);Object.defineProperty(ia,"isAxiosError",{value:!0});Q.from=(t,s,r,a,n,o)=>{const i=Object.create(ia);b.toFlatObject(t,i,function(l){return l!==Error.prototype},m=>m!=="isAxiosError");const c=t&&t.message?t.message:"Error",h=s==null&&t?t.code:s;return Q.call(i,c,h,r,a,n),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",o&&Object.assign(i,o),i};const Fi=null;function Os(t){return b.isPlainObject(t)||b.isArray(t)}function la(t){return b.endsWith(t,"[]")?t.slice(0,-2):t}function gr(t,s,r){return t?t.concat(s).map(function(n,o){return n=la(n),!r&&o?"["+n+"]":n}).join(r?".":""):s}function Ii(t){return b.isArray(t)&&!t.some(Os)}const Bi=b.toFlatObject(b,{},null,function(s){return/^is[A-Z]/.test(s)});function fs(t,s,r){if(!b.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=b.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!b.isUndefined(y[g])});const a=r.metaTokens,n=r.visitor||l,o=r.dots,i=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(s);if(!b.isFunction(n))throw new TypeError("visitor must be a function");function m(x){if(x===null)return"";if(b.isDate(x))return x.toISOString();if(b.isBoolean(x))return x.toString();if(!h&&b.isBlob(x))throw new Q("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(x)||b.isTypedArray(x)?h&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function l(x,g,y){let v=x;if(x&&!y&&typeof x=="object"){if(b.endsWith(g,"{}"))g=a?g:g.slice(0,-2),x=JSON.stringify(x);else if(b.isArray(x)&&Ii(x)||(b.isFileList(x)||b.endsWith(g,"[]"))&&(v=b.toArray(x)))return g=la(g),v.forEach(function(C,F){!(b.isUndefined(C)||C===null)&&s.append(i===!0?gr([g],F,o):i===null?g:g+"[]",m(C))}),!1}return Os(x)?!0:(s.append(gr(y,g,o),m(x)),!1)}const u=[],w=Object.assign(Bi,{defaultVisitor:l,convertValue:m,isVisitable:Os});function p(x,g){if(!b.isUndefined(x)){if(u.indexOf(x)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(x),b.forEach(x,function(v,S){(!(b.isUndefined(v)||v===null)&&n.call(s,v,b.isString(S)?S.trim():S,g,w))===!0&&p(v,g?g.concat(S):[S])}),u.pop()}}if(!b.isObject(t))throw new TypeError("data must be an object");return p(t),s}function yr(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function Ws(t,s){this._pairs=[],t&&fs(t,this,s)}const ca=Ws.prototype;ca.append=function(s,r){this._pairs.push([s,r])};ca.toString=function(s){const r=s?function(a){return s.call(this,a,yr)}:yr;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Di(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function da(t,s,r){if(!s)return t;const a=r&&r.encode||Di;b.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let o;if(n?o=n(s,r):o=b.isURLSearchParams(s)?s.toString():new Ws(s,r).toString(a),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class zi{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){b.forEach(this.handlers,function(a){a!==null&&s(a)})}}const wr=zi,ma={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wi=typeof URLSearchParams<"u"?URLSearchParams:Ws,qi=typeof FormData<"u"?FormData:null,Hi=typeof Blob<"u"?Blob:null,Vi={isBrowser:!0,classes:{URLSearchParams:Wi,FormData:qi,Blob:Hi},protocols:["http","https","file","blob","url","data"]},qs=typeof window<"u"&&typeof document<"u",$s=typeof navigator=="object"&&navigator||void 0,Gi=qs&&(!$s||["ReactNative","NativeScript","NS"].indexOf($s.product)<0),Ki=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ji=qs&&window.location.href||"http://localhost",Qi=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qs,hasStandardBrowserEnv:Gi,hasStandardBrowserWebWorkerEnv:Ki,navigator:$s,origin:Ji},Symbol.toStringTag,{value:"Module"})),Ne={...Qi,...Vi};function Zi(t,s){return fs(t,new Ne.classes.URLSearchParams,{visitor:function(r,a,n,o){return Ne.isNode&&b.isBuffer(r)?(this.append(a,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...s})}function Xi(t){return b.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Yi(t){const s={},r=Object.keys(t);let a;const n=r.length;let o;for(a=0;a<n;a++)o=r[a],s[o]=t[o];return s}function xa(t){function s(r,a,n,o){let i=r[o++];if(i==="__proto__")return!0;const c=Number.isFinite(+i),h=o>=r.length;return i=!i&&b.isArray(n)?n.length:i,h?(b.hasOwnProp(n,i)?n[i]=[n[i],a]:n[i]=a,!c):((!n[i]||!b.isObject(n[i]))&&(n[i]=[]),s(r,a,n[i],o)&&b.isArray(n[i])&&(n[i]=Yi(n[i])),!c)}if(b.isFormData(t)&&b.isFunction(t.entries)){const r={};return b.forEachEntry(t,(a,n)=>{s(Xi(a),n,r,0)}),r}return null}function eo(t,s,r){if(b.isString(t))try{return(s||JSON.parse)(t),b.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Hs={transitional:ma,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,o=b.isObject(s);if(o&&b.isHTMLForm(s)&&(s=new FormData(s)),b.isFormData(s))return n?JSON.stringify(xa(s)):s;if(b.isArrayBuffer(s)||b.isBuffer(s)||b.isStream(s)||b.isFile(s)||b.isBlob(s)||b.isReadableStream(s))return s;if(b.isArrayBufferView(s))return s.buffer;if(b.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Zi(s,this.formSerializer).toString();if((c=b.isFileList(s))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return fs(c?{"files[]":s}:s,h&&new h,this.formSerializer)}}return o||n?(r.setContentType("application/json",!1),eo(s)):s}],transformResponse:[function(s){const r=this.transitional||Hs.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(b.isResponse(s)||b.isReadableStream(s))return s;if(s&&b.isString(s)&&(a&&!this.responseType||n)){const i=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(c){if(i)throw c.name==="SyntaxError"?Q.from(c,Q.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ne.classes.FormData,Blob:Ne.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],t=>{Hs.headers[t]={}});const Vs=Hs,to=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),so=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(i){n=i.indexOf(":"),r=i.substring(0,n).trim().toLowerCase(),a=i.substring(n+1).trim(),!(!r||s[r]&&to[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},jr=Symbol("internals");function Tt(t){return t&&String(t).trim().toLowerCase()}function Qt(t){return t===!1||t==null?t:b.isArray(t)?t.map(Qt):String(t)}function ro(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const ao=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function vs(t,s,r,a,n){if(b.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!b.isString(s)){if(b.isString(a))return s.indexOf(a)!==-1;if(b.isRegExp(a))return a.test(s)}}function no(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function io(t,s){const r=b.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,o,i){return this[a].call(this,s,n,o,i)},configurable:!0})})}class bs{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function o(c,h,m){const l=Tt(h);if(!l)throw new Error("header name must be a non-empty string");const u=b.findKey(n,l);(!u||n[u]===void 0||m===!0||m===void 0&&n[u]!==!1)&&(n[u||h]=Qt(c))}const i=(c,h)=>b.forEach(c,(m,l)=>o(m,l,h));if(b.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(b.isString(s)&&(s=s.trim())&&!ao(s))i(so(s),r);else if(b.isObject(s)&&b.isIterable(s)){let c={},h,m;for(const l of s){if(!b.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[m=l[0]]=(h=c[m])?b.isArray(h)?[...h,l[1]]:[h,l[1]]:l[1]}i(c,r)}else s!=null&&o(r,s,a);return this}get(s,r){if(s=Tt(s),s){const a=b.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return ro(n);if(b.isFunction(r))return r.call(this,n,a);if(b.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Tt(s),s){const a=b.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||vs(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function o(i){if(i=Tt(i),i){const c=b.findKey(a,i);c&&(!r||vs(a,a[c],c,r))&&(delete a[c],n=!0)}}return b.isArray(s)?s.forEach(o):o(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const o=r[a];(!s||vs(this,this[o],o,s,!0))&&(delete this[o],n=!0)}return n}normalize(s){const r=this,a={};return b.forEach(this,(n,o)=>{const i=b.findKey(a,o);if(i){r[i]=Qt(n),delete r[o];return}const c=s?no(o):String(o).trim();c!==o&&delete r[o],r[c]=Qt(n),a[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return b.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&b.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[jr]=this[jr]={accessors:{}}).accessors,n=this.prototype;function o(i){const c=Tt(i);a[c]||(io(n,i),a[c]=!0)}return b.isArray(s)?s.forEach(o):o(s),this}}bs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(bs.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});b.freezeMethods(bs);const Me=bs;function Ns(t,s){const r=this||Vs,a=s||r,n=Me.from(a.headers);let o=a.data;return b.forEach(t,function(c){o=c.call(r,o,n.normalize(),s?s.status:void 0)}),n.normalize(),o}function ha(t){return!!(t&&t.__CANCEL__)}function Lt(t,s,r){Q.call(this,t??"canceled",Q.ERR_CANCELED,s,r),this.name="CanceledError"}b.inherits(Lt,Q,{__CANCEL__:!0});function ua(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new Q("Request failed with status code "+r.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function oo(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function lo(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,o=0,i;return s=s!==void 0?s:1e3,function(h){const m=Date.now(),l=a[o];i||(i=m),r[n]=h,a[n]=m;let u=o,w=0;for(;u!==n;)w+=r[u++],u=u%t;if(n=(n+1)%t,n===o&&(o=(o+1)%t),m-i<s)return;const p=l&&m-l;return p?Math.round(w*1e3/p):void 0}}function co(t,s){let r=0,a=1e3/s,n,o;const i=(m,l=Date.now())=>{r=l,n=null,o&&(clearTimeout(o),o=null),t(...m)};return[(...m)=>{const l=Date.now(),u=l-r;u>=a?i(m,l):(n=m,o||(o=setTimeout(()=>{o=null,i(n)},a-u)))},()=>n&&i(n)]}const ss=(t,s,r=3)=>{let a=0;const n=lo(50,250);return co(o=>{const i=o.loaded,c=o.lengthComputable?o.total:void 0,h=i-a,m=n(h),l=i<=c;a=i;const u={loaded:i,total:c,progress:c?i/c:void 0,bytes:h,rate:m||void 0,estimated:m&&c&&l?(c-i)/m:void 0,event:o,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(u)},r)},vr=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},Nr=t=>(...s)=>b.asap(()=>t(...s)),mo=Ne.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,Ne.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(Ne.origin),Ne.navigator&&/(msie|trident)/i.test(Ne.navigator.userAgent)):()=>!0,xo=Ne.hasStandardBrowserEnv?{write(t,s,r,a,n,o,i){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(s)}`];b.isNumber(r)&&c.push(`expires=${new Date(r).toUTCString()}`),b.isString(a)&&c.push(`path=${a}`),b.isString(n)&&c.push(`domain=${n}`),o===!0&&c.push("secure"),b.isString(i)&&c.push(`SameSite=${i}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ho(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function uo(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function pa(t,s,r){let a=!ho(s);return t&&(a||r==!1)?uo(t,s):s}const kr=t=>t instanceof Me?{...t}:t;function ft(t,s){s=s||{};const r={};function a(m,l,u,w){return b.isPlainObject(m)&&b.isPlainObject(l)?b.merge.call({caseless:w},m,l):b.isPlainObject(l)?b.merge({},l):b.isArray(l)?l.slice():l}function n(m,l,u,w){if(b.isUndefined(l)){if(!b.isUndefined(m))return a(void 0,m,u,w)}else return a(m,l,u,w)}function o(m,l){if(!b.isUndefined(l))return a(void 0,l)}function i(m,l){if(b.isUndefined(l)){if(!b.isUndefined(m))return a(void 0,m)}else return a(void 0,l)}function c(m,l,u){if(u in s)return a(m,l);if(u in t)return a(void 0,m)}const h={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(m,l,u)=>n(kr(m),kr(l),u,!0)};return b.forEach(Object.keys({...t,...s}),function(l){const u=h[l]||n,w=u(t[l],s[l],l);b.isUndefined(w)&&u!==c||(r[l]=w)}),r}const fa=t=>{const s=ft({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:o,headers:i,auth:c}=s;if(s.headers=i=Me.from(i),s.url=da(pa(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),b.isFormData(r)){if(Ne.hasStandardBrowserEnv||Ne.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(b.isFunction(r.getHeaders)){const h=r.getHeaders(),m=["content-type","content-length"];Object.entries(h).forEach(([l,u])=>{m.includes(l.toLowerCase())&&i.set(l,u)})}}if(Ne.hasStandardBrowserEnv&&(a&&b.isFunction(a)&&(a=a(s)),a||a!==!1&&mo(s.url))){const h=n&&o&&xo.read(o);h&&i.set(n,h)}return s},po=typeof XMLHttpRequest<"u",fo=po&&function(t){return new Promise(function(r,a){const n=fa(t);let o=n.data;const i=Me.from(n.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:m}=n,l,u,w,p,x;function g(){p&&p(),x&&x(),n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let y=new XMLHttpRequest;y.open(n.method.toUpperCase(),n.url,!0),y.timeout=n.timeout;function v(){if(!y)return;const C=Me.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),H={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:C,config:t,request:y};ua(function($){r($),g()},function($){a($),g()},H),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(a(new Q("Request aborted",Q.ECONNABORTED,t,y)),y=null)},y.onerror=function(F){const H=F&&F.message?F.message:"Network Error",V=new Q(H,Q.ERR_NETWORK,t,y);V.event=F||null,a(V),y=null},y.ontimeout=function(){let F=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const H=n.transitional||ma;n.timeoutErrorMessage&&(F=n.timeoutErrorMessage),a(new Q(F,H.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,t,y)),y=null},o===void 0&&i.setContentType(null),"setRequestHeader"in y&&b.forEach(i.toJSON(),function(F,H){y.setRequestHeader(H,F)}),b.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),c&&c!=="json"&&(y.responseType=n.responseType),m&&([w,x]=ss(m,!0),y.addEventListener("progress",w)),h&&y.upload&&([u,p]=ss(h),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",p)),(n.cancelToken||n.signal)&&(l=C=>{y&&(a(!C||C.type?new Lt(null,t,y):C),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const S=oo(n.url);if(S&&Ne.protocols.indexOf(S)===-1){a(new Q("Unsupported protocol "+S+":",Q.ERR_BAD_REQUEST,t));return}y.send(o||null)})},bo=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const o=function(m){if(!n){n=!0,c();const l=m instanceof Error?m:this.reason;a.abort(l instanceof Q?l:new Lt(l instanceof Error?l.message:l))}};let i=s&&setTimeout(()=>{i=null,o(new Q(`timeout ${s} of ms exceeded`,Q.ETIMEDOUT))},s);const c=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(o):m.removeEventListener("abort",o)}),t=null)};t.forEach(m=>m.addEventListener("abort",o));const{signal:h}=a;return h.unsubscribe=()=>b.asap(c),h}},go=bo,yo=function*(t,s){let r=t.byteLength;if(!s||r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},wo=async function*(t,s){for await(const r of jo(t))yield*yo(r,s)},jo=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},Sr=(t,s,r,a)=>{const n=wo(t,s);let o=0,i,c=h=>{i||(i=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:m,value:l}=await n.next();if(m){c(),h.close();return}let u=l.byteLength;if(r){let w=o+=u;r(w)}h.enqueue(new Uint8Array(l))}catch(m){throw c(m),m}},cancel(h){return c(h),n.return()}},{highWaterMark:2})},Cr=64*1024,{isFunction:qt}=b,vo=(({Request:t,Response:s})=>({Request:t,Response:s}))(b.global),{ReadableStream:_r,TextEncoder:Er}=b.global,Lr=(t,...s)=>{try{return!!t(...s)}catch{return!1}},No=t=>{t=b.merge.call({skipUndefined:!0},vo,t);const{fetch:s,Request:r,Response:a}=t,n=s?qt(s):typeof fetch=="function",o=qt(r),i=qt(a);if(!n)return!1;const c=n&&qt(_r),h=n&&(typeof Er=="function"?(x=>g=>x.encode(g))(new Er):async x=>new Uint8Array(await new r(x).arrayBuffer())),m=o&&c&&Lr(()=>{let x=!1;const g=new r(Ne.origin,{body:new _r,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!g}),l=i&&c&&Lr(()=>b.isReadableStream(new a("").body)),u={stream:l&&(x=>x.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!u[x]&&(u[x]=(g,y)=>{let v=g&&g[x];if(v)return v.call(g);throw new Q(`Response type '${x}' is not supported`,Q.ERR_NOT_SUPPORT,y)})});const w=async x=>{if(x==null)return 0;if(b.isBlob(x))return x.size;if(b.isSpecCompliantForm(x))return(await new r(Ne.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(b.isArrayBufferView(x)||b.isArrayBuffer(x))return x.byteLength;if(b.isURLSearchParams(x)&&(x=x+""),b.isString(x))return(await h(x)).byteLength},p=async(x,g)=>{const y=b.toFiniteNumber(x.getContentLength());return y??w(g)};return async x=>{let{url:g,method:y,data:v,signal:S,cancelToken:C,timeout:F,onDownloadProgress:H,onUploadProgress:V,responseType:$,headers:P,withCredentials:Z="same-origin",fetchOptions:Y}=fa(x),R=s||fetch;$=$?($+"").toLowerCase():"text";let f=go([S,C&&C.toAbortSignal()],F),_=null;const O=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let U;try{if(V&&m&&y!=="get"&&y!=="head"&&(U=await p(P,v))!==0){let A=new r(g,{method:"POST",body:v,duplex:"half"}),I;if(b.isFormData(v)&&(I=A.headers.get("content-type"))&&P.setContentType(I),A.body){const[K,se]=vr(U,ss(Nr(V)));v=Sr(A.body,Cr,K,se)}}b.isString(Z)||(Z=Z?"include":"omit");const J=o&&"credentials"in r.prototype,j={...Y,signal:f,method:y.toUpperCase(),headers:P.normalize().toJSON(),body:v,duplex:"half",credentials:J?Z:void 0};_=o&&new r(g,j);let G=await(o?R(_,Y):R(g,j));const ae=l&&($==="stream"||$==="response");if(l&&(H||ae&&O)){const A={};["status","statusText","headers"].forEach(ge=>{A[ge]=G[ge]});const I=b.toFiniteNumber(G.headers.get("content-length")),[K,se]=H&&vr(I,ss(Nr(H),!0))||[];G=new a(Sr(G.body,Cr,K,()=>{se&&se(),O&&O()}),A)}$=$||"text";let L=await u[b.findKey(u,$)||"text"](G,x);return!ae&&O&&O(),await new Promise((A,I)=>{ua(A,I,{data:L,headers:Me.from(G.headers),status:G.status,statusText:G.statusText,config:x,request:_})})}catch(J){throw O&&O(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new Q("Network Error",Q.ERR_NETWORK,x,_),{cause:J.cause||J}):Q.from(J,J&&J.code,x,_)}}},ko=new Map,ba=t=>{let s=t&&t.env||{};const{fetch:r,Request:a,Response:n}=s,o=[a,n,r];let i=o.length,c=i,h,m,l=ko;for(;c--;)h=o[c],m=l.get(h),m===void 0&&l.set(h,m=c?new Map:No(s)),l=m;return m};ba();const Gs={http:Fi,xhr:fo,fetch:{get:ba}};b.forEach(Gs,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Ar=t=>`- ${t}`,So=t=>b.isFunction(t)||t===null||t===!1;function Co(t,s){t=b.isArray(t)?t:[t];const{length:r}=t;let a,n;const o={};for(let i=0;i<r;i++){a=t[i];let c;if(n=a,!So(a)&&(n=Gs[(c=String(a)).toLowerCase()],n===void 0))throw new Q(`Unknown adapter '${c}'`);if(n&&(b.isFunction(n)||(n=n.get(s))))break;o[c||"#"+i]=n}if(!n){const i=Object.entries(o).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=r?i.length>1?`since :
`+i.map(Ar).join(`
`):" "+Ar(i[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n}const ga={getAdapter:Co,adapters:Gs};function ks(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Lt(null,t)}function Pr(t){return ks(t),t.headers=Me.from(t.headers),t.data=Ns.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ga.getAdapter(t.adapter||Vs.adapter,t)(t).then(function(a){return ks(t),a.data=Ns.call(t,t.transformResponse,a),a.headers=Me.from(a.headers),a},function(a){return ha(a)||(ks(t),a&&a.response&&(a.response.data=Ns.call(t,t.transformResponse,a.response),a.response.headers=Me.from(a.response.headers))),Promise.reject(a)})}const ya="1.13.2",gs={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{gs[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const Rr={};gs.transitional=function(s,r,a){function n(o,i){return"[Axios v"+ya+"] Transitional option '"+o+"'"+i+(a?". "+a:"")}return(o,i,c)=>{if(s===!1)throw new Q(n(i," has been removed"+(r?" in "+r:"")),Q.ERR_DEPRECATED);return r&&!Rr[i]&&(Rr[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(o,i,c):!0}};gs.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function _o(t,s,r){if(typeof t!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const o=a[n],i=s[o];if(i){const c=t[o],h=c===void 0||i(c,o,t);if(h!==!0)throw new Q("option "+o+" must be "+h,Q.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Q("Unknown option "+o,Q.ERR_BAD_OPTION)}}const Zt={assertOptions:_o,validators:gs},Oe=Zt.validators;class rs{constructor(s){this.defaults=s||{},this.interceptors={request:new wr,response:new wr}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const o=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=ft(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:o}=r;a!==void 0&&Zt.assertOptions(a,{silentJSONParsing:Oe.transitional(Oe.boolean),forcedJSONParsing:Oe.transitional(Oe.boolean),clarifyTimeoutError:Oe.transitional(Oe.boolean)},!1),n!=null&&(b.isFunction(n)?r.paramsSerializer={serialize:n}:Zt.assertOptions(n,{encode:Oe.function,serialize:Oe.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Zt.assertOptions(r,{baseUrl:Oe.spelling("baseURL"),withXsrfToken:Oe.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&b.merge(o.common,o[r.method]);o&&b.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),r.headers=Me.concat(i,o);const c=[];let h=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(h=h&&g.synchronous,c.unshift(g.fulfilled,g.rejected))});const m=[];this.interceptors.response.forEach(function(g){m.push(g.fulfilled,g.rejected)});let l,u=0,w;if(!h){const x=[Pr.bind(this),void 0];for(x.unshift(...c),x.push(...m),w=x.length,l=Promise.resolve(r);u<w;)l=l.then(x[u++],x[u++]);return l}w=c.length;let p=r;for(;u<w;){const x=c[u++],g=c[u++];try{p=x(p)}catch(y){g.call(this,y);break}}try{l=Pr.call(this,p)}catch(x){return Promise.reject(x)}for(u=0,w=m.length;u<w;)l=l.then(m[u++],m[u++]);return l}getUri(s){s=ft(this.defaults,s);const r=pa(s.baseURL,s.url,s.allowAbsoluteUrls);return da(r,s.params,s.paramsSerializer)}}b.forEach(["delete","get","head","options"],function(s){rs.prototype[s]=function(r,a){return this.request(ft(a||{},{method:s,url:r,data:(a||{}).data}))}});b.forEach(["post","put","patch"],function(s){function r(a){return function(o,i,c){return this.request(ft(c||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}rs.prototype[s]=r(),rs.prototype[s+"Form"]=r(!0)});const Xt=rs;class Ks{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const a=this;this.promise.then(n=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](n);a._listeners=null}),this.promise.then=n=>{let o;const i=new Promise(c=>{a.subscribe(c),o=c}).then(n);return i.cancel=function(){a.unsubscribe(o)},i},s(function(o,i,c){a.reason||(a.reason=new Lt(o,i,c),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new Ks(function(n){s=n}),cancel:s}}}const Eo=Ks;function Lo(t){return function(r){return t.apply(null,r)}}function Ao(t){return b.isObject(t)&&t.isAxiosError===!0}const Fs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Fs).forEach(([t,s])=>{Fs[s]=t});const Po=Fs;function wa(t){const s=new Xt(t),r=Xr(Xt.prototype.request,s);return b.extend(r,Xt.prototype,s,{allOwnKeys:!0}),b.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return wa(ft(t,n))},r}const he=wa(Vs);he.Axios=Xt;he.CanceledError=Lt;he.CancelToken=Eo;he.isCancel=ha;he.VERSION=ya;he.toFormData=fs;he.AxiosError=Q;he.Cancel=he.CanceledError;he.all=function(s){return Promise.all(s)};he.spread=Lo;he.isAxiosError=Ao;he.mergeConfig=ft;he.AxiosHeaders=Me;he.formToJSON=t=>xa(b.isHTMLForm(t)?new FormData(t):t);he.getAdapter=ga.getAdapter;he.HttpStatusCode=Po;he.default=he;const At=he,Ro="https://game.king-ofiq.ir/api",et=At.create({baseURL:Ro,headers:{"Content-Type":"application/json"}});et.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));et.interceptors.response.use(t=>t,t=>{var s,r,a;return((s=t.response)==null?void 0:s.status)===401&&localStorage.getItem("token")&&(localStorage.removeItem("token"),(a=(r=t.config)==null?void 0:r.url)!=null&&a.includes("/auth/login")||(window.location.href="/login")),Promise.reject(t)});const kt={async register(t){var s,r;try{const n={username:typeof t.username=="string"?t.username.trim():t.username,password:t.password};if(typeof t.email=="string"){const i=t.email.trim();i.length>0&&(n.email=i)}else t.email&&(n.email=t.email);return(await et.post("/auth/register",n)).data.data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Registration failed")}},async login(t,s){var r,a;try{return(await et.post("/auth/login",{username:typeof t=="string"?t.trim():t,password:s})).data.data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Login failed")}},async getMe(){var t,s;try{return(await et.get("/auth/me")).data.data}catch(r){throw new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to get user data")}},async updateProfile(t){var s,r;try{return(await et.put("/auth/update",t)).data.data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Profile update failed")}},async checkUsername(t){var s,r;try{return(await et.get("/auth/check-username",{params:{username:t}})).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Username check failed")}},async checkEmail(t){var s,r;try{return(await et.get(`/auth/check-email?email=${t}`)).data.available}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Email check failed")}}},ja=d.createContext({}),Se=()=>{const t=d.useContext(ja);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Mo=({children:t})=>{const[s,r]=d.useState(null),[a,n]=d.useState(!0),[o,i]=d.useState(null);d.useEffect(()=>{(async()=>{try{if(localStorage.getItem("token")){const x=await kt.getMe();r(x)}}catch(p){console.error("Auth check failed:",p),localStorage.removeItem("token")}finally{n(!1)}})()},[]);const u={user:s,loading:a,error:o,login:async(w,p)=>{try{i(null);const x=await kt.login(w,p);return localStorage.setItem("token",x.token),r(x.user),x}catch(x){throw i(x.message),x}},register:async w=>{try{i(null);const p=await kt.register(w);return localStorage.setItem("token",p.token),r(p.user),p}catch(p){throw i(p.message),p}},logout:()=>{localStorage.removeItem("token"),r(null),i(null)},updateUser:w=>{r(p=>({...p,...w}))},isAuthenticated:!!s,isAdmin:(s==null?void 0:s.isAdmin)||!1};return e.jsx(ja.Provider,{value:u,children:t})},Uo="https://game.king-ofiq.ir/api",$e=At.create({baseURL:Uo,headers:{"Content-Type":"application/json"}});$e.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));$e.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(t)});const st={async getFirstLevel(){var t,s;try{return(await $e.get("/game/level/1")).data}catch(r){throw new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to load the first level")}},async getNextLevel(t){var s,r;try{const a=t?{params:{levelId:t}}:{};return(await $e.get("/game/next-level",a)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to get next level")}},async getLevels(){var t,s;try{return(await $e.get("/game/levels")).data}catch(r){throw new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to load levels")}},async unlockLevel(t){var s,r;try{return(await $e.post("/game/unlock-level",{levelId:t})).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to unlock level")}},async completeWord(t,s,r){var a,n;try{const o={word:t,levelId:s};return r&&(o.powerUpsUsed=r),(await $e.post("/game/complete-word",o)).data}catch(o){throw new Error(((n=(a=o.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to complete word")}},async autoSolve(t,s){var r,a;try{const n={levelId:t};return s&&(n.powerUpsUsed=s),(await $e.post("/game/auto-solve",n)).data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to auto solve")}},async purchaseShuffle(t){var s,r;try{return(await $e.post("/game/shuffle",{levelId:t})).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to purchase shuffle")}},async getGameStats(){var t,s;try{return(await $e.get("/game/stats")).data.data}catch(r){throw new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to get game stats")}}},Ye=t=>{if(t==null)return null;const s=Number(t);return Number.isNaN(s)?null:s},Yt=()=>({shuffle:!1,autoSolve:!1}),We=()=>({completed:!1,source:null,stars:null,powerUpsUsed:Yt()}),va=d.createContext({}),Na=()=>{const t=d.useContext(va);if(!t)throw new Error("useGame must be used within a GameProvider");return t},To=({children:t})=>{const{user:s,isAuthenticated:r,loading:a,updateUser:n}=Se(),o=cs(),[i,c]=d.useState(null),[h,m]=d.useState(null),[l,u]=d.useState({selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:[],isConnecting:!1}),[w,p]=d.useState(null),[x,g]=d.useState(()=>We()),[y,v]=d.useState(()=>Yt()),S=d.useRef(y),[C,F]=d.useState(null),[H,V]=d.useState(!1),$=d.useRef(null),P=d.useRef(null),Z=d.useRef(!1);d.useEffect(()=>{S.current=y},[y]);const Y=d.useCallback(()=>{const N=Yt();S.current=N,v(N)},[]),R=d.useCallback((N={})=>{v(B=>{const q={shuffle:B.shuffle||!!N.shuffle,autoSolve:B.autoSolve||!!N.autoSolve};return q.shuffle===B.shuffle&&q.autoSolve===B.autoSolve?B:(S.current=q,q)})},[]),f=d.useCallback(N=>{N&&v(B=>{if(B[N])return B;const q={...B,[N]:!0};return S.current=q,q})},[]);d.useEffect(()=>{a||(c(null),m(null),u({selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:[],isConnecting:!1}),$.current=null,P.current=null,Z.current=!1,p(null),F(null),g(We()),v(Yt()),V(!1))},[r,a]);const _=d.useCallback((N,B={})=>{const q=(N==null?void 0:N.data)??null,ne=B.metaOverride??(N==null?void 0:N.meta)??null,ee=(q==null?void 0:q.level)??null,te=i!=null&&i._id?String(i._id):null,X=ee!=null&&ee._id?String(ee._id):null;if(q!=null&&q.powerUpsUsed&&R(q.powerUpsUsed),m(ne),!ee)return c(null),u(fe=>({...fe,selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:[]})),$.current=null,P.current=null,Z.current=!1,p(null),g(We()),Y(),{level:null,meta:ne,payload:q};X&&X!==te&&Y();const W=Ye(ee.order),ue=Ye($.current),ie=Z.current&&ue!==null,le=B.transitionOverride??null??P.current??null;let je=(le==null?void 0:le.type)??null,Ce=null;ie&&W!==null&&ue!==null&&(Ce=W-ue),ie&&W!==null&&W!==ue&&(je||(Ce>1?je="skipped":Ce===1?je="advanced":Ce<0?je="revisit":je="advanced"),p({type:je,from:ue,to:W,difference:Ce,userProgress:(q==null?void 0:q.userProgress)??null,meta:ne,cause:le??null,timestamp:Date.now()})),$.current=W,Z.current=!0,P.current=null;const pe=Array.from(new Set(((q==null?void 0:q.completedWords)??[]).filter(Boolean).map(fe=>fe.toUpperCase()))),it=Array.isArray(ee==null?void 0:ee.words)?ee.words.filter(Boolean).length:0,Le=it>0&&pe.length>=it;if(c(ee),u(fe=>({...fe,selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:pe})),Le){const fe=B.completionSource??"synced";g({completed:!0,source:fe,stars:null,powerUpsUsed:{...S.current}})}else g(We());return{level:ee,meta:ne,payload:q,completedWords:pe}},[i==null?void 0:i._id,R,Y,u,g,m,p]),{isLoading:O,refetch:U}=Ve(["nextLevel",s==null?void 0:s.id],()=>st.getNextLevel(),{enabled:!a&&r,onSuccess:N=>{_(N)}}),J=d.useCallback(async(N,B={})=>{var q,ne,ee;if(!N)return null;if(!r)throw new Error("       ");V(!0);try{const te=await st.getNextLevel(N);o.setQueryData(["nextLevel",s==null?void 0:s.id],te);const X=Ye((ne=(q=te==null?void 0:te.data)==null?void 0:q.level)==null?void 0:ne.order),W={type:B.transitionType||"changed",from:Ye(i==null?void 0:i.order),to:X,target:X,requestedLevelId:N};return _(te,{transitionOverride:W,metaOverride:{...(te==null?void 0:te.meta)??{},status:((ee=te==null?void 0:te.meta)==null?void 0:ee.status)??"level_selected",requestedLevelId:N},completionSource:B.completionSource||"manual"}),te}finally{V(!1)}},[i==null?void 0:i.order,_,r,o,s==null?void 0:s.id]),{isLoading:j,refetch:G}=Ve(["guestLevel"],()=>st.getFirstLevel(),{enabled:!a&&!r,onSuccess:N=>{const B=(N==null?void 0:N.data)??null;if(!B){c(null),m({status:"guest_level_unavailable",guest:!0}),u(ne=>({...ne,selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:[]})),$.current=null,P.current=null,Z.current=!1;return}const q=Ye(B.order);c(B),m({status:"guest_level",guest:!0,guestCompleted:!1}),u(ne=>({...ne,selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:[]})),$.current=q,Z.current=!0,P.current=null,g(We()),Y()},onError:()=>{c(null),m({status:"guest_level_error",guest:!0}),$.current=null,P.current=null,Z.current=!1}}),ae=a||H||(r?O:j),L=Ot(({word:N,levelId:B,powerUpsUsed:q})=>st.completeWord(N,B,q),{onSuccess:N=>{var ue,ie,oe,le;const B=(ie=(ue=N==null?void 0:N.data)==null?void 0:ue.word)==null?void 0:ie.text,q=((oe=N==null?void 0:N.data)==null?void 0:oe.powerUpsUsed)??{},ne={shuffle:S.current.shuffle||!!q.shuffle,autoSolve:S.current.autoSolve||!!q.autoSolve};R(q),s&&n({coins:N.data.totalCoins,totalScore:N.data.totalScore});let ee=[];u(je=>{const Ce=B==null?void 0:B.toUpperCase(),pe=Ce?Array.from(new Set([...je.completedWords,Ce])):je.completedWords;return ee=pe,{...je,selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:pe}});const te=Array.isArray(i==null?void 0:i.words)?i.words.filter(Boolean).length:0,X=te>0&&ee.length>=te;X&&(P.current={type:"completed",from:Ye(i==null?void 0:i.order)});const W=((le=N==null?void 0:N.data)==null?void 0:le.starsEarned)??null;g(X?{completed:!0,source:"manual",stars:W,powerUpsUsed:ne}:We()),o.invalidateQueries(["nextLevel",s==null?void 0:s.id]),o.invalidateQueries(["leaderboard"]),o.invalidateQueries(["gameLevels"])}}),A=Ot(({levelId:N,powerUpsUsed:B})=>st.autoSolve(N,B),{onSuccess:N=>{var W,ue,ie,oe,le,je,Ce;const B=((W=N==null?void 0:N.data)==null?void 0:W.powerUpsUsed)??{},q={shuffle:S.current.shuffle||!!B.shuffle,autoSolve:!0};R({...B,autoSolve:!0}),s&&n({coins:N.data.remainingCoins,totalScore:N.data.totalScore});let ne=[];u(pe=>{var fe,Ze,Dt;const it=(Dt=(Ze=(fe=N==null?void 0:N.data)==null?void 0:fe.solvedWord)==null?void 0:Ze.text)==null?void 0:Dt.toUpperCase(),Le=it?Array.from(new Set([...pe.completedWords,it])):pe.completedWords;return ne=Le,{...pe,selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:Le}});const ee=Array.isArray(i==null?void 0:i.words)?i.words.filter(Boolean).length:0,te=ee>0&&ne.length>=ee;te&&(P.current={type:"completed",from:Ye(i==null?void 0:i.order)}),F({word:((ue=N==null?void 0:N.data)==null?void 0:ue.solvedWord)??null,coinsSpent:((ie=N==null?void 0:N.data)==null?void 0:ie.coinsSpent)??null,remainingCoins:((oe=N==null?void 0:N.data)==null?void 0:oe.remainingCoins)??null,levelCompleted:te,levelBonus:((le=N==null?void 0:N.data)==null?void 0:le.levelBonus)??0,starsEarned:((je=N==null?void 0:N.data)==null?void 0:je.starsEarned)??null,powerUpsUsed:q});const X=((Ce=N==null?void 0:N.data)==null?void 0:Ce.starsEarned)??null;g(te?{completed:!0,source:"auto",stars:X,powerUpsUsed:q}:We()),te||o.invalidateQueries(["nextLevel",s==null?void 0:s.id]),o.invalidateQueries(["leaderboard"]),o.invalidateQueries(["gameLevels"])}}),I=N=>{u(B=>{if(B.selectedNodes.some(ee=>ee.id===N.id))return B;const q=[...B.selectedNodes,N],ne=q.map(ee=>ee.letter).join("");return{...B,selectedNodes:q,selectionPreview:ne}})},K=()=>{u(N=>{if(N.selectedNodes.length===0)return N;const B=N.selectedNodes.slice(0,-1),q=B.map(ne=>ne.letter).join("");return{...N,selectedNodes:B,selectionPreview:q}})},se=()=>{u(N=>({...N,selectedNodes:[],selectionPreview:"",currentWord:""}))},ge=N=>{u(B=>({...B,currentWord:N}))},De=N=>{u(B=>({...B,selectedNodes:[],selectionPreview:"",currentWord:N}))},ye=async(N=null)=>{var ne,ee;const B=N||l.currentWord;if(!B||!i)return null;const q=B.toUpperCase();if(!r){if(!(i.words||[]).map(oe=>(typeof oe=="string"?oe:(oe==null?void 0:oe.text)||"").toUpperCase()).includes(q))throw se(),new Error("     ");let X;if(Array.isArray(i.words)){const oe=i.words.find(le=>typeof le=="string"?le.toUpperCase()===q:((le==null?void 0:le.text)||"").toUpperCase()===q);oe&&typeof oe!="string"&&(X=oe.meaning)}let W=[];u(oe=>{const le=Array.from(new Set([...oe.completedWords,q]));return W=le,{...oe,selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:le}});const ue=((ne=i.words)==null?void 0:ne.length)??0,ie=ue>0&&W.length>=ue;return m(oe=>({...oe&&oe.guest?oe:{status:"guest_level",guest:!0},guestCompleted:ie})),{success:!0,data:{word:{text:q,meaning:X},levelCompleted:ie},meta:{guest:!0}}}try{const te=await L.mutateAsync({word:B,levelId:i._id,powerUpsUsed:S.current});return(ee=te==null?void 0:te.data)!=null&&ee.levelCompleted&&(P.current={type:"completed",from:Ye(i==null?void 0:i.order)}),te}catch(te){throw se(),te}},Je=async()=>{if(i){if(!r)throw new Error("         ");return A.mutateAsync({levelId:i._id,powerUpsUsed:S.current})}},yt=d.useCallback(()=>{p(null)},[]),Ee=d.useCallback(()=>{F(null),g(N=>N.source==="auto"?We():N)},[]),Ae=d.useCallback(()=>{u({selectedNodes:[],selectionPreview:"",currentWord:"",completedWords:[],isConnecting:!1}),g(We()),Y()},[Y]),Qe=d.useCallback(async()=>{if(Ae(),r){await U({cancelRefetch:!1,throwOnError:!0});return}await G({cancelRefetch:!1,throwOnError:!0})},[r,G,U,Ae]),nt={currentLevel:i,gameState:l,levelMeta:h,levelLoading:ae,isCompletingWord:L.isLoading,isAutoSolving:A.isLoading,isGuestMode:!r,selectLetter:I,deselectLetter:K,clearSelection:se,setCurrentWord:ge,finalizeWordSelection:De,submitWord:ye,autoSolve:Je,loadLevelById:J,powerUpUsage:y,markPowerUpUsed:f,resetPowerUpUsage:Y,completeWordMutation:L,autoSolveMutation:A,levelTransition:w,clearLevelTransition:yt,autoSolveResult:C,clearAutoSolveResult:Ee,levelCompletionStatus:x,loadNextLevel:Qe};return e.jsx(va.Provider,{value:nt,children:t})},Oo="https://game.king-ofiq.ir/api",ka=At.create({baseURL:Oo,headers:{"Content-Type":"application/json"}});ka.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));const Sa={async getLeaderboard(t=20,s=0){var r,a;try{return(await ka.get(`/leaderboard?limit=${t}&offset=${s}`)).data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to get leaderboard")}}};var $o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Fo=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T=(t,s)=>{const r=d.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:c,...h},m)=>d.createElement("svg",{ref:m,...$o,width:n,height:n,stroke:a,strokeWidth:i?Number(o)*24/Number(n):o,className:`lucide lucide-${Fo(t)}`,...h},[...s.map(([l,u])=>d.createElement(l,u)),...(Array.isArray(c)?c:[c])||[]]));return r.displayName=`${t}`,r},Io=T("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Mr=T("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),ht=T("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Is=T("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),ys=T("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),He=T("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Bo=T("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Do=T("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]),zo=T("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),Ca=T("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ut=T("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),_a=T("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Wo=T("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qo=T("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ho=T("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ke=T("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),as=T("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Vo=T("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Bs=T("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ns=T("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Go=T("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Ko=T("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Ct=T("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),Jo=T("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),Qo=T("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),Ht=T("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Js=T("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),is=T("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Zo=T("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Ss=T("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Ur=T("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Ie=T("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),bt=T("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Cs=T("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Xo=T("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Yo=T("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),el=T("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),tl=T("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),es=T("Milestone",[["path",{d:"M18 6H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h13l4-3.5L18 6Z",key:"1mp5s7"}],["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}]]),sl=T("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),rl=T("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),al=T("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Qs=T("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Zs=T("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),nl=T("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),il=T("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Tr=T("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ea=T("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),La=T("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ol=T("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),pt=T("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Or=T("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),xe=T("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Nt=T("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ll=T("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),Aa=T("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Xs=T("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ys=T("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ue=T("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),$r=T("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),cl=T("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Vt=T("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),er=T("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),os=T("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),dl=T("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),ml=T("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),rt=T("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pa=T("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),xl=()=>{const{user:t,isAuthenticated:s}=Se(),[r,a]=d.useState(null),{data:n}=Ve(["leaderboard","home"],()=>Sa.getLeaderboard(5,0),{enabled:!0,staleTime:5*60*1e3});d.useEffect(()=>{n!=null&&n.data&&a(n.data)},[n]);const o=[{icon:Aa,title:"   ",description:"         -  !",color:"text-primary-400",bgGradient:"from-primary-500/20 to-primary-600/10"},{icon:Pa,title:" ",description:"       ",color:"text-secondary-400",bgGradient:"from-secondary-500/20 to-secondary-600/10"},{icon:Ue,title:" ",description:"       !",color:"text-accent-400",bgGradient:"from-accent-500/20 to-accent-600/10"},{icon:ys,title:"",description:"      !",color:"text-blue-400",bgGradient:"from-blue-500/20 to-blue-600/10"}];return e.jsxs("div",{className:"space-y-12",children:[e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-primary-400 via-secondary-400 to-accent-400 bg-clip-text text-transparent drop-shadow-[0_0_30px_rgba(168,85,247,0.5)] animate-gradient-shift bg-[length:200%_auto]",children:""}),e.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto drop-shadow-lg",children:"   !              ! "}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(re,{to:"/game",className:"bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-400 hover:to-secondary-400 text-white font-bold py-4 px-10 rounded-xl transition-all transform hover:scale-105 hover:-translate-y-1 flex items-center justify-center space-x-2 space-x-reverse shadow-[0_0_20px_rgba(168,85,247,0.5)] hover:shadow-[0_0_30px_rgba(168,85,247,0.7)]",children:[e.jsx(Qs,{className:"w-6 h-6"}),e.jsx("span",{children:" ! "})]}),e.jsxs(re,{to:"/leaderboard",className:"bg-glass hover:bg-glass-hover text-white font-bold py-4 px-10 rounded-xl transition-all transform hover:scale-105 hover:-translate-y-1 flex items-center justify-center space-x-2 space-x-reverse border-2 border-glass-border hover:border-primary-400 backdrop-blur-xl shadow-glass hover:shadow-[0_0_20px_rgba(168,85,247,0.3)]",children:[e.jsx(Ue,{className:"w-6 h-6"}),e.jsx("span",{children:"  "})]})]})]}),s&&t&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-glass backdrop-blur-xl rounded-3xl border-2 border-glass-border p-8 shadow-[0_0_40px_rgba(168,85,247,0.15)] hover:shadow-[0_0_60px_rgba(168,85,247,0.25)] transition-all",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent mb-8 text-center",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-xl bg-gradient-to-br from-primary-500/10 to-primary-600/5 border border-primary-500/20 hover:border-primary-500/40 transition-all",children:[e.jsx("div",{className:"text-4xl font-bold text-primary-400 mb-2 drop-shadow-[0_0_10px_rgba(168,85,247,0.5)]",children:t.levelsCleared||0}),e.jsx("div",{className:"text-white/70 font-medium",children:"  "})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-gradient-to-br from-accent-500/10 to-accent-600/5 border border-accent-500/20 hover:border-accent-500/40 transition-all",children:[e.jsx("div",{className:"text-4xl font-bold text-accent-400 mb-2 drop-shadow-[0_0_10px_rgba(6,182,212,0.5)]",children:t.coins||0}),e.jsx("div",{className:"text-white/70 font-medium",children:""})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-gradient-to-br from-secondary-500/10 to-secondary-600/5 border border-secondary-500/20 hover:border-secondary-500/40 transition-all",children:[e.jsx("div",{className:"text-4xl font-bold text-secondary-400 mb-2 drop-shadow-[0_0_10px_rgba(217,70,239,0.5)]",children:t.wordsFound||0}),e.jsx("div",{className:"text-white/70 font-medium",children:"  "})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-gradient-to-br from-blue-500/10 to-blue-600/5 border border-blue-500/20 hover:border-blue-500/40 transition-all",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2 drop-shadow-[0_0_10px_rgba(59,130,246,0.5)]",children:t.totalScore||0}),e.jsx("div",{className:"text-white/70 font-medium",children:" "})]})]})]}),e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary-400 via-secondary-400 to-accent-400 bg-clip-text text-transparent text-center mb-12",children:"   "}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((i,c)=>{const h=i.icon;return e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+c*.1},className:"bg-glass backdrop-blur-xl rounded-2xl border-2 border-glass-border p-6 text-center hover:bg-glass-hover transition-all hover:-translate-y-2 hover:shadow-[0_0_30px_rgba(168,85,247,0.3)] group relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${i.bgGradient} opacity-0 group-hover:opacity-100 transition-opacity`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`w-16 h-16 ${i.color} mx-auto mb-4 group-hover:scale-110 transition-transform drop-shadow-[0_0_15px_rgba(168,85,247,0.5)]`,children:e.jsx(h,{className:"w-full h-full"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-white/95",children:i.title}),e.jsx("p",{className:"text-white/70 group-hover:text-white/80",children:i.description})]})]},c)})})]}),(r==null?void 0:r.leaderboard)&&r.leaderboard.length>0&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-glass backdrop-blur-xl rounded-3xl border-2 border-glass-border p-8 shadow-[0_0_40px_rgba(168,85,247,0.15)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:" "}),e.jsx(re,{to:"/leaderboard",className:"text-primary-400 hover:text-primary-300 transition-all font-bold hover:drop-shadow-[0_0_10px_rgba(168,85,247,0.5)]",children:"  "})]}),e.jsx("div",{className:"space-y-3",children:r.leaderboard.slice(0,5).map(i=>{var h;const c=i.rank===1?"":i.rank===2?"":i.rank===3?"":"";return e.jsxs("div",{className:"flex items-center justify-between bg-glass-hover rounded-xl p-4 border border-glass-border hover:border-primary-500/40 transition-all hover:shadow-[0_0_20px_rgba(168,85,247,0.2)]",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-primary-500/80 to-secondary-500/80 text-white font-bold text-sm shadow-[0_0_15px_rgba(168,85,247,0.4)]",children:i.rank}),e.jsx("div",{className:"text-2xl w-8 text-center",children:c}),e.jsx("div",{className:"text-white font-bold text-base",children:i.username})]}),e.jsxs("div",{className:"flex items-center gap-2 text-primary-300 font-bold",children:[e.jsx("span",{children:((h=i.totalScore)==null?void 0:h.toLocaleString())||0}),e.jsx("span",{className:"text-sm text-white/60",children:""})]})]},i.rank)})})]}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"text-center",children:e.jsxs("div",{className:"relative bg-gradient-to-r from-primary-500/20 via-secondary-500/20 to-accent-500/20 backdrop-blur-xl rounded-3xl border-2 border-glass-border p-10 shadow-[0_0_60px_rgba(168,85,247,0.2)] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500/10 via-secondary-500/10 to-accent-500/10 animate-gradient-shift bg-[length:200%_auto]"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary-300 via-secondary-300 to-accent-300 bg-clip-text text-transparent mb-4 drop-shadow-[0_0_20px_rgba(168,85,247,0.3)]",children:"   "}),e.jsx("p",{className:"text-white/90 mb-8 max-w-2xl mx-auto text-lg",children:"   !        ! "}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[!s&&e.jsx(re,{to:"/register",className:"bg-gradient-to-r from-secondary-500 to-accent-500 hover:from-secondary-400 hover:to-accent-400 text-white font-bold py-4 px-10 rounded-xl transition-all transform hover:scale-105 hover:-translate-y-1 shadow-[0_0_20px_rgba(217,70,239,0.5)] hover:shadow-[0_0_30px_rgba(217,70,239,0.7)]",children:"  !"}),e.jsx(re,{to:"/game",className:"bg-gradient-to-r from-primary-500 to-blue-500 hover:from-primary-400 hover:to-blue-400 text-white font-bold py-4 px-10 rounded-xl transition-all transform hover:scale-105 hover:-translate-y-1 shadow-[0_0_20px_rgba(168,85,247,0.5)] hover:shadow-[0_0_30px_rgba(168,85,247,0.7)]",children:" ! "})]})]})]})})]})},hl=d.forwardRef((t,s)=>{const{currentLevel:r,gameState:a,selectLetter:n,clearSelection:o,setCurrentWord:i,submitWord:c,isCompletingWord:h}=Na(),m=d.useRef(null),[l,u]=d.useState(!1),[w,p]=d.useState({x:0,y:0}),[x,g]=d.useState([]),[y,v]=d.useState([]),[S,C]=d.useState({width:400,height:400}),[F,H]=d.useState(null),V=d.useRef(null),$=d.useRef(!1),P=d.useCallback((L,A)=>{V.current&&clearTimeout(V.current),H({type:L,message:A});const I=setTimeout(()=>{H(null),V.current=null},L==="success"?1800:2200);V.current=I},[]);d.useEffect(()=>()=>{V.current&&clearTimeout(V.current)},[]),d.useEffect(()=>{if(!(r!=null&&r.letters))return;const L=r.letters.split("");g(L.map((A,I)=>({letter:A,originalIndex:I})))},[r==null?void 0:r.letters]),d.useEffect(()=>{if(!x.length)return;const L=S.width/2,A=S.height/2,I=Math.min(S.width,S.height)*.35,K=2*Math.PI/x.length,se=x.map((ge,De)=>{const ye=De*K-Math.PI/2;return{id:`${ge.letter}-${ge.originalIndex}`,letter:ge.letter,x:L+I*Math.cos(ye),y:A+I*Math.sin(ye)}});v(se)},[x,S]);const Z=d.useCallback(()=>{g(L=>{if(!L.length)return L;const A=[...L];for(let I=A.length-1;I>0;I-=1){const K=Math.floor(Math.random()*(I+1));[A[I],A[K]]=[A[K],A[I]]}return A})},[]);d.useImperativeHandle(s,()=>({shuffleLetters:Z}),[Z]);const Y=d.useMemo(()=>{const L=new Map;return y.forEach(A=>{L.set(A.id,A)}),L},[y]),R=d.useMemo(()=>r!=null&&r.words?r.words.map(L=>typeof L=="string"?L:L.text??"").map(L=>L.toUpperCase()):[],[r==null?void 0:r.words]),f=d.useCallback(L=>{var ye,Je;const A=m.current;if(!A)return{x:0,y:0};const I=A.getBoundingClientRect(),K="touches"in L&&((ye=L.touches)!=null&&ye.length)?L.touches[0].clientX:L.clientX,se="touches"in L&&((Je=L.touches)!=null&&Je.length)?L.touches[0].clientY:L.clientY,ge=S.width/I.width,De=S.height/I.height;return{x:(K-I.left)*ge,y:(se-I.top)*De}},[S.height,S.width]),_=d.useCallback(L=>{for(const I of y)if(Math.sqrt(Math.pow(L.x-I.x,2)+Math.pow(L.y-I.y,2))<30)return I;return null},[y]),O=d.useCallback(L=>{L.preventDefault();const A=f(L),I=_(A);if(I){(a.selectedNodes.length>0||a.currentWord)&&o();const K=m.current;if(K&&"pointerId"in L)try{K.setPointerCapture(L.pointerId)}catch{}i(""),u(!0),n(I),p(A)}},[o,a.currentWord,a.selectedNodes.length,f,_,n,i]),U=d.useCallback(L=>{if(!l)return;L.preventDefault();const A=f(L);p(A);const I=_(A);I&&!a.selectedNodes.some(K=>K.id===I.id)&&n(I)},[l,f,_,n,a.selectedNodes]),J=d.useCallback(async L=>{var I,K;L.preventDefault();const A=m.current;if(A&&"pointerId"in L)try{A.releasePointerCapture(L.pointerId)}catch{}if(u(!1),!($.current||h)&&a.selectedNodes.length>0){const se=a.selectionPreview;if(se.length<3){P("error","...       ! "),o();return}const ge=se.toUpperCase();if(a.completedWords.some(ye=>ye.toUpperCase()===ge)){P("error","     !      "),o();return}if(!R.includes(ge)){P("error"," !          "),o();return}$.current=!0;try{const ye=await c(se),Je=R.length,yt=a.completedWords.length+1,Ee=se.toUpperCase();let Qe=(K=(I=ye==null?void 0:ye.data)==null?void 0:I.word)==null?void 0:K.meaning;if(!Qe&&Array.isArray(r==null?void 0:r.words)){const N=r.words.find(B=>typeof B=="string"?B.toUpperCase()===Ee:((B==null?void 0:B.text)||"").toUpperCase()===Ee);N&&typeof N!="string"&&(Qe=N.meaning)}const nt=[`! ${Ee}   !`,`${yt}  ${Je} `];Qe&&nt.push(` : ${Qe}`),P("success",nt.join(`
`))}catch(ye){P("error",ye.message||"   !"),o()}finally{$.current=!1}}},[o,r,a.completedWords,a.selectedNodes.length,a.selectionPreview,R,c,P,h]),j=d.useCallback(L=>{l&&J(L)},[J,l]),G=d.useMemo(()=>{const L=a.selectedNodes.map(A=>Y.get(A.id)).filter(Boolean);return l&&L.length>0?[...L,w]:L},[a.selectedNodes,Y,l,w]),ae=d.useCallback(()=>{if(G.length===0)return"";const[L,...A]=G;let I=`M ${L.x} ${L.y}`;return A.forEach(K=>{I+=` L ${K.x} ${K.y}`}),I},[G]);return d.useEffect(()=>{const L=()=>{var I;const A=(I=m.current)==null?void 0:I.parentElement;if(A){const K=Math.min(A.clientWidth,500);C({width:K,height:K})}};return L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]),r?e.jsxs("div",{className:"relative w-full max-w-lg mx-auto",children:[e.jsx(ve,{children:F&&e.jsx(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"pointer-events-none absolute inset-0 z-20 flex items-center justify-center",children:e.jsx("div",{className:`max-w-xs text-center rounded-2xl px-6 py-4 shadow-[0_20px_45px_rgba(17,12,28,0.55)] border ${F.type==="success"?"bg-emerald-500/20 border-emerald-400/40 text-emerald-50":"bg-rose-500/20 border-rose-400/40 text-rose-50"}`,children:e.jsx("p",{className:"text-lg font-semibold leading-relaxed drop-shadow-sm whitespace-pre-line",children:F.message})})},"feedback-popup")}),e.jsxs("div",{className:"relative rounded-3xl border border-purple-500/30 bg-[radial-gradient(circle_at_top,#2e1065_0%,#1a1033_55%,#130a23_100%)] shadow-[0_30px_60px_rgba(17,12,28,0.45)] p-5",children:[e.jsxs("svg",{ref:m,width:S.width,height:S.height,viewBox:`0 0 ${S.width} ${S.height}`,className:"w-full h-auto select-none touch-none",onPointerDown:O,onPointerMove:U,onPointerUp:J,onPointerLeave:j,onPointerCancel:j,style:{touchAction:"none"},children:[e.jsx(ve,{children:l&&G.length>0&&e.jsx(E.path,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},d:ae(),fill:"none",stroke:"url(#connectionGradient)",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#neonGlow)",className:"pointer-events-none"},"connection-line")}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"connectionGradient",x1:"0",y1:"0",x2:S.width,y2:S.height,gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{offset:"0%",stopColor:"#a855f7"}),e.jsx("stop",{offset:"50%",stopColor:"#d946ef"}),e.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]}),e.jsxs("linearGradient",{id:"selectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#d946ef"}),e.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]}),e.jsxs("filter",{id:"neonGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"6",result:"coloredBlur"}),e.jsx("feColorMatrix",{in:"coloredBlur",type:"matrix",values:"0 0 0 0 0.66  0 0 0 0 0.33  0 0 0 0 0.93  0 0 0 0.6 0"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),y.map(L=>{const A=a.selectedNodes.some(K=>K.id===L.id),I=a.showHint&&a.hintLetter===L.letter;return e.jsxs("g",{children:[e.jsx(E.circle,{cx:L.x,cy:L.y,r:"24",className:`cursor-pointer transition-all ${A?"fill-purple-500 stroke-pink-400":I?"fill-pink-500 stroke-pink-400 animate-pulse-glow":"fill-glass-hover stroke-glass-border hover:fill-glass"}`,strokeWidth:"2",style:A||I?{filter:"drop-shadow(0 0 15px rgba(168, 85, 247, 0.8))"}:{},whileHover:{scale:1.1},whileTap:{scale:.95}}),e.jsx("text",{x:L.x,y:L.y,textAnchor:"middle",dominantBaseline:"middle",className:`pointer-events-none font-bold text-lg ${A||I?"fill-white":"fill-white/80"}`,children:L.letter}),A&&e.jsx(E.circle,{cx:L.x,cy:L.y,r:"32",fill:"none",stroke:"url(#selectionGradient)",strokeWidth:"3",className:"drop-shadow-[0_0_10px_rgba(168,85,247,0.6)]",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.2}})]},L.id)})]}),e.jsx(ve,{children:a.selectionPreview&&e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm rounded-lg px-4 py-2 border border-purple-500/30 shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:e.jsx("span",{className:"font-mono text-lg tracking-wider bg-gradient-to-r from-purple-300 via-pink-300 to-cyan-300 bg-clip-text text-transparent font-bold",children:a.selectionPreview})})})]}),e.jsx("div",{className:"flex justify-center space-x-4 mt-6",children:e.jsx("button",{onClick:o,disabled:a.selectedNodes.length===0&&!a.currentWord,className:"px-4 py-2 bg-gradient-to-r from-pink-500/20 to-purple-500/20 hover:from-pink-500/30 hover:to-purple-500/30border border-pink-500/30 text-white rounded-lg transition-all shadow-[0_0_10px_rgba(217,70,239,0.2)] hover:shadow-[0_0_20px_rgba(217,70,239,0.4)] disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})})]}):e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"text-white/60",children:"Loading level..."})})}),ul="https://game.king-ofiq.ir/api",Ke=At.create({baseURL:ul,headers:{"Content-Type":"application/json"}});Ke.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));Ke.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(t)});const pl=async(t,s=null,r="")=>(await Ke.post("/leitner/add",{wordId:t,levelId:s,notes:r})).data,fl=async(t={})=>(await Ke.get("/leitner/words",{params:t})).data,bl=async(t=20)=>(await Ke.get("/leitner/review",{params:{limit:t}})).data,gl=async(t,s)=>(await Ke.post(`/leitner/review/${t}`,{result:s})).data,yl=async()=>(await Ke.get("/leitner/stats")).data,wl=async t=>(await Ke.post(`/leitner/${t}/reset`)).data,jl=async t=>(await Ke.delete(`/leitner/${t}`)).data,_s=new Set(["no_published_levels","no_levels_for_new_user","all_levels_completed"]),vl=()=>{var or,lr;const t=d.useRef(null),{currentLevel:s,gameState:r,autoSolve:a,isAutoSolving:n,levelLoading:o,levelMeta:i,isGuestMode:c,levelTransition:h,clearLevelTransition:m,autoSolveResult:l,clearAutoSolveResult:u,levelCompletionStatus:w,loadNextLevel:p,loadLevelById:x,powerUpUsage:g,markPowerUpUsed:y}=Na(),{user:v,isAuthenticated:S,updateUser:C}=Se(),[F,H]=d.useState(!1),[V,$]=d.useState(null),[P,Z]=d.useState(0),[Y,R]=d.useState({type:null}),[f,_]=d.useState(!1),[O,U]=d.useState(!1),[J,j]=d.useState(!1),[G,ae]=d.useState(!1),[L,A]=d.useState(null),[I,K]=d.useState({shuffle:!1,autoSolve:!1}),[se,ge]=d.useState(null),[De,ye]=d.useState(new Set),[Je,yt]=d.useState(null),Ee=15,Ae=(s==null?void 0:s._id)??null,[Qe,nt]=Ya(),N=Qe.get("levelId"),B=d.useRef(null),q=d.useRef((i==null?void 0:i.status)??null),ne=d.useRef(!1),ee=d.useRef(!1),te=d.useMemo(()=>new Intl.NumberFormat("fa-IR"),[]),X=d.useCallback(k=>{if(k==null)return"";const M=Number(k);return Number.isNaN(M)?"":te.format(M)},[te]),W=d.useMemo(()=>{var cr,dr,mr,xr;if(!h)return null;const k=js=>{if(js==null)return null;const hr=Number(js);return Number.isNaN(hr)?null:hr},M=k(h.to??((cr=h==null?void 0:h.cause)==null?void 0:cr.to)??((dr=h==null?void 0:h.cause)==null?void 0:dr.target)),z=k(h.from??((mr=h==null?void 0:h.cause)==null?void 0:mr.from)),me=(typeof h.difference=="number"?h.difference:M!==null&&z!==null?M-z:null)??0,de=Math.abs(me),Xe=me>=0;let Pe=h.type||((xr=h==null?void 0:h.cause)==null?void 0:xr.type)||"advanced";Pe==="changed"&&(Pe="advanced");const Rt=M!==null?` ${X(M)}`:"  ";let Mt,vt,Ut;Pe==="completed"?(Mt="  ! ",vt=`!        ${Rt}   .`,Ut=" "):Pe==="skipped"?(Mt="     ",de>1?vt=` ${X(de)}       ${Rt} .`:vt=`         ${Rt}.`,Ut=" "):Xe?(Mt="    ",vt=`  ${Rt} .      !`,Ut=" ",Pe="advanced"):(Mt="    ",vt=`  ${Rt}    .`,Ut="",Pe="revisit");const Ja=de>0?`${Xe?"+":""}${X(de)}`:null,Qa=de>0?Xe?`${X(de)}   `:`${X(de)}  `:null;return{title:Mt,description:vt,badge:Ut,type:Pe,from:z,to:M,difference:me,absDifference:de,isForward:Xe,differenceLabel:Ja,differenceSummary:Qa,userProgress:h.userProgress??null}},[h,X]);d.useEffect(()=>{K(g)},[g]),d.useEffect(()=>{Z(0)},[Ae]),d.useEffect(()=>{const k=(i==null?void 0:i.status)??null,M=!!s;if(!ne.current){q.current=k,ne.current=!0,!M&&_s.has(k)&&(ee.current=!1);return}const z=q.current,ce=_s.has(z),me=!M&&_s.has(k);ce&&M&&!ee.current&&(ge({previousStatus:z,status:k,levelOrder:(s==null?void 0:s.order)??null,timestamp:Date.now()}),ee.current=!0),me&&(ee.current=!1),q.current=k},[i==null?void 0:i.status,s]),d.useEffect(()=>{if(!se)return;const k=M=>{M.key==="Escape"&&ge(null)};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[se]);const ue=d.useCallback(()=>{ge(null)},[]),ie=d.useMemo(()=>{if(!W)return null;switch(W.type){case"completed":return{icon:"text-emerald-200",chip:"from-emerald-500/20 to-green-500/20",chipBorder:"border-emerald-500/40",chipText:"text-emerald-100"};case"skipped":return{icon:"text-amber-200",chip:"from-amber-500/20 to-orange-500/20",chipBorder:"border-amber-500/40",chipText:"text-amber-100"};case"revisit":return{icon:"text-cyan-200",chip:"from-cyan-500/20 to-blue-500/20",chipBorder:"border-cyan-500/40",chipText:"text-cyan-100"};default:return{icon:"text-primary-200",chip:"from-primary-500/20 to-secondary-500/20",chipBorder:"border-primary-500/40",chipText:"text-primary-100"}}},[W]);d.useEffect(()=>{if(!N){B.current=null;return}if(S){if(N===Ae){B.current=N;return}B.current!==N&&(B.current=N,x(N,{completionSource:"manual",transitionType:"changed"}).catch(k=>{D.error(k.message||"     "),B.current=null,nt({},{replace:!0})}))}},[N,S,x,Ae,nt]),d.useEffect(()=>{if(!h)return;const k=M=>{M.key==="Escape"&&m()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[h,m]);const oe=d.useMemo(()=>{if(!Array.isArray(s==null?void 0:s.words))return new Map;const k=new Map;return s.words.forEach(M=>{if(!M)return;const z=(typeof M=="string"?M:M.text||"").toUpperCase();z&&k.set(z,{_id:typeof M=="string"?void 0:M._id,text:z,meaning:typeof M=="string"?void 0:M.meaning})}),k},[s==null?void 0:s.words]),le=d.useMemo(()=>!Array.isArray(r.completedWords)||r.completedWords.length===0?[]:r.completedWords.map(k=>{const M=(k||"").toUpperCase(),z=oe.get(M);return{_id:z==null?void 0:z._id,text:M,meaning:z==null?void 0:z.meaning}}),[r.completedWords,oe]),je=d.useMemo(()=>Array.isArray(r.completedWords)?new Set(r.completedWords.filter(Boolean).map(k=>k.toUpperCase())):new Set,[r.completedWords]),Ce=d.useMemo(()=>Array.isArray(s==null?void 0:s.words)?s.words.filter(Boolean).length:0,[s==null?void 0:s.words]),pe=d.useMemo(()=>{if(!se)return null;const k=se.previousStatus,M=se.levelOrder??null,z=M?` ${X(M)}`:" ";let ce="            .";k==="all_levels_completed"?ce="      !       .":k==="no_levels_for_new_user"?ce="    .      ":k==="no_published_levels"&&(ce="           .     !");const me=M?`   ${z}   .`:"      !",de=(i==null?void 0:i.userProgress)??null,Xe=X((de==null?void 0:de.levelsCleared)??(v==null?void 0:v.levelsCleared)??0),Pe=c?"                 .":`  ${Xe}     .     `;return{badge:" ",title:"   !",description:ce,spotlight:me,progressSummary:Pe,orderLabel:z}},[se,X,c,i==null?void 0:i.userProgress,v==null?void 0:v.levelsCleared]),it=d.useMemo(()=>{var k;return X(((k=i==null?void 0:i.userProgress)==null?void 0:k.levelsCleared)??(v==null?void 0:v.levelsCleared)??0)},[X,(or=i==null?void 0:i.userProgress)==null?void 0:or.levelsCleared,v==null?void 0:v.levelsCleared]),Le=Ce>0&&je.size>=Ce,fe=!!(w!=null&&w.completed),Ze=!!(l!=null&&l.levelCompleted),Dt=J&&(Ze||Le||fe),Ra=Ue,Ma="text-amber-200",Ua="text-amber-200 border-amber-300/40 bg-amber-500/10",Ta="  ",Oa="  !   !",ot=(w==null?void 0:w.stars)??(l==null?void 0:l.starsEarned)??null,wt=(w==null?void 0:w.powerUpsUsed)??(l==null?void 0:l.powerUpsUsed)??I,tr=!!(wt!=null&&wt.shuffle),sr=!!(wt!=null&&wt.autoSolve),$a=ot===3?" ! ! ":ot===2?" ! ":ot===1?"  ! ":"  ! ",Fa=d.useMemo(()=>Array.from({length:3}).map((k,M)=>{const z=ot!==null&&M<ot;return e.jsx(E.span,{initial:{opacity:0,scale:.8},animate:{opacity:z?1:.2,scale:z?1:.9},transition:{delay:M*.2,duration:.35},className:`text-xl sm:text-2xl ${z?"text-amber-300 drop-shadow-[0_0_12px_rgba(250,204,21,0.65)]":"text-white/20"}`,children:z?"":""},M)}),[ot]),rr=d.useMemo(()=>{if(!Array.isArray(s==null?void 0:s.words)||s.words.length===0)return[];const k=new Map;return s.words.forEach(M=>{if(!M)return;const z=(typeof M=="string"?M:M.text||"").toUpperCase();if(!z)return;const ce=z.length;k.has(ce)||k.set(ce,[]),k.get(ce).push(z)}),Array.from(k.entries()).map(([M,z])=>({length:M,words:z})).sort((M,z)=>M.length-z.length)},[s==null?void 0:s.words]),jt=d.useMemo(()=>le.filter(k=>k.meaning),[le]),Pt=jt.length>0;d.useEffect(()=>{H(!1),$(null),Z(0),j(!1),A(null)},[Ae]),d.useEffect(()=>{V&&(jt.some(k=>k.text===V.text)||$(null))},[jt,V]),d.useEffect(()=>{jt.length===0&&H(!1)},[jt.length]),d.useEffect(()=>{if(!Y.type)return;const k=M=>{M.key==="Escape"&&R({type:null})};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[Y.type]),d.useEffect(()=>{if(!l){U(!1),!Le&&!fe&&(j(!1),A(null));return}U(!0),l.levelCompleted&&(A("auto"),j(!0))},[l,Le,fe]),d.useEffect(()=>{Ze||(Le||fe?(A(k=>k??"manual"),j(!0)):(j(!1),A(null)))},[Le,Ze,fe]);const lt=d.useCallback(()=>{f||R({type:null})},[f]),Ia=d.useCallback(()=>{var k;if((k=t.current)!=null&&k.shuffleLetters){if(P===0){t.current.shuffleLetters(),Z(1),K(M=>M.shuffle?M:{...M,shuffle:!0}),y("shuffle");return}if(!S){R({type:"guest"});return}if(((v==null?void 0:v.coins)??0)<Ee){R({type:"insufficient"});return}R({type:"confirm"})}},[P,S,v==null?void 0:v.coins,Ee,y]),Ba=d.useCallback(async()=>{var k,M,z;if(!S||f){S||R({type:"guest"});return}_(!0);try{const ce=await st.purchaseShuffle(Ae),me=(k=ce==null?void 0:ce.data)==null?void 0:k.remainingCoins;typeof me=="number"&&Number.isFinite(me)&&C({coins:me}),Z(de=>de+1),K(de=>de.shuffle?de:{...de,shuffle:!0}),y("shuffle"),R({type:null}),(z=(M=t.current)==null?void 0:M.shuffleLetters)==null||z.call(M),D.success("     ")}catch(ce){D.error(ce.message||"     ")}finally{_(!1)}},[S,f,Ae,C,y]),Da=()=>{switch(Y.type){case"confirm":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"    "}),e.jsxs("p",{className:"text-sm text-white/70 leading-relaxed",children:["     ",X(Ee),"   .           ."]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch gap-4",children:e.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-yellow-500/20 border border-yellow-500/30 text-yellow-300",children:e.jsx(ke,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/50",children:" "}),e.jsxs("p",{className:"text-lg font-semibold text-white",children:[X((v==null?void 0:v.coins)??0)," "]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-white/60 text-sm",children:[e.jsx("span",{children:""}),e.jsx("span",{className:"font-semibold text-white",children:X(Ee)})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-end",children:[e.jsx("button",{type:"button",onClick:lt,disabled:f,className:"inline-flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 border border-white/15 text-white/80 hover:text-white px-4 py-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{children:""})}),e.jsxs("button",{type:"button",onClick:Ba,disabled:f,className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500 hover:from-cyan-400 hover:via-blue-400 hover:to-purple-400 text-white font-semibold px-5 py-2.5 rounded-xl shadow-[0_0_25px_rgba(59,130,246,0.4)] transition-all disabled:opacity-70 disabled:cursor-not-allowed",children:[f?e.jsx(Ie,{className:"w-4 h-4 animate-spin"}):e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"  "})]})]})]});case"insufficient":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"  !"}),e.jsxs("p",{className:"text-sm text-white/70 leading-relaxed",children:["     ",X(Ee),"       .         ."]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-end",children:[e.jsx("button",{type:"button",onClick:lt,className:"inline-flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 border border-white/15 text-white/80 hover:text-white px-4 py-2.5 rounded-xl transition-all",children:e.jsx("span",{children:""})}),e.jsxs(re,{to:"/store",onClick:lt,className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 hover:from-primary-400 hover:via-secondary-400 hover:to-primary-400 text-white font-semibold px-5 py-2.5 rounded-xl shadow-[0_0_25px_rgba(168,85,247,0.4)] transition-all",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"  "})]})]})]});case"guest":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"    "}),e.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:"    !                     ."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-end",children:[e.jsxs(re,{to:"/register",onClick:lt,className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 hover:from-primary-400 hover:via-secondary-400 hover:to-primary-400 text-white font-semibold px-5 py-2.5 rounded-xl shadow-[0_0_25px_rgba(168,85,247,0.4)] transition-all",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs(re,{to:"/login",onClick:lt,className:"inline-flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 border border-white/15 text-white/80 hover:text-white px-5 py-2.5 rounded-xl transition-all",children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})]});default:return null}},za=async()=>{if(!S){D.error("         !");return}if(((v==null?void 0:v.coins)??0)<50){D.error("     !");return}try{const k=await a();return K(M=>M.autoSolve?M:{...M,autoSolve:!0}),y("autoSolve"),k}catch(k){D.error(k.message||"   !")}},Wa=async(k,M)=>{var z,ce;if(!S){D.error("         !");return}if(De.has(k)){D("        ",{icon:""});return}yt(k);try{await pl(k,Ae),ye(me=>new Set([...me,k])),D.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsxs("span",{children:[' "',M,'"     !']})]}),{duration:3e3,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"}})}catch(me){const de=((ce=(z=me.response)==null?void 0:z.data)==null?void 0:ce.message)||me.message||"     ";D.error(de)}finally{yt(null)}},ws=()=>{U(!1),l!=null&&l.levelCompleted||u()},qa=d.useCallback(async()=>{if(!(Ze||Le||fe)){j(!1),A(null),u();return}const M=L;try{ae(!0),j(!1),A(null),await p(),u()}catch(z){D.error(z.message||"    !"),A(M),j(!0)}finally{ae(!1)}},[u,L,Ze,Le,fe,p]);if(o)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4 drop-shadow-[0_0_10px_rgba(168,85,247,0.5)]"}),e.jsx("p",{className:"text-white/60",children:"     ..."})]})});const Ha=S?(v==null?void 0:v.levelsCleared)??0:0,zt=i==null?void 0:i.status,ar=S&&Ha===0,Va=zt==="no_published_levels"||zt==="no_levels_for_new_user"||zt==="all_levels_completed"||!zt&&ar,Ga=c&&(i==null?void 0:i.guestCompleted);if(!s){if(c){const k=(i==null?void 0:i.status)==="guest_level_error";return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-12 max-w-lg",children:[e.jsx(xe,{className:"w-20 h-20 text-purple-400 mx-auto mb-4 drop-shadow-[0_0_20px_rgba(168,85,247,0.6)]"}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent mb-4",children:k?"!    ":"   !"}),e.jsx("p",{className:"text-white/60 text-lg",children:k?"       .         .":"      .         !"})]})})}return ar&&Va?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-12",children:[e.jsx(xe,{className:"w-20 h-20 text-purple-400 mx-auto mb-4 drop-shadow-[0_0_20px_rgba(168,85,247,0.6)]"}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent mb-4",children:"   !  ! "}),e.jsx("p",{className:"text-white/60 text-lg",children:"          ."})]})}):e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-12",children:[e.jsx(Ue,{className:"w-20 h-20 text-purple-400 mx-auto mb-4 drop-shadow-[0_0_20px_rgba(168,85,247,0.6)]"}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent mb-4",children:"!  ! "}),e.jsx("p",{className:"text-white/60 text-lg mb-6",children:"    ! !"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 space-x-reverse bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent",children:[e.jsx(xe,{className:"w-6 h-6 text-cyan-400 drop-shadow-[0_0_10px_rgba(6,182,212,0.5)]"}),e.jsx("span",{className:"text-xl font-semibold",children:" ! "}),e.jsx(xe,{className:"w-6 h-6 text-cyan-400 drop-shadow-[0_0_10px_rgba(6,182,212,0.5)]"})]})]})})}const nr=r.completedWords.length,ir=s.words.length,Ka=nr/ir*100;return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[c&&e.jsx(E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8 bg-gradient-to-r from-purple-500/10 via-pink-500/10 to-cyan-500/10 border border-purple-500/30 rounded-2xl p-6 backdrop-blur-lg shadow-[0_0_30px_rgba(168,85,247,0.25)]",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/20 border border-purple-500/40",children:e.jsx(bt,{className:"w-6 h-6 text-purple-300"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"   !"}),e.jsx("p",{className:"text-white/70 text-sm md:text-base",children:"                 ."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(re,{to:"/register",className:"flex items-center justify-center space-x-2 space-x-reverse bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-400 hover:to-secondary-400 text-white font-semibold py-2.5 px-6 rounded-xl shadow-[0_0_20px_rgba(168,85,247,0.45)] hover:shadow-[0_0_30px_rgba(168,85,247,0.6)] transition-all",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]}),e.jsxs(re,{to:"/login",className:"flex items-center justify-center space-x-2 space-x-reverse bg-glass hover:bg-glass-hover border border-glass-border text-white font-semibold py-2.5 px-6 rounded-xl transition-all",children:[e.jsx(Cs,{className:"w-5 h-5"}),e.jsx("span",{children:""})]})]})]})}),e.jsx(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent mb-2",children:[" ",s.order]}),c&&e.jsxs("span",{className:"inline-flex items-center space-x-2 space-x-reverse text-xs font-semibold text-white/80 bg-purple-500/30 border border-purple-500/40 rounded-full px-3 py-1 mb-3",children:[e.jsx(xe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:" "})]}),e.jsxs("p",{className:"text-white/60 mb-4",children:[": ",s.letters]}),e.jsx("div",{className:"flex items-center space-x-4 space-x-reverse mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[nr,"/",ir," "]})]}),e.jsx("div",{className:"w-full bg-glass-hover rounded-full h-2",children:e.jsx(E.div,{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-cyan-500 h-2 rounded-full shadow-[0_0_15px_rgba(168,85,247,0.5)]",initial:{width:0},animate:{width:`${Ka}%`},transition:{duration:.5}})})]})})]}),c?e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-purple-500/15 to-cyan-500/15 border border-purple-500/30 rounded-lg px-4 py-4 text-center shadow-[0_0_20px_rgba(168,85,247,0.25)]",children:[e.jsx("p",{className:"text-white/80 font-semibold mb-2",children:"     "}),e.jsx("p",{className:"text-white/60 text-sm",children:"          ."})]})}):e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 to-pink-500/20 backdrop-blur-sm rounded-lg px-4 py-3 text-center border border-yellow-500/30 shadow-[0_0_15px_rgba(217,70,239,0.3)]",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 space-x-reverse text-yellow-400 mb-1",children:[e.jsx(ke,{className:"w-5 h-5 drop-shadow-[0_0_8px_rgba(250,204,21,0.5)]"}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-yellow-400 to-pink-400 bg-clip-text text-transparent",children:(v==null?void 0:v.coins)||0})]}),e.jsx("p",{className:"text-white/60 text-sm",children:""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-cyan-500/20 backdrop-blur-sm rounded-lg px-4 py-3 text-center border border-purple-500/30 shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 space-x-reverse text-purple-400 mb-1",children:[e.jsx(Ue,{className:"w-5 h-5 drop-shadow-[0_0_8px_rgba(168,85,247,0.5)]"}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-cyan-400 bg-clip-text text-transparent",children:(v==null?void 0:v.totalScore)||0})]}),e.jsx("p",{className:"text-white/60 text-sm",children:""})]})]})]})})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-glass/30 backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:[e.jsx(hl,{ref:t}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{type:"button",onClick:Ia,disabled:f,"aria-busy":f,className:"bg-gradient-to-r from-cyan-500/20 to-blue-500/20 hover:from-cyan-500/30 hover:to-blue-500/30 disabled:hover:from-cyan-500/20 disabled:hover:to-blue-500/20 border border-cyan-500/30 text-white font-medium py-3 px-6 rounded-lg transition-all shadow-[0_0_15px_rgba(6,182,212,0.3)] hover:shadow-[0_0_25px_rgba(6,182,212,0.5)] disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center space-x-2 space-x-reverse",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"  ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Or,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})})}),e.jsxs("p",{className:"mt-3 text-xs text-white/50 text-center",children:["         ",X(Ee),"   ."]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:[e.jsx("div",{className:"mb-4 h-px bg-gradient-to-r from-transparent via-purple-400/40 to-transparent"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-white/70",children:"  "}),e.jsx("span",{className:"text-xs text-white/50",children:"     "})]}),rr.length===0?e.jsx("div",{className:"text-center text-xs text-white/40 bg-white/5 border border-white/10 rounded-lg py-3",children:"      ."}):e.jsx("div",{className:"space-y-5",children:rr.map(({length:k,words:M})=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-xs font-medium text-white/80",children:[" ",k," "]}),e.jsxs("span",{className:"text-[11px] text-white/40",children:[M.length," "]})]}),e.jsx("div",{className:"space-y-3",children:M.map((z,ce)=>{const me=je.has(z),de=z.split("");return e.jsx("div",{className:"flex justify-center gap-2",dir:"ltr",children:de.map((Xe,Pe)=>e.jsx("div",{className:`w-10 h-10 rounded-lg border flex items-center justify-center text-lg font-bold tracking-wide uppercase transition-all ${me?"border-purple-400/70 bg-gradient-to-br from-purple-500/40 via-pink-500/40 to-cyan-500/40 text-white shadow-[0_0_12px_rgba(168,85,247,0.35)]":"border-white/15 bg-white/5 text-transparent"}`,children:me?Xe:""},`${z}-${Pe}`))},`${z}-${ce}`)})})]},k))})]})]}),e.jsxs(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:[e.jsx("h3",{className:"font-semibold mb-4 bg-gradient-to-r from-purple-400 to-cyan-400 bg-clip-text text-transparent",children:" "}),c?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 w-12 h-12 rounded-full bg-purple-500/20 border border-purple-500/40 flex items-center justify-center",children:e.jsx(bt,{className:"w-6 h-6 text-purple-300"})}),e.jsx("p",{className:"text-white/70 mb-4 text-sm",children:"              ."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(re,{to:"/register",className:"bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-400 hover:to-secondary-400 text-white font-semibold py-2.5 px-4 rounded-lg transition-all",children:"    "}),e.jsx(re,{to:"/login",className:"bg-glass hover:bg-glass-hover border border-glass-border text-white font-semibold py-2.5 px-4 rounded-lg transition-all",children:"   "})]})]}):e.jsxs("button",{onClick:za,disabled:n||((v==null?void 0:v.coins)??0)<50,className:"w-full bg-gradient-to-r from-purple-500/20 to-cyan-500/20 hover:from-purple-500/30 hover:to-cyan-500/30 disabled:opacity-50 disabled:cursor-not-allowed border border-purple-500/30 text-white py-3 px-4 rounded-lg transition-all shadow-[0_0_15px_rgba(168,85,247,0.2)] hover:shadow-[0_0_25px_rgba(168,85,247,0.4)] flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-2 space-x-reverse text-right",children:[e.jsx(xe,{className:"mt-0.5 w-5 h-5 text-purple-300 drop-shadow-[0_0_8px_rgba(168,85,247,0.5)]"}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("span",{className:"block text-sm font-semibold text-white",children:"  "}),e.jsx("span",{className:"block text-[11px] text-white/70",children:"           "})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse text-yellow-400",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"50"})]})]})]}),e.jsxs(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:[e.jsx("h3",{className:"font-semibold mb-4 bg-gradient-to-r from-purple-400 to-cyan-400 bg-clip-text text-transparent",children:"   "}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-1",children:le.length>0?le.map((k,M)=>{const z=!!k.meaning,ce=(V==null?void 0:V.text)===k.text,me=De.has(k._id),de=Je===k._id;return e.jsx(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:M*.1},className:"w-full",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{z&&($(k),H(!0))},disabled:!z,title:z?`: ${k.meaning}`:void 0,className:`flex-1 flex items-center justify-between rounded-lg px-3 py-2 border text-success transition-colors ${ce?"bg-primary-500/20 border-primary-400/60":"bg-success/20 border-success/30"} ${z?"cursor-pointer hover:bg-primary-500/10 hover:border-primary-400/60 focus:outline-none focus:ring-2 focus:ring-primary-400/40":"cursor-default focus:outline-none opacity-80"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("span",{className:"text-success font-medium",children:k.text}),z&&e.jsxs("span",{className:"flex items-center space-x-1 space-x-reverse text-primary-200 text-xs bg-primary-500/10 border border-primary-500/20 rounded-md px-2 py-0.5",children:[e.jsx(Ss,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]}),e.jsx(ut,{className:`w-4 h-4 ${ce?"text-primary-200 drop-shadow-[0_0_6px_rgba(168,85,247,0.6)]":"text-success"}`})]}),S&&e.jsx("button",{type:"button",onClick:()=>Wa(k._id,k.text),disabled:de||me,title:me?"  ":"   ",className:`flex-shrink-0 p-2 rounded-lg border transition-all ${me?"bg-purple-500/30 border-purple-400/50 text-purple-200":"bg-purple-500/10 border-purple-500/30 text-purple-300 hover:bg-purple-500/20 hover:border-purple-400/50 active:scale-95"} disabled:opacity-50 disabled:cursor-not-allowed`,children:de?e.jsx(Ie,{className:"w-4 h-4 animate-spin"}):me?e.jsx(_a,{className:"w-4 h-4"}):e.jsx(He,{className:"w-4 h-4"})})]})},k.text)}):e.jsx("div",{className:"text-center text-white/40 py-8",children:"   "})}),e.jsx(ve,{children:(V==null?void 0:V.meaning)&&e.jsx(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.25},className:"mt-4 bg-primary-500/10 border border-primary-400/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-500/20 border border-primary-400/40",children:e.jsx(Ss,{className:"w-5 h-5 text-primary-200"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm text-white/70 mb-1",children:[" ",V.text]}),e.jsx("div",{className:"text-primary-100 font-semibold text-lg leading-relaxed",children:V.meaning})]}),e.jsx("button",{type:"button",onClick:()=>$(null),className:"text-xs text-white/50 hover:text-white transition-colors",children:""})]})},`meaning-${V.text}`)}),e.jsxs("div",{className:"mt-5 pt-4 border-t border-white/10",children:[e.jsxs("button",{type:"button",onClick:()=>H(k=>!k),disabled:!Pt,className:`w-full inline-flex items-center justify-between rounded-lg px-4 py-2 transition-colors ${Pt?"bg-white/5 hover:bg-white/10 border border-white/10 text-white focus:outline-none focus:ring-2 focus:ring-primary-400/50":"bg-white/5 border border-white/10 text-white/40 cursor-not-allowed focus:outline-none"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Ss,{className:"w-4 h-4 text-primary-200"}),e.jsx("span",{className:"font-medium",children:" "})]}),F&&Pt?e.jsx(qo,{className:"w-4 h-4 text-white/70"}):e.jsx(Wo,{className:"w-4 h-4 text-white/70"})]}),e.jsx(ve,{initial:!1,children:F&&Pt&&e.jsx(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-3 space-y-2 overflow-hidden",children:jt.map(k=>{const M=(V==null?void 0:V.text)===k.text;return e.jsxs("div",{className:`flex items-start space-x-3 space-x-reverse rounded-xl border px-3 py-2 ${M?"border-primary-400/60 bg-primary-500/15":"border-white/10 bg-white/5"}`,children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-500/20 border border-primary-400/30",children:e.jsx(He,{className:"w-4 h-4 text-primary-200"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:k.text}),e.jsx("p",{className:"text-white/80 text-sm leading-relaxed mt-1",children:k.meaning})]})]},k.text)})},"meanings-list")}),!Pt&&e.jsx("p",{className:"text-white/40 text-xs text-center mt-3",children:"       ."})]})]})]})]}),e.jsx(ve,{children:Dt&&e.jsx(E.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:-30},transition:{type:"spring",stiffness:220,damping:24},className:"fixed top-6 left-6 z-[65] max-w-sm",children:e.jsx("div",{className:"bg-gradient-to-br from-emerald-500/20 via-purple-500/30 to-cyan-500/20 border border-white/15 backdrop-blur-md rounded-2xl p-5 shadow-[0_20px_60px_rgba(76,29,149,0.45)] text-right",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-2 rounded-xl bg-white/10 border border-white/20 ${Ma}`,children:e.jsx(Ra,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[L&&e.jsxs("span",{className:`inline-flex items-center justify-center gap-1 rounded-full border px-3 py-1 text-[11px] font-semibold tracking-tight ${Ua}`,children:[e.jsx(ut,{className:"w-3.5 h-3.5"}),Ta]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-white/90",children:Oa}),ot!==null&&e.jsx("div",{className:"flex items-center gap-1 text-amber-300",children:Fa}),e.jsx("p",{className:"text-xs text-white/70 leading-relaxed",children:$a}),(tr||sr)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1 text-[11px] text-white/70",children:[tr&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-400/40 bg-amber-500/10 px-2.5 py-0.5 text-amber-100",children:[e.jsx(Or,{className:"w-3.5 h-3.5"})," "]}),sr&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-primary-400/40 bg-primary-500/10 px-2.5 py-0.5 text-primary-100",children:[e.jsx(xe,{className:"w-3.5 h-3.5"})," "]})]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 pt-1",children:e.jsxs("button",{type:"button",onClick:qa,disabled:G,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-400 hover:to-secondary-400 text-white text-sm font-semibold transition-all disabled:opacity-70",children:[G?e.jsx(Ie,{className:"w-4 h-4 animate-spin"}):e.jsx(ht,{className:"w-4 h-4"}),e.jsx("span",{children:"   "})]})})]})]})})},"auto-solve-banner")}),e.jsx(ve,{children:se&&pe&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 backdrop-blur-sm px-4 py-6",onClick:ue,children:e.jsxs(E.div,{initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:260,damping:24},className:"relative w-full max-w-3xl overflow-hidden rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950/95 via-purple-950/90 to-slate-950/95 px-6 py-7 text-right shadow-[0_45px_140px_rgba(14,10,45,0.65)] sm:px-10 sm:py-10",onClick:k=>k.stopPropagation(),children:[e.jsx("div",{className:"pointer-events-none absolute -top-24 -left-24 h-72 w-72 rounded-full bg-primary-500/20 blur-3xl"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-28 -right-20 h-80 w-80 rounded-full bg-secondary-500/20 blur-3xl"}),e.jsx("button",{type:"button",onClick:ue,className:"absolute top-5 left-5 inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/10 bg-white/5 text-white/70 transition-colors hover:bg-white/10 hover:text-white","aria-label":"",children:e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative flex flex-col gap-8",children:[e.jsx("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[e.jsx("div",{className:"relative flex h-16 w-16 items-center justify-center rounded-2xl border border-white/15 bg-gradient-to-br from-primary-500/30 via-purple-500/25 to-cyan-500/30 text-white shadow-[0_25px_60px_rgba(88,28,135,0.45)] sm:h-20 sm:w-20",children:e.jsx(sl,{className:"h-8 w-8 drop-shadow-[0_0_18px_rgba(255,255,255,0.45)] sm:h-10 sm:w-10"})}),e.jsxs("div",{className:"space-y-3 text-right",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/10 px-3 py-1 text-[11px] font-semibold tracking-tight text-white/80 sm:text-xs",children:[e.jsx(xe,{className:"h-3.5 w-3.5 text-primary-200"}),e.jsx("span",{children:pe.badge})]}),e.jsx("h2",{className:"text-2xl font-black leading-snug text-white drop-shadow-[0_10px_30px_rgba(15,23,42,0.35)] sm:text-3xl",children:pe.title}),e.jsx("p",{className:"max-w-xl text-sm leading-relaxed text-white/70 sm:text-base",children:pe.description})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-white/10 bg-white/5 p-5 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(es,{className:"h-5 w-5 text-primary-200"}),e.jsx("span",{className:"text-sm font-semibold sm:text-base",children:pe.orderLabel})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-xs text-white/60 sm:text-sm",children:[e.jsx(xe,{className:"h-4 w-4 text-amber-300"}),e.jsxs("span",{children:[it,"   "]})]})]}),e.jsx("p",{className:"text-xs leading-relaxed text-white/70 sm:text-sm",children:pe.spotlight})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-primary-500/30 bg-gradient-to-br from-primary-500/20 via-indigo-500/10 to-cyan-500/20 p-5 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(xe,{className:"h-5 w-5 text-primary-100"}),e.jsx("span",{className:"text-sm font-semibold sm:text-base",children:"   "})]}),e.jsx("p",{className:"text-xs leading-relaxed text-white/80 sm:text-sm",children:pe.progressSummary}),c&&e.jsxs(re,{to:"/register",className:"inline-flex items-center justify-center gap-2 rounded-xl border border-white/20 bg-white/10 px-4 py-2 text-xs font-semibold text-white/90 transition-all hover:bg-white/20 sm:text-sm",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"   "})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("p",{className:"text-xs leading-relaxed text-white/60 sm:text-sm",children:"             ."}),e.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:e.jsxs("button",{type:"button",onClick:ue,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 px-6 py-2.5 text-sm font-semibold text-white shadow-[0_20px_55px_rgba(99,102,241,0.45)] transition-all hover:from-primary-400 hover:to-secondary-400 hover:shadow-[0_25px_65px_rgba(99,102,241,0.55)] sm:text-base",children:[e.jsx("span",{children:" !"}),e.jsx(ht,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})]})]})},"new-levels-modal")}),e.jsx(ve,{children:Y.type&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/75 backdrop-blur-sm px-4",onClick:lt,children:e.jsxs(E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:260,damping:22},onClick:k=>k.stopPropagation(),className:"relative w-full max-w-lg bg-gradient-to-br from-slate-900/95 via-purple-900/90 to-slate-900/95 border border-white/10 rounded-3xl px-6 py-7 sm:px-8 shadow-[0_40px_140px_rgba(12,10,45,0.65)]",children:[e.jsx("button",{type:"button",onClick:lt,disabled:f,className:"absolute top-4 left-4 text-white/60 hover:text-white transition-colors disabled:opacity-50","aria-label":"",children:e.jsx(rt,{className:"w-5 h-5"})}),e.jsx("div",{className:"mt-2",children:Da()})]})},"shuffle-modal")}),e.jsx(ve,{children:h&&W&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm px-3 py-5 sm:px-4 sm:py-10",onClick:m,children:e.jsxs(E.div,{initial:{scale:.94,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.94,opacity:0},transition:{type:"spring",stiffness:260,damping:22},onClick:k=>k.stopPropagation(),className:"relative w-full max-w-sm sm:max-w-xl bg-slate-950/95 border border-white/10 rounded-2xl px-4 py-5 sm:px-7 sm:py-8 shadow-lg shadow-primary-900/30 text-right",children:[e.jsx("button",{type:"button",onClick:m,className:"absolute top-4 left-4 text-white/60 hover:text-white transition-colors","aria-label":"",children:e.jsx(rt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col gap-5 sm:gap-6",children:[e.jsxs("div",{className:"sm:hidden space-y-4 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 text-white",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-white/10 border border-white/15",children:e.jsx(es,{className:`w-6 h-6 ${(ie==null?void 0:ie.icon)??"text-primary-200"}`})}),e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsxs("div",{className:`inline-flex items-center justify-center gap-2 rounded-full border px-3 py-1 text-[10px] font-semibold ${ie?`mx-auto bg-gradient-to-r ${ie.chip} ${ie.chipText} ${ie.chipBorder}`:"mx-auto bg-white/10 border-white/20 text-primary-100"}`,children:[e.jsx(xe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:W.badge})]}),e.jsxs("div",{className:"space-y-1.5 text-white/80",children:[e.jsx("h3",{className:"text-base font-bold leading-snug",children:W.title}),e.jsx("p",{className:"text-xs leading-relaxed",children:W.description})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-white/80",children:[W.from!==null&&e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 px-3 py-2 text-[11px]",children:[e.jsx("p",{className:"text-white/60",children:" "}),e.jsx("p",{className:"text-sm font-semibold text-white",children:X(W.from)})]}),W.to!==null&&e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 px-3 py-2 text-[11px]",children:[e.jsx("p",{className:"text-white/60",children:" "}),e.jsx("p",{className:"text-sm font-semibold text-white",children:X(W.to)})]})]}),W.differenceSummary&&e.jsxs("div",{className:"mx-auto flex w-full items-center justify-center gap-2 rounded-xl bg-white/5 border border-white/10 px-3 py-2 text-[11px] text-white/70",children:[W.isForward?e.jsx(Is,{className:"w-4 h-4 text-emerald-200"}):e.jsx(Mr,{className:"w-4 h-4 text-cyan-200"}),e.jsx("span",{children:W.differenceSummary})]})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-row sm:items-start sm:gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"shrink-0 p-3 rounded-xl bg-white/10 border border-white/15",children:e.jsx(es,{className:`w-8 h-8 sm:w-9 sm:h-9 ${(ie==null?void 0:ie.icon)??"text-primary-200"}`})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[11px] font-semibold ${ie?`bg-gradient-to-r ${ie.chip} ${ie.chipText} ${ie.chipBorder}`:"bg-white/10 border-white/20 text-primary-100"}`,children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:W.badge})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white leading-snug",children:W.title}),e.jsx("p",{className:"text-sm sm:text-base text-white/75 leading-relaxed",children:W.description})]}),W.differenceSummary&&e.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-white/10 border border-white/20 px-2.5 py-1 text-[11px] text-white/70",children:[W.isForward?e.jsx(Is,{className:"w-4 h-4 text-emerald-200"}):e.jsx(Mr,{className:"w-4 h-4 text-cyan-200"}),e.jsx("span",{children:W.differenceSummary})]})]})]}),W.to!==null&&e.jsx("div",{className:"flex sm:block justify-end sm:justify-start",children:e.jsxs("div",{className:"rounded-xl bg-white/8 border border-white/15 px-4 py-3 text-center min-w-[120px]",children:[e.jsx("p",{className:"text-xs text-white/60",children:" "}),e.jsx("p",{className:"mt-1 text-2xl sm:text-3xl font-extrabold text-white",children:X(W.to)})]})})]}),(W.from!==null||W.to!==null||W.differenceLabel)&&e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-3 gap-3",children:[W.from!==null&&e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-right space-y-1",children:[e.jsx("p",{className:"text-xs text-white/60",children:" "}),e.jsx("p",{className:"text-lg font-semibold text-white",children:X(W.from)})]}),W.to!==null&&e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-right space-y-1",children:[e.jsx("p",{className:"text-xs text-white/60",children:" "}),e.jsx("p",{className:"text-lg font-semibold text-white",children:X(W.to)})]}),W.differenceLabel&&e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-right space-y-1",children:[e.jsx("p",{className:"text-xs text-white/60",children:" "}),e.jsx("p",{className:"text-base font-semibold text-white",children:W.differenceLabel})]})]}),W.userProgress&&e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-right space-y-1",children:[e.jsx("p",{className:"text-xs text-white/60",children:"  "}),e.jsx("p",{className:"text-lg font-semibold text-white",children:W.userProgress.currentLevel!=null?` ${X(W.userProgress.currentLevel)}`:""})]}),e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-right space-y-1",children:[e.jsx("p",{className:"text-xs text-white/60",children:" "}),e.jsx("p",{className:"text-lg font-semibold text-white",children:X(W.userProgress.levelsCleared??0)})]}),e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-right space-y-1",children:[e.jsx("p",{className:"text-xs text-white/60",children:" "}),e.jsx("p",{className:"text-lg font-semibold text-white",children:X(W.userProgress.totalScore??0)})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 text-xs text-white/70",children:[e.jsx("p",{className:"leading-relaxed text-white/70 text-center sm:text-right",children:W.type==="completed"?"     .    ":"   .   !"}),e.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 px-4 py-2 text-sm font-semibold text-white shadow-md transition-all hover:from-primary-400 hover:via-secondary-400 hover:to-primary-400",children:[e.jsx("span",{children:" "}),e.jsx(ht,{className:"w-4 h-4"})]})]})]})]})},"level-transition-overlay")}),e.jsx(ve,{children:O&&l&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/70 backdrop-blur-sm px-4",onClick:ws,children:e.jsxs(E.div,{initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:260,damping:22},onClick:k=>k.stopPropagation(),className:"relative w-full max-w-sm rounded-3xl bg-slate-900/95 border border-white/10 px-6 py-8 text-center text-white shadow-[0_40px_120px_rgba(12,10,45,0.6)]",children:[e.jsx("button",{type:"button",onClick:ws,className:"absolute top-4 left-4 text-white/60 hover:text-white transition-colors","aria-label":"",children:e.jsx(rt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-primary-500/20 border border-primary-400/30 text-primary-100",children:e.jsx(xe,{className:"w-7 h-7"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:"   "}),e.jsx("p",{className:"text-sm text-white/70",children:"      ."})]}),typeof(l==null?void 0:l.starsEarned)=="number"&&e.jsxs("div",{className:"flex flex-col items-center gap-1 text-xs text-white/70",children:[e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:3}).map((k,M)=>{const z=M<(l.starsEarned??0);return e.jsx("span",{className:`text-lg ${z?"text-amber-300 drop-shadow-[0_0_10px_rgba(250,204,21,0.45)]":"text-white/20"}`,children:z?"":""},`auto-solve-star-${M}`)})}),e.jsx("span",{children:l.starsEarned===3?" ! ! ":l.starsEarned===2?"       ":"         "})]}),((lr=l==null?void 0:l.word)==null?void 0:lr.text)&&e.jsxs("div",{className:"w-full rounded-2xl border border-primary-400/30 bg-primary-500/10 p-4",children:[e.jsx("p",{className:"text-xs text-primary-200 mb-2",children:" "}),e.jsx("p",{className:"text-2xl font-extrabold tracking-wide",dir:"ltr",children:l.word.text})]}),e.jsxs("button",{type:"button",onClick:ws,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-primary-500 px-5 py-2.5 text-sm font-semibold text-white hover:bg-primary-400 transition-colors",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})]})},"auto-solve-modal")}),e.jsx(ve,{children:Ga&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm px-4",children:e.jsx(E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:260,damping:20},className:"max-w-2xl w-full bg-gradient-to-br from-purple-900/90 via-wood-900/95 to-cyan-900/80 border border-purple-400/40 rounded-3xl p-8 text-center shadow-[0_40px_120px_rgba(17,12,28,0.65)]",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(xe,{className:"w-14 h-14 text-cyan-300 drop-shadow-[0_0_30px_rgba(6,182,212,0.6)]"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-purple-300 via-pink-300 to-cyan-300 bg-clip-text text-transparent",children:"!  !    !"}),e.jsx("p",{className:"text-white/80 text-lg max-w-xl",children:"   !                ."}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4 w-full text-left",children:["   ","      ","   "].map(k=>e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse bg-white/5 border border-white/10 rounded-2xl px-4 py-3",children:[e.jsx(ut,{className:"w-5 h-5 text-emerald-300"}),e.jsx("span",{className:"text-white/90 text-sm font-medium",children:k})]},k))}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 pt-4 w-full",children:[e.jsxs(re,{to:"/register",className:"flex items-center justify-center space-x-3 space-x-reverse bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 hover:from-primary-400 hover:via-secondary-400 hover:to-primary-400 text-white font-semibold py-3 px-8 rounded-xl shadow-[0_0_30px_rgba(168,85,247,0.6)] transition-all w-full md:w-auto",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{children:"   "}),e.jsx(ht,{className:"w-4 h-4"})]}),e.jsxs(re,{to:"/login",className:"flex items-center justify-center space-x-3 space-x-reverse bg-white/10 hover:bg-white/20 border border-white/20 text-white font-semibold py-3 px-8 rounded-xl transition-all w-full md:w-auto",children:[e.jsx(Cs,{className:"w-5 h-5"}),e.jsx("span",{children:"  "})]})]})]})})},"guest-complete")})]})},Nl=[{id:"all",label:""},{id:"completed",label:" "},{id:"locked",label:" "}],Fr={completed:{label:" ",icon:Ca,iconClass:"text-emerald-300 drop-shadow-[0_0_12px_rgba(16,185,129,0.6)]",chipClass:"bg-emerald-500/15 text-emerald-100 border border-emerald-400/40",cardClass:"from-emerald-500/10 to-emerald-400/5 border-emerald-400/50 shadow-[0_0_25px_rgba(16,185,129,0.25)]"},available:{label:" ",icon:cl,iconClass:"text-secondary-200 drop-shadow-[0_0_12px_rgba(192,132,252,0.55)]",chipClass:"bg-secondary-500/15 text-secondary-100 border border-secondary-400/40",cardClass:"from-secondary-500/10 to-primary-500/5 border-secondary-400/40 shadow-[0_0_25px_rgba(168,85,247,0.25)]"},locked:{label:"",icon:bt,iconClass:"text-white/35",chipClass:"bg-white/10 text-white/60 border border-white/15",cardClass:"from-white/10 to-white/5 border-white/10"}},kl=()=>{var Z,Y,R;const t=_t(),s=cs(),{user:r,updateUser:a}=Se(),[n,o]=d.useState("all"),i=d.useRef(!1),c=d.useRef(null),h=d.useMemo(()=>new Intl.NumberFormat("fa-IR"),[]),m=d.useCallback(f=>{if(f==null)return"";const _=Number(f);return Number.isNaN(_)?"":h.format(_)},[h]),{data:l,isLoading:u}=Ve(["gameLevels"],()=>st.getLevels(),{staleTime:60*1e3,onError:f=>{D.error(f.message||"     ")}}),w=((Z=l==null?void 0:l.data)==null?void 0:Z.levels)??[],p=((Y=l==null?void 0:l.data)==null?void 0:Y.stats)??{},x=((R=l==null?void 0:l.data)==null?void 0:R.unlockCost)??70,g=p.totalStars??w.filter(f=>f.isCompleted).reduce((f,_)=>f+(_.stars||0),0),y=p.maxStars??w.length*3,v=d.useMemo(()=>{const f=p.progressPercentage??null;if(f!=null)return Math.min(100,Math.max(0,f));const _=w.length;if(_===0)return 0;const O=w.filter(U=>U.isCompleted).length;return Math.round(O/_*100)},[w,p.progressPercentage]),S=d.useMemo(()=>{switch(n){case"completed":return w.filter(f=>f.status==="completed");case"locked":return w.filter(f=>f.status==="locked");default:return w}},[n,w]);d.useEffect(()=>{if(u||i.current)return;const f=w.find(_=>_.isCurrent);if(f){const _=document.getElementById(`level-card-${f.id}`);_&&(_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),i.current=!0)}},[u,w]);const C=d.useCallback((f=0)=>e.jsx("div",{className:"flex items-center space-x-1 space-x-reverse",children:Array.from({length:3}).map((_,O)=>e.jsx(Nt,{className:`w-4 h-4 drop-shadow-[0_0_10px_rgba(250,204,21,0.35)] ${O<f?"text-amber-300 fill-amber-300":"text-white/25"}`},O))}),[]),F=Ot(f=>st.unlockLevel(f),{onSuccess:f=>{var O,U;D.success("   !   "),((O=f==null?void 0:f.data)==null?void 0:O.coins)!==void 0&&a({coins:f.data.coins,currentLevel:f.data.currentLevel}),s.invalidateQueries(["gameLevels"]),r!=null&&r.id&&s.invalidateQueries(["nextLevel",r.id]);const _=(U=f==null?void 0:f.data)==null?void 0:U.levelId;_&&t(`/game?levelId=${_}`)},onError:f=>{D.error(f.message||"      ")}}),H=d.useCallback(f=>{if(!(f!=null&&f.id)||!f.canUnlock){D.error("          ");return}if(((r==null?void 0:r.coins)??0)<x){D.error("  !      ");return}F.mutate(f.id)},[F,x,r==null?void 0:r.coins]),V=d.useCallback(f=>{if(f!=null&&f.id){if(f.isCompleted||f.status==="completed"){D.success("     ! ");return}if(f.status==="locked"){H(f);return}t(`/game?levelId=${f.id}`)}},[H,t]),$=f=>{const _=Fr[f.status]??Fr.locked,O=f.status==="available"&&f.isCurrent?xe:_.icon,U=f.isCurrent?"ring-2 ring-secondary-300/70 shadow-[0_0_30px_rgba(192,132,252,0.45)]":"",J=f.status==="completed"?"ring-2 ring-emerald-300/30 shadow-[0_0_35px_rgba(16,185,129,0.35)]":"";return e.jsxs(E.div,{layout:!0,id:`level-card-${f.id}`,initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.25},whileHover:{scale:1.015},className:`relative overflow-hidden rounded-3xl border backdrop-blur-xl px-5 py-6 min-h-[220px] flex flex-col justify-between transition-all duration-300 ${U||""} ${J} bg-gradient-to-br ${_.cardClass}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-white/80",children:[e.jsx(el,{className:"w-4 h-4 text-secondary-200"}),e.jsxs("span",{className:"text-sm font-medium",children:[" ",m(f.order)]})]}),e.jsx("span",{className:`text-xs font-semibold px-3 py-1 rounded-full ${_.chipClass}`,children:f.isCurrent?" ":_.label})]}),e.jsxs("div",{className:"flex flex-col items-center text-center mt-6 space-y-3",children:[e.jsx(O,{className:`w-12 h-12 ${_.iconClass}`}),e.jsx("p",{className:"text-xl font-black tracking-[0.4em] text-white/90 uppercase",children:f.letters||""})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-white/70",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[C(f.stars),e.jsxs("span",{className:"font-semibold text-white/80",children:[m(f.completionPercentage),""]})]}),e.jsxs("span",{children:[m(f.completedWords)," / ",m(f.totalWords)," "]})]}),e.jsx("div",{className:"flex flex-col space-y-2",children:f.status==="completed"?e.jsxs("button",{type:"button",disabled:!0,className:"flex items-center justify-center space-x-2 space-x-reverse rounded-2xl border border-emerald-400/40 bg-emerald-500/20 px-4 py-2 text-sm font-bold text-emerald-100 opacity-90 cursor-not-allowed",children:[e.jsx(Ca,{className:"w-4 h-4"}),e.jsx("span",{children:"  "})]}):f.status!=="locked"?e.jsxs("button",{type:"button",onClick:()=>V(f),className:"flex items-center justify-center space-x-2 space-x-reverse rounded-2xl bg-gradient-to-r from-secondary-500 to-primary-500 px-4 py-2 text-sm font-bold text-white shadow-[0_15px_35px_rgba(168,85,247,0.25)] transition-all hover:shadow-[0_18px_45px_rgba(168,85,247,0.4)]",children:[e.jsx(Qs,{className:"w-4 h-4"}),e.jsx("span",{children:" "})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>H(f),disabled:!f.canUnlock||F.isLoading,className:`flex items-center justify-center space-x-2 space-x-reverse rounded-2xl px-4 py-2 text-sm font-bold transition-all ${f.canUnlock?"bg-gradient-to-r from-amber-500 to-amber-400 text-white shadow-[0_15px_35px_rgba(251,191,36,0.25)] hover:shadow-[0_18px_45px_rgba(251,191,36,0.35)]":"bg-white/5 text-white/40 cursor-not-allowed"} ${F.isLoading?"opacity-70":""}`,children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsxs("span",{children:["  ",m(x),""]})]}),!f.canUnlock&&e.jsx("p",{className:"text-xs text-white/55 text-center",children:"     .     ! "})]})})]})]},f.id)},P=()=>e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((f,_)=>e.jsx("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-6 backdrop-blur-xl animate-pulse h-[220px]"},_))});return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-gradient-to-br from-primary-900/60 via-secondary-900/50 to-wood-900/60 p-6 sm:p-8 shadow-[0_25px_80px_rgba(168,85,247,0.25)]",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(168,85,247,0.35)_0%,_rgba(30,30,60,0.2)_55%,_rgba(9,9,26,0.9)_100%)]"}),e.jsx("div",{className:"relative z-10 space-y-6",children:e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse text-white/80",children:[e.jsx(xe,{className:"w-6 h-6 text-secondary-200"}),e.jsx("h1",{className:"text-2xl font-black tracking-tight text-white",children:"  "})]}),e.jsx("p",{className:"text-white/70 max-w-3xl leading-relaxed",children:"             .            ! "})]}),e.jsxs("div",{className:"flex flex-col items-start space-y-2 rounded-2xl border border-white/10 bg-white/5 px-6 py-4 backdrop-blur-xl text-white/80",children:[e.jsx("span",{className:"text-sm",children:" "}),e.jsxs("p",{className:"text-2xl font-black text-white",children:[m(p.completedLevels??0),"/",m(p.totalLevels??w.length),"   ",m(g),"   ",m(y)]}),e.jsx("div",{className:"w-full h-2.5 rounded-full bg-white/10 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-secondary-400 via-primary-400 to-accent-400 shadow-[0_0_20px_rgba(168,85,247,0.45)]",style:{width:`${v}%`}})}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse text-xs text-white/60",children:[e.jsxs("span",{children:[": ",m(p.lockedLevels??w.filter(f=>f.status==="locked").length)]}),e.jsxs("span",{children:[" : ",m(p.availableLevels??w.filter(f=>f.status!=="locked").length)]})]})]})]})})]}),e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 shadow-[0_25px_80px_rgba(15,23,42,0.35)] backdrop-blur-xl",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse text-white/70",children:[e.jsx(Go,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:" "})]}),e.jsx("div",{className:"flex items-center gap-2",children:Nl.map(({id:f,label:_})=>{const O=n===f;return e.jsx("button",{type:"button",onClick:()=>o(f),className:`rounded-full px-4 py-2 text-sm font-semibold transition-all ${O?"bg-gradient-to-r from-secondary-500 to-primary-500 text-white shadow-[0_10px_30px_rgba(168,85,247,0.3)]":"bg-white/5 text-white/60 hover:text-white hover:bg-white/10"}`,children:_},f)})})]}),e.jsx("div",{ref:c,className:"mt-8",children:u?P():S.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-3xl border border-dashed border-white/15 bg-white/5 py-16 text-center text-white/60",children:[e.jsx(bt,{className:"mb-4 h-10 w-10 text-white/40"}),e.jsx("p",{className:"text-lg font-semibold",children:"      ."}),e.jsx("p",{className:"mt-2 text-sm",children:"        !"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:e.jsx(ve,{mode:"popLayout",children:S.map($)})})})]})]})},Sl="https://game.king-ofiq.ir/api",dt=At.create({baseURL:Sl,headers:{"Content-Type":"application/json"}});dt.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));dt.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(t)});const ls={async getCoinPacks(){var t,s;try{return(await dt.get("/store/packs")).data}catch(r){throw new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to get coin packs")}},async mockPurchase(t){var s,r;try{return(await dt.post("/store/purchase",{packId:t})).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Purchase failed")}},async requestPayment(t){var s,r;try{return(await dt.post("/payment/request",{packId:t})).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"    ")}},async verifyPayment({authority:t,status:s}){var r,a;try{return(await dt.get("/payment/verify",{params:{Authority:t,Status:s}})).data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"   ")}},async getPurchaseHistory(t=1,s=10){var r,a;try{return(await dt.get(`/store/purchases?page=${t}&limit=${s}`)).data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to get purchase history")}}},Be=t=>{if(t==null||t==="")return"";const s=Number(t);return Number.isFinite(s)?`${Math.round(s).toLocaleString("en-US")} `:""},Cl=()=>{var u,w;const{user:t,isAuthenticated:s}=Se(),[r,a]=d.useState(null),{data:n,isLoading:o}=Ve(["coinPacks"],()=>ls.getCoinPacks(),{staleTime:5*60*1e3}),i=Ot(({packId:p})=>ls.requestPayment(p),{onSuccess:p=>{var g;const x=((g=p==null?void 0:p.data)==null?void 0:g.paymentUrl)||(p==null?void 0:p.paymentUrl);x?(D.success("     ..."),window.location.href=x):D.error("   ")},onError:p=>{D.error(p.message||"     ")}}),c=p=>{a(p)},h=()=>{i.isLoading||a(null)},m=()=>{r&&i.mutate({packId:r._id})},l=p=>p.featured?e.jsx(as,{className:"w-6 h-6 text-primary-400"}):p.popular?e.jsx(Pa,{className:"w-6 h-6 text-secondary-400"}):(p.coins??0)>=500?e.jsx(Jo,{className:"w-6 h-6 text-primary-500"}):e.jsx(ke,{className:"w-6 h-6 text-accent-400"});return o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(ve,{children:r&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md px-3 sm:px-4 py-6",onClick:h,children:e.jsxs(E.div,{initial:{scale:.92,opacity:0,y:24},animate:{scale:1,opacity:1,y:0},exit:{scale:.92,opacity:0,y:24},transition:{type:"spring",stiffness:280,damping:24},className:"relative w-full max-w-sm sm:max-w-md md:max-w-lg mx-auto bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 border border-white/10 rounded-2xl shadow-2xl shadow-primary-900/20 overflow-hidden",onClick:p=>p.stopPropagation(),children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-br from-primary-500/15 via-transparent to-secondary-500/15"}),e.jsx("button",{onClick:h,disabled:i.isLoading,className:"absolute top-3 left-3 z-20 w-8 h-8 flex items-center justify-center rounded-full bg-white/5 hover:bg-white/10 text-white/70 hover:text-white transition disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"",children:e.jsx(rt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative flex flex-col",children:[e.jsxs("div",{className:"p-5 sm:p-6 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shadow-lg",children:e.jsx(pt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:" "}),e.jsx("p",{className:"text-xs text-white/60",children:"      "})]})]}),e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base font-semibold text-white",children:r.name}),r.featured&&e.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white",children:""}),r.popular&&!r.featured&&e.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full bg-secondary-500/20 text-secondary-200 border border-secondary-400/40",children:""})]}),r.description&&e.jsx("p",{className:"text-[11px] leading-relaxed text-white/60 mt-1 max-h-12 overflow-hidden",children:r.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-[11px] text-white/50",children:""}),e.jsx("span",{className:"text-base font-bold text-accent-300",children:Be(r.price)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-white/80",children:[e.jsxs("div",{className:"rounded-lg bg-black/40 border border-white/5 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ke,{className:"w-4 h-4 text-accent-300"}),e.jsx("span",{className:"text-[11px] text-white/60",children:" "})]}),e.jsx("div",{className:"text-sm font-bold text-white",children:(r.coins??0).toLocaleString()})]}),e.jsxs("div",{className:"rounded-lg bg-black/40 border border-white/5 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xe,{className:"w-4 h-4 text-green-300"}),e.jsx("span",{className:"text-[11px] text-white/60",children:" "})]}),e.jsx("div",{className:"text-sm font-bold text-white",children:(r.bonusCoins??0).toLocaleString()})]}),e.jsx("div",{className:"col-span-2 rounded-lg bg-gradient-to-r from-primary-500/20 to-secondary-500/20 border border-primary-500/30 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-[11px] text-white/70",children:"  "})]}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[(r.totalCoins??(r.coins??0)+(r.bonusCoins??0)).toLocaleString()," "]})]})})]})]})]}),e.jsxs("div",{className:"px-5 sm:px-6 py-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-white/60 bg-black/30 border border-white/5 rounded-xl px-3 py-2",children:[e.jsx("span",{children:"  "}),e.jsx("div",{className:"text-right text-sm font-semibold text-white",children:Be(r.price)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("button",{onClick:m,disabled:i.isLoading,className:"group relative overflow-hidden flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 py-3 text-sm font-bold text-white shadow-lg shadow-primary-500/30 transition-all duration-300 hover:shadow-primary-500/60 hover:scale-[1.01] active:scale-[0.99] disabled:from-slate-700 disabled:via-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full bg-gradient-to-r from-transparent via-white/25 to-transparent transition-transform duration-700"}),i.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"     ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"  "}),e.jsx(ht,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]}),e.jsx("button",{onClick:h,disabled:i.isLoading,className:"rounded-xl border border-white/10 bg-white/5 py-3 text-sm font-semibold text-white/80 transition hover:bg-white/10 hover:text-white disabled:opacity-60 disabled:cursor-not-allowed",children:""})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-xl border border-white/5 bg-black/30 px-3 py-2 text-[11px] text-white/60",children:[e.jsx(ut,{className:"w-3.5 h-3.5 text-emerald-300"}),e.jsx("span",{children:"       "})]})]})]})]})})}),e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[e.jsx(pt,{className:"w-10 h-10 text-primary-400"}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:" "})]}),e.jsx("p",{className:"text-xl text-white/80 max-w-2xl mx-auto",children:"            "})]}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:" "}),e.jsx("p",{className:"text-white/60",children:"  "})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-3xl font-bold text-accent-400 mb-1",children:[e.jsx(ke,{className:"w-8 h-8"}),e.jsx("span",{children:((u=t==null?void 0:t.coins)==null?void 0:u.toLocaleString())||0})]}),e.jsx("p",{className:"text-white/60 text-sm",children:""})]})]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-12",children:(w=n==null?void 0:n.data)==null?void 0:w.map((p,x)=>e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+x*.1},className:`group relative overflow-hidden rounded-3xl border backdrop-blur-xl bg-gradient-to-br from-glass via-glass to-glass/40 transition-all duration-300 ${p.featured?"border-primary-400/60 ring-2 ring-primary-400/40 shadow-xl shadow-primary-500/25":p.popular?"border-secondary-400/60 shadow-xl shadow-secondary-500/25":"border-white/10 shadow-lg shadow-accent-500/15"} p-5 sm:p-6 hover:-translate-y-1 hover:shadow-2xl hover:shadow-primary-500/30`,children:[e.jsx("span",{className:"pointer-events-none absolute -top-16 -left-16 h-32 w-32 rounded-full bg-primary-500/30 blur-3xl","aria-hidden":!0}),e.jsx("span",{className:"pointer-events-none absolute -bottom-20 -right-12 h-36 w-36 rounded-full bg-secondary-500/20 blur-3xl","aria-hidden":!0}),e.jsxs("div",{className:"relative flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[l(p),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:p.name}),p.description&&e.jsx("p",{className:"text-xs sm:text-sm text-white/60 leading-relaxed",children:p.description})]})]}),p.featured&&e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full border border-primary-400/40 bg-gradient-to-r from-primary-500/25 to-secondary-500/25 px-3 py-1 text-[11px] font-medium text-primary-200",children:""}),p.popular&&e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full border border-secondary-400/40 bg-gradient-to-r from-secondary-500/25 to-accent-500/25 px-3 py-1 text-[11px] font-medium text-secondary-200",children:""})]}),e.jsxs("div",{className:"relative rounded-2xl border border-white/5 bg-white/10 p-5 text-center shadow-inner shadow-black/5 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-primary-200",children:[e.jsx(ke,{className:"h-7 w-7 sm:h-8 sm:w-8 text-accent-300 drop-shadow"}),e.jsx("span",{className:"text-3xl font-black tracking-wide bg-gradient-to-r from-primary-300 via-accent-200 to-secondary-300 bg-clip-text text-transparent",children:(p.coins??0).toLocaleString()})]}),p.bonusCoins>0&&e.jsxs("div",{className:"flex items-center justify-center gap-1 text-emerald-300 text-xs sm:text-sm font-medium",children:[e.jsx(Zs,{className:"h-4 w-4"}),e.jsxs("span",{children:["+",p.bonusCoins,"  "]})]}),e.jsxs("div",{className:"mt-3 text-xs sm:text-sm text-white/60",children:[": ",(p.totalCoins??(p.coins??0)+(p.bonusCoins??0)).toLocaleString()," "]})]}),e.jsxs("div",{className:"relative mb-6 flex flex-col items-center gap-2 text-center",children:[e.jsx("span",{className:"rounded-full bg-white/5 px-4 py-1 text-xs font-medium text-white/70",children:"  "}),e.jsx("div",{className:"text-3xl font-extrabold text-white drop-shadow-sm",children:Be(p.price)}),e.jsx("div",{className:"h-px w-16 bg-gradient-to-r from-transparent via-white/30 to-transparent"})]}),e.jsxs("button",{onClick:()=>c(p),disabled:i.isLoading,className:"relative flex w-full items-center justify-center gap-2 overflow-hidden rounded-2xl bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 py-3 px-6 font-semibold text-white shadow-xl shadow-primary-500/40 transition-all duration-300 disabled:cursor-not-allowed disabled:opacity-70 sm:py-3.5",children:[e.jsx("span",{className:"absolute inset-0 opacity-0 transition-opacity duration-300 group-hover:opacity-20 bg-white","aria-hidden":!0}),i.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"  ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{className:"h-5 w-5"}),e.jsx("span",{className:"mr-2",children:""})]})]})]},p._id))}),e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-8",children:"      "}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xe,{className:"w-8 h-8 text-primary-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" "}),e.jsx("p",{className:"text-white/60",children:"       50   "})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ue,{className:"w-8 h-8 text-purple-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" "}),e.jsx("p",{className:"text-white/60",children:"          "})]})]})]}),s&&e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"mt-12",children:e.jsx(_l,{})})]})},_l=()=>{var r,a;const{data:t,isLoading:s}=Ve(["purchaseHistory"],()=>ls.getPurchaseHistory(),{enabled:!0});return s?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:" "}),((a=(r=t==null?void 0:t.data)==null?void 0:r.purchases)==null?void 0:a.length)>0?e.jsx("div",{className:"space-y-3",children:t.data.purchases.slice(0,5).map(n=>{var o,i;return e.jsxs("div",{className:"flex items-center justify-between bg-glass-hover rounded-lg p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:((o=n.packId)==null?void 0:o.name)||((i=n.packId)==null?void 0:i.title)||" "}),e.jsx("div",{className:"text-white/60 text-sm",children:new Date(n.createdAt).toLocaleString("fa-IR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"mt-1 text-xs",children:[e.jsx("span",{className:`px-2 py-1 rounded-full font-semibold ${n.status==="completed"?"bg-green-500/20 text-green-300":n.status==="pending"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:n.status==="completed"?"":n.status==="pending"?" ":""}),n.paymentMethod&&e.jsxs("span",{className:"ml-2 text-white/50",children:["(",n.paymentMethod==="zarinpal"?" ":n.paymentMethod,")"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-accent-400 font-medium",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsxs("span",{children:["+",n.amount]})]}),e.jsx("div",{className:"text-white/60 text-sm",children:Be(n.price)})]})]},n._id)})}):e.jsx("div",{className:"text-center text-white/40 py-8",children:"    "})]})},El=()=>{const t=gt(),s=_t(),r=cs(),{updateUser:a}=Se(),[n,o]=d.useState("loading"),[i,c]=d.useState("   ..."),[h,m]=d.useState(null),l=d.useRef(null),u=d.useMemo(()=>new URLSearchParams(t.search),[t.search]);d.useEffect(()=>{const x=u.get("Authority"),g=u.get("Status"),y=`${x??""}-${g??""}`;if(l.current===y)return;if(l.current=y,!x){o("failed"),c("   ."),m(null);return}if(g!=="OK"){o("failed"),c("    ."),m(null);return}(async()=>{var S,C;try{o("loading"),c("   ...");const F=await ls.verifyPayment({authority:x,status:g}),{success:H,message:V,data:$}=F||{};if(H){const P=($==null?void 0:$.coins)??($==null?void 0:$.coinsAwarded)??($==null?void 0:$.amount)??0,Z=($==null?void 0:$.newBalance)??((S=$==null?void 0:$.user)==null?void 0:S.coins),Y=($==null?void 0:$.refId)??($==null?void 0:$.transactionId),R=V||(P?`  ! ${Number(P).toLocaleString()}      .`:"    .");o("success"),c(R),m({coins:P,newBalance:Z,refId:Y}),typeof Z=="number"?a({coins:Z}):typeof((C=$==null?void 0:$.user)==null?void 0:C.coins)=="number"&&a({coins:$.user.coins}),r.invalidateQueries(["purchaseHistory"]),r.invalidateQueries(["coinPacks"])}else o("failed"),c(V||"   ."),m(null)}catch(F){o("failed"),c(F.message||"   "),m(null)}})()},[r,u,a]);const w=()=>n==="loading"?e.jsx(Ie,{className:"w-20 h-20 text-purple-300 animate-spin"}):n==="success"?e.jsx(ut,{className:"w-20 h-20 text-emerald-300 drop-shadow-[0_0_20px_rgba(110,231,183,0.6)]"}):e.jsx(ml,{className:"w-20 h-20 text-rose-300 drop-shadow-[0_0_20px_rgba(248,113,113,0.5)]"}),p=()=>n==="loading"?"         .":n==="success"?"    .       .":"           .";return e.jsx("div",{className:"relative",children:e.jsx("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-purple-900 via-purple-800 to-indigo-900 p-[1px] shadow-[0_25px_70px_rgba(76,29,149,0.45)]",children:e.jsxs("div",{className:"relative rounded-[calc(1.5rem-1px)] bg-gradient-to-br from-purple-950/95 via-purple-900/90 to-indigo-950/90 p-6 sm:p-10",children:[e.jsxs("div",{className:"absolute inset-0 opacity-40",children:[e.jsx("div",{className:"absolute -top-20 -left-24 h-56 w-56 rounded-full bg-fuchsia-500/40 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 -right-10 h-60 w-60 rounded-full bg-indigo-500/40 blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center space-y-5",children:[e.jsx("div",{className:"animate-fade-in",children:w()}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white drop-shadow-[0_10px_30px_rgba(168,85,247,0.35)]",children:n==="success"?"     ":n==="failed"?"  ":"   ..."}),e.jsx("p",{className:"text-white/80 text-base sm:text-lg leading-relaxed",children:i}),e.jsx("p",{className:"text-white/60 text-sm sm:text-base",children:p()})]}),n==="success"&&h&&e.jsxs("div",{className:"w-full grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mt-4",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-left sm:text-center backdrop-blur-xl",children:[e.jsx("p",{className:"text-xs sm:text-sm text-white/60 mb-1",children:" "}),e.jsxs("p",{className:"text-xl sm:text-2xl font-semibold text-emerald-300",children:["+",Number(h.coins??0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-left sm:text-center backdrop-blur-xl",children:[e.jsx("p",{className:"text-xs sm:text-sm text-white/60 mb-1",children:" "}),e.jsx("p",{className:"text-xl sm:text-2xl font-semibold text-primary-200",children:typeof h.newBalance=="number"?`${Number(h.newBalance).toLocaleString()} `:"---"})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-left sm:text-center backdrop-blur-xl",children:[e.jsx("p",{className:"text-xs sm:text-sm text-white/60 mb-1",children:" "}),e.jsx("p",{className:"text-base sm:text-lg font-semibold text-white/80 truncate",children:h.refId||" "})]})]}),n==="success"&&e.jsx("button",{type:"button",onClick:()=>s("/",{replace:!0}),className:"mt-4 inline-flex items-center justify-center rounded-2xl bg-white/10 px-6 py-3 text-sm sm:text-base font-semibold text-white transition-all hover:bg-white/20 hover:shadow-[0_0_25px_rgba(168,85,247,0.45)] focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-300",children:"   "}),n==="failed"&&e.jsx("button",{type:"button",onClick:()=>s("/store",{replace:!0}),className:"mt-4 inline-flex items-center justify-center rounded-2xl bg-white/10 px-6 py-3 text-sm sm:text-base font-semibold text-white transition-all hover:bg-white/20 hover:shadow-[0_0_25px_rgba(168,85,247,0.45)] focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-300",children:"     "}),e.jsx("p",{className:"text-xs text-white/50 sm:text-sm pt-2",children:n==="success"?"         .":n==="failed"?"       .":"   ."})]})]})})})},Ll=()=>{var l,u,w,p;const{user:t}=Se(),{data:s,isLoading:r}=Ve(["leaderboard","global"],()=>Sa.getLeaderboard(50,0),{staleTime:5*60*1e3}),a=((l=s==null?void 0:s.data)==null?void 0:l.leaderboard)||[],n=a.slice(0,3),o=a.slice(3),i=x=>x===1?"h-32 sm:h-40":x===2?"h-24 sm:h-32":x===3?"h-20 sm:h-28":"h-16",c=x=>x===1?"from-yellow-500/30 to-yellow-600/20":x===2?"from-gray-400/30 to-gray-500/20":x===3?"from-orange-500/30 to-orange-600/20":"from-white/10 to-white/5",h=x=>x===1?"bg-gradient-to-br from-yellow-400 via-yellow-500 to-yellow-600 text-yellow-900 shadow-lg shadow-yellow-500/50 ring-2 ring-yellow-300":x===2?"bg-gradient-to-br from-gray-300 via-gray-400 to-gray-500 text-gray-900 shadow-lg shadow-gray-400/50 ring-2 ring-gray-300":x===3?"bg-gradient-to-br from-orange-400 via-orange-500 to-orange-600 text-orange-900 shadow-lg shadow-orange-500/50 ring-2 ring-orange-300":x<=10?"bg-gradient-to-br from-blue-500/20 to-purple-500/20 text-white ring-1 ring-white/20":"bg-white/10 text-white/90 ring-1 ring-white/10",m=(x,g)=>g?"bg-gradient-to-r from-primary-500/30 via-primary-500/20 to-transparent ring-2 ring-primary-500/40 shadow-lg shadow-primary-500/20":x<=10?"bg-gradient-to-r from-white/5 to-transparent hover:from-white/10 hover:shadow-md":"bg-white/[0.02] hover:bg-white/5";return r?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-500/20 border-t-primary-500"}),e.jsx("p",{className:"text-white/60 text-sm",children:"  ..."})]})}):e.jsxs("div",{className:"relative min-h-screen pb-12",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 -z-10 h-[500px] bg-gradient-to-br from-primary-500/20 via-purple-500/10 to-transparent blur-3xl"}),e.jsx("div",{className:"absolute inset-x-0 top-40 -z-10 h-96 bg-gradient-to-br from-yellow-500/10 via-transparent to-orange-500/10 blur-3xl"}),e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 px-3 sm:px-6 lg:px-8",children:[e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center pt-6 sm:pt-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 sm:gap-3 rounded-full bg-gradient-to-r from-yellow-500/20 to-orange-500/20 px-3 sm:px-5 py-2 backdrop-blur-xl ring-1 ring-white/20",children:[e.jsx(Ue,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-300"}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-white",children:"   "})]}),e.jsx("h1",{className:"mt-4 sm:mt-6 text-3xl sm:text-5xl md:text-6xl font-black tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-l from-white via-white to-white/70 bg-clip-text text-transparent",children:" "})}),e.jsx("p",{className:"mt-3 sm:mt-4 text-sm sm:text-base text-white/60 max-w-2xl mx-auto px-4",children:"         "})]}),a.length>0?e.jsxs(e.Fragment,{children:[n.length>0&&e.jsxs(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"relative",children:[e.jsx("div",{className:"flex flex-col gap-3 sm:hidden",dir:"rtl",children:n.map((x,g)=>{var v;const y=(t==null?void 0:t.username)===x.username;return e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+g*.1},className:`relative overflow-hidden rounded-2xl bg-gradient-to-br ${c(x.rank)} p-4 backdrop-blur-xl ring-1 ring-white/20 shadow-xl`,children:[x.rank===1&&e.jsx(as,{className:"absolute top-2 left-2 h-6 w-6 text-yellow-400 animate-pulse"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`flex h-16 w-16 items-center justify-center rounded-2xl text-2xl font-black ${h(x.rank)}`,children:x.rank})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white truncate",children:x.username}),y&&e.jsx("span",{className:"flex-shrink-0 rounded-full bg-primary-500/40 px-2 py-0.5 text-xs font-medium text-primary-100 ring-1 ring-primary-400/50",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4 text-yellow-400"}),e.jsx("span",{className:"text-2xl font-black text-white",children:((v=x.totalScore)==null?void 0:v.toLocaleString())||0}),e.jsx("span",{className:"text-xs text-white/60",children:""})]})]}),e.jsxs("div",{className:"flex-shrink-0 text-4xl",children:[x.rank===1&&"",x.rank===2&&"",x.rank===3&&""]})]})]},x.rank)})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"relative flex items-end justify-center gap-4 px-4",dir:"ltr",children:[n[1]&&e.jsxs(E.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col items-center flex-1 max-w-[200px]",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-br from-gray-400/30 to-gray-500/30 rounded-full blur-xl"}),e.jsx("div",{className:"relative w-20 h-20 rounded-full bg-gradient-to-br from-gray-300 to-gray-500 ring-4 ring-gray-300/50 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:""})})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1 text-center",dir:"rtl",children:n[1].username}),e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[e.jsx(Nt,{className:"h-4 w-4 text-gray-300"}),e.jsx("span",{className:"text-xl font-black text-white",children:((u=n[1].totalScore)==null?void 0:u.toLocaleString())||0})]}),e.jsx("div",{className:`w-full ${i(2)} rounded-t-2xl bg-gradient-to-br ${c(2)} backdrop-blur-xl ring-1 ring-white/20 flex items-center justify-center`,children:e.jsx("span",{className:"text-4xl font-black text-white/90",children:"2"})})]}),n[0]&&e.jsxs(E.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center flex-1 max-w-[220px]",children:[e.jsx(as,{className:"h-8 w-8 text-yellow-400 mb-2 animate-pulse"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute -inset-3 bg-gradient-to-br from-yellow-400/40 to-yellow-600/40 rounded-full blur-2xl animate-pulse"}),e.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-yellow-400 via-yellow-500 to-yellow-600 ring-4 ring-yellow-300/70 shadow-2xl shadow-yellow-500/50 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:""})})]}),e.jsx("h3",{className:"text-xl font-black text-white mb-1 text-center",dir:"rtl",children:n[0].username}),e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[e.jsx(Nt,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{className:"text-2xl font-black bg-gradient-to-r from-yellow-200 to-yellow-400 bg-clip-text text-transparent",children:((w=n[0].totalScore)==null?void 0:w.toLocaleString())||0})]}),e.jsx("div",{className:`w-full ${i(1)} rounded-t-2xl bg-gradient-to-br ${c(1)} backdrop-blur-xl ring-2 ring-yellow-400/30 shadow-2xl shadow-yellow-500/20 flex items-center justify-center`,children:e.jsx("span",{className:"text-5xl font-black text-white",children:"1"})})]}),n[2]&&e.jsxs(E.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex flex-col items-center flex-1 max-w-[200px]",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-br from-orange-400/30 to-orange-500/30 rounded-full blur-xl"}),e.jsx("div",{className:"relative w-20 h-20 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 ring-4 ring-orange-300/50 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:""})})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1 text-center",dir:"rtl",children:n[2].username}),e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[e.jsx(Nt,{className:"h-4 w-4 text-orange-300"}),e.jsx("span",{className:"text-xl font-black text-white",children:((p=n[2].totalScore)==null?void 0:p.toLocaleString())||0})]}),e.jsx("div",{className:`w-full ${i(3)} rounded-t-2xl bg-gradient-to-br ${c(3)} backdrop-blur-xl ring-1 ring-white/20 flex items-center justify-center`,children:e.jsx("span",{className:"text-4xl font-black text-white/90",children:"3"})})]})]})})]}),o.length>0&&e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"rounded-2xl sm:rounded-3xl border border-white/10 bg-white/[0.03] backdrop-blur-2xl overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"p-3 sm:p-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6 pb-3 sm:pb-4 border-b border-white/10",children:[e.jsx(ys,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary-400"}),e.jsx("h2",{className:"text-base sm:text-xl font-bold text-white",children:"  "}),e.jsxs("span",{className:"mr-auto text-xs sm:text-sm text-white/50",children:[o.length," "]})]}),e.jsx("div",{className:"space-y-2",children:o.map((x,g)=>{var v;const y=(t==null?void 0:t.username)===x.username;return e.jsxs(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+g*.02,duration:.3},className:`group relative overflow-hidden rounded-xl sm:rounded-2xl p-3 sm:p-4 transition-all duration-300 ${m(x.rank,y)}`,children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl sm:rounded-2xl text-sm sm:text-base font-bold transition-transform group-hover:scale-110 ${h(x.rank)}`,children:x.rank})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:`text-sm sm:text-base font-bold truncate ${y?"text-primary-200":"text-white"}`,children:x.username}),y&&e.jsx("span",{className:"flex-shrink-0 rounded-full bg-primary-500/40 px-2 py-0.5 text-xs font-medium text-primary-100 ring-1 ring-primary-400/50",children:""})]}),e.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:x.rank<=10?" ":""})]}),e.jsxs("div",{className:"flex-shrink-0 text-left",dir:"ltr",children:[e.jsx("div",{className:"flex items-baseline gap-1",children:e.jsx("span",{className:"text-base sm:text-lg font-black text-white",children:((v=x.totalScore)==null?void 0:v.toLocaleString())||0})}),e.jsx("p",{className:"text-xs text-white/40 text-right",dir:"rtl",children:""})]})]}),x.rank<=10&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-primary-400 to-purple-500"})]},x.rank)})})]})})]}):e.jsxs(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex min-h-[400px] flex-col items-center justify-center rounded-3xl bg-white/[0.03] backdrop-blur-xl border border-white/10 text-center text-white/60 p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-xl font-bold text-white/80 mb-2",children:"   "}),e.jsx("p",{className:"text-sm text-white/50",children:"      !"})]})]})]})},Al=()=>{const{user:t,isAuthenticated:s}=Se(),[r,a]=d.useState(null),[n,o]=d.useState("dashboard"),[i,c]=d.useState(null),[h,m]=d.useState([]),[l,u]=d.useState([]),[w,p]=d.useState(0),[x,g]=d.useState(!1),[y,v]=d.useState(!0),[S,C]=d.useState(!1),F=[{number:1,color:"red",interval:"1 ",gradient:"from-red-500 to-pink-500",bgGradient:"from-red-500/20 to-pink-500/20",border:"border-red-500/30"},{number:2,color:"orange",interval:"3 ",gradient:"from-orange-500 to-yellow-500",bgGradient:"from-orange-500/20 to-yellow-500/20",border:"border-orange-500/30"},{number:3,color:"yellow",interval:"1 ",gradient:"from-yellow-500 to-green-500",bgGradient:"from-yellow-500/20 to-green-500/20",border:"border-yellow-500/30"},{number:4,color:"blue",interval:"2 ",gradient:"from-blue-500 to-cyan-500",bgGradient:"from-blue-500/20 to-cyan-500/20",border:"border-blue-500/30"},{number:5,color:"purple",interval:"1 ",gradient:"from-purple-500 to-pink-500",bgGradient:"from-purple-500/20 to-pink-500/20",border:"border-purple-500/30"}];d.useEffect(()=>{s&&H()},[s]);const H=async()=>{try{v(!0);const R=await yl();a(R.data)}catch{D.error("   ")}finally{v(!1)}},V=async R=>{try{v(!0);const f=await fl({box:R});m(f.data),c(R),o("boxes")}catch{D.error("   ")}finally{v(!1)}},$=async()=>{try{C(!0);const R=await bl(20);if(R.data.length===0){D("     ! ",{icon:""});return}u(R.data),p(0),g(!1),o("review")}catch{D.error("   ")}finally{C(!1)}},P=async R=>{if(l.length===0)return;const f=l[w];try{await gl(f._id,R),w<l.length-1?(p(w+1),g(!1)):(D.success("  ! "),o("dashboard"),H())}catch{D.error("    ")}},Z=async R=>{if(confirm("        "))try{await jl(R),D.success("  "),i&&V(i),H()}catch{D.error("   ")}},Y=async R=>{try{await wl(R),D.success("    "),i&&V(i),H()}catch{D.error("   ")}};if(!s)return e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-12 text-center",children:[e.jsx(He,{className:"w-20 h-20 text-purple-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent mb-4",children:" "}),e.jsx("p",{className:"text-white/70 mb-8 max-w-md mx-auto",children:"              ."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(re,{to:"/login",className:"bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-400 hover:to-secondary-400 text-white font-semibold py-3 px-8 rounded-xl transition-all",children:""}),e.jsx(re,{to:"/register",className:"bg-glass hover:bg-glass-hover border border-glass-border text-white font-semibold py-3 px-8 rounded-xl transition-all",children:""})]})]})});if(y)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(He,{className:"w-16 h-16 text-purple-400 animate-pulse mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:"  ..."})]})});if(n==="dashboard")return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent mb-3",children:" "}),e.jsx("p",{className:"text-white/70 text-lg",children:"     "})]}),e.jsxs(re,{to:"/game",className:"flex items-center gap-2 bg-glass hover:bg-glass-hover border border-glass-border text-white font-semibold py-3 px-6 rounded-xl transition-all",children:[e.jsx(Js,{className:"w-5 h-5"}),e.jsx("span",{children:"  "})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-lg rounded-2xl border border-purple-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/30 border border-purple-400/40",children:e.jsx(He,{className:"w-6 h-6 text-purple-200"})}),e.jsx("span",{className:"text-3xl font-bold text-white",children:(r==null?void 0:r.totalCards)||0})]}),e.jsx("h3",{className:"text-white/80 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-white/60 text-sm",children:"  "})]}),e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-cyan-500/20 to-blue-500/20 backdrop-blur-lg rounded-2xl border border-cyan-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-cyan-500/30 border border-cyan-400/40",children:e.jsx(Ho,{className:"w-6 h-6 text-cyan-200"})}),e.jsx("span",{className:"text-3xl font-bold text-white",children:(r==null?void 0:r.dueForReview)||0})]}),e.jsx("h3",{className:"text-white/80 font-semibold mb-1",children:"  "}),e.jsx("p",{className:"text-white/60 text-sm",children:""})]}),e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 backdrop-blur-lg rounded-2xl border border-green-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-500/30 border border-green-400/40",children:e.jsx(Ys,{className:"w-6 h-6 text-green-200"})}),e.jsxs("span",{className:"text-3xl font-bold text-white",children:[(r==null?void 0:r.averageAccuracy)||0,"%"]})]}),e.jsx("h3",{className:"text-white/80 font-semibold mb-1",children:""}),e.jsx("p",{className:"text-white/60 text-sm",children:" "})]}),e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 backdrop-blur-lg rounded-2xl border border-yellow-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-yellow-500/30 border border-yellow-400/40",children:e.jsx(ys,{className:"w-6 h-6 text-yellow-200"})}),e.jsx("span",{className:"text-3xl font-bold text-white",children:(r==null?void 0:r.masteredWords)||0})]}),e.jsx("h3",{className:"text-white/80 font-semibold mb-1",children:" "}),e.jsx("p",{className:"text-white/60 text-sm",children:"  5"})]})]}),(r==null?void 0:r.dueForReview)>0&&e.jsxs(E.button,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5},onClick:$,disabled:S,className:"w-full bg-gradient-to-r from-purple-500 via-pink-500 to-cyan-500 hover:from-purple-400 hover:via-pink-400 hover:to-cyan-400 text-white font-bold text-xl py-6 rounded-2xl shadow-[0_0_40px_rgba(168,85,247,0.5)] hover:shadow-[0_0_50px_rgba(168,85,247,0.7)] transition-all disabled:opacity-50 flex items-center justify-center gap-3",children:[e.jsx(Qs,{className:"w-7 h-7"}),e.jsxs("span",{children:["  (",r.dueForReview," )"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:F.map((R,f)=>{var _;return e.jsxs(E.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+f*.1},onClick:()=>V(R.number),className:`bg-gradient-to-br ${R.bgGradient} backdrop-blur-lg rounded-2xl border ${R.border} p-6 hover:scale-105 transition-all text-right`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:`text-sm font-semibold bg-gradient-to-r ${R.gradient} bg-clip-text text-transparent`,children:[" ",R.number]}),e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-r ${R.gradient} flex items-center justify-center text-white font-bold text-sm`,children:R.number})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:((_=r==null?void 0:r.byBox)==null?void 0:_[R.number])||0}),e.jsx("span",{className:"text-white/60 text-sm mr-2",children:""})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[": ",R.interval]})]},R.number)})})]}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/20 border border-purple-400/30",children:e.jsx(Bo,{className:"w-6 h-6 text-purple-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"  "}),e.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"         .                  .            .                    ."})]})]})})]});if(n==="review"&&l.length>0){const R=l[w],f=(w+1)/l.length*100;return e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-white/70 text-sm",children:[" ",w+1,"  ",l.length]}),e.jsxs("span",{className:"text-white/70 text-sm",children:[": ",Math.round(f),"%"]})]}),e.jsx("div",{className:"w-full bg-glass rounded-full h-2",children:e.jsx(E.div,{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-cyan-500 h-2 rounded-full",initial:{width:0},animate:{width:`${f}%`},transition:{duration:.3}})})]}),e.jsxs(E.div,{initial:{opacity:0,scale:.9,rotateY:-10},animate:{opacity:1,scale:1,rotateY:0},transition:{duration:.4},className:"bg-glass backdrop-blur-lg rounded-3xl border border-glass-border p-12 mb-8 min-h-[400px] flex flex-col items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-purple-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-cyan-500/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-purple-500/20 border border-purple-400/30 text-purple-200 text-sm font-semibold",children:[e.jsx(Aa,{className:"w-4 h-4"})," ",R.box]})}),e.jsx("h2",{className:"text-6xl font-bold text-white mb-8",children:R.wordId.text}),x?e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[e.jsx("p",{className:"text-white/60 text-sm mb-2",children:":"}),e.jsx("p",{className:"text-white text-2xl font-semibold leading-relaxed",children:R.wordId.meaning||R.wordId.description||"  "})]}),R.notes&&e.jsx("div",{className:"bg-cyan-500/10 border border-cyan-400/30 rounded-xl p-4",children:e.jsx("p",{className:"text-cyan-200 text-sm",children:R.notes})})]}):e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 mx-auto bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white font-semibold py-3 px-8 rounded-xl transition-all",children:[e.jsx(ns,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})]})]},w),x&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>P("incorrect"),className:"bg-gradient-to-br from-red-500/20 to-pink-500/20 hover:from-red-500/30 hover:to-pink-500/30 border border-red-500/30 text-white font-semibold py-4 px-6 rounded-xl transition-all flex flex-col items-center gap-2",children:[e.jsx(rt,{className:"w-6 h-6 text-red-300"}),e.jsx("span",{children:""}),e.jsx("span",{className:"text-xs text-white/60",children:"   1"})]}),e.jsxs("button",{onClick:()=>P("skipped"),className:"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 hover:from-yellow-500/30 hover:to-orange-500/30 border border-yellow-500/30 text-white font-semibold py-4 px-6 rounded-xl transition-all flex flex-col items-center gap-2",children:[e.jsx(ht,{className:"w-6 h-6 text-yellow-300"}),e.jsx("span",{children:""}),e.jsx("span",{className:"text-xs text-white/60",children:" "})]}),e.jsxs("button",{onClick:()=>P("correct"),className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 hover:from-green-500/30 hover:to-emerald-500/30 border border-green-500/30 text-white font-semibold py-4 px-6 rounded-xl transition-all flex flex-col items-center gap-2",children:[e.jsx(_a,{className:"w-6 h-6 text-green-300"}),e.jsx("span",{children:""}),e.jsx("span",{className:"text-xs text-white/60",children:" "})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>{o("dashboard"),H()},className:"text-white/60 hover:text-white transition-colors text-sm",children:"  "})})]})}if(n==="boxes"&&i){const R=F.find(f=>f.number===i);return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`bg-gradient-to-br ${R.bgGradient} backdrop-blur-lg rounded-2xl border ${R.border} p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-r ${R.gradient} flex items-center justify-center text-white font-bold text-lg`,children:i}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-1",children:[" ",i]}),e.jsxs("p",{className:"text-white/70",children:["  ",R.interval,"  ",h.length," "]})]})]}),e.jsxs("button",{onClick:()=>o("dashboard"),className:"bg-white/10 hover:bg-white/20 border border-white/20 text-white font-semibold py-2 px-6 rounded-xl transition-all flex items-center gap-2",children:[e.jsx(ht,{className:"w-5 h-5"}),e.jsx("span",{children:""})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map((f,_)=>e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},className:"bg-glass backdrop-blur-lg rounded-xl border border-glass-border p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:f.wordId.text}),e.jsxs("span",{className:"text-xs text-white/50",children:["#",f.reviewCount]})]}),e.jsx("p",{className:"text-white/70 text-sm mb-3",children:f.wordId.meaning||f.wordId.description||"  "}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:"text-xs bg-green-500/20 border border-green-500/30 text-green-300 px-2 py-1 rounded",children:[" ",f.correctCount]}),e.jsxs("span",{className:"text-xs bg-red-500/20 border border-red-500/30 text-red-300 px-2 py-1 rounded",children:[" ",f.incorrectCount]}),e.jsxs("span",{className:"text-xs bg-purple-500/20 border border-purple-500/30 text-purple-300 px-2 py-1 rounded",children:[f.getAccuracy?f.getAccuracy():Math.round(f.correctCount/(f.correctCount+f.incorrectCount||1)*100),"%"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>Y(f._id),title:"   1",className:"flex-1 bg-white/5 hover:bg-white/10 border border-white/10 text-white/70 hover:text-white py-2 px-3 rounded-lg transition-all text-xs flex items-center justify-center gap-1",children:[e.jsx(il,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>Z(f._id),title:" ",className:"flex-1 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 text-red-300 py-2 px-3 rounded-lg transition-all text-xs flex items-center justify-center gap-1",children:[e.jsx(Xs,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]})]},f._id))}),h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(He,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"     "})]})]})}return null},Pl=()=>{const t=gt(),{user:s}=Se(),r=[{name:"Dashboard",href:"/admin",icon:Zo},{name:"Levels",href:"/admin/levels",icon:is},{name:"Coin Packs",href:"/admin/coin-packs",icon:pt},{name:"Reward Settings",href:"/admin/settings/rewards",icon:Ue},{name:"Users",href:"/admin/users",icon:os}],a=n=>t.pathname===n;return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-white/60",children:["Welcome back, ",s==null?void 0:s.username,"! Manage your game content here."]})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-secondary-500/20 text-secondary-400 px-4 py-2 rounded-lg",children:[e.jsx(La,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Admin Mode"})]})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64",children:e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:e.jsx("nav",{className:"space-y-2",children:r.map(n=>{const o=n.icon;return e.jsxs(re,{to:n.href,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${a(n.href)?"bg-primary-500 text-white":"text-white/60 hover:text-white hover:bg-glass-hover"}`,children:[e.jsx(o,{className:"w-5 h-5"}),e.jsx("span",{children:n.name})]},n.name)})})})}),e.jsx("div",{className:"flex-1",children:e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(en,{})},t.pathname)})]})]})},Rl=()=>{const[t,s]=d.useState(!1),[r,a]=d.useState(!1),[n,o]=d.useState(""),{login:i}=Se(),c=_t(),h=gt(),{register:m,handleSubmit:l,formState:{errors:u}}=zr(),w=async p=>{var x,g;a(!0);try{o(""),await i(p.username,p.password);const y=((g=(x=h.state)==null?void 0:x.from)==null?void 0:g.pathname)||"/";c(y,{replace:!0}),D.success("  !")}catch(y){y.message==="Invalid credentials"?(o("   !          ."),D.error("     .")):(o("  .    ."),D.error(y.message||"   !"))}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/50",children:e.jsx(Ct,{className:"w-8 h-8 text-white"})}),e.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:""})]}),e.jsx("p",{className:"text-white/60",children:"     "})]}),e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-8",children:e.jsxs("form",{onSubmit:l(w),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"  "}),e.jsxs("div",{className:"relative",children:[e.jsx(er,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",placeholder:"   ",className:"w-full pr-12 pl-4 py-3 bg-glass-hover border-2 border-primary-500/30 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400 focus:shadow-lg focus:shadow-primary-500/50 transition-all",...m("username",{required:"    !",minLength:{value:3,message:"      "}})})]}),u.username&&e.jsx("p",{className:"mt-2 text-sm text-danger",children:u.username.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" "}),e.jsxs("div",{className:"relative",children:[e.jsx(bt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:t?"text":"password",placeholder:"  ",className:"w-full pr-12 pl-12 py-3 bg-glass-hover border-2 border-secondary-500/30 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-secondary-400 focus:shadow-lg focus:shadow-secondary-500/50 transition-all",...m("password",{required:"   !",minLength:{value:6,message:"     "}})}),e.jsx("button",{type:"button",onClick:()=>s(!t),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/40 hover:text-white transition-colors",children:t?e.jsx(Bs,{className:"w-5 h-5"}):e.jsx(ns,{className:"w-5 h-5"})})]}),u.password&&e.jsx("p",{className:"mt-2 text-sm text-danger",children:u.password.message})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 hover:from-primary-600 hover:via-secondary-600 hover:to-primary-600 disabled:bg-glass-hover disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-all flex items-center justify-center space-x-2 space-x-reverse shadow-lg shadow-primary-500/50 hover:shadow-xl hover:shadow-secondary-500/50",children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"    ..."})]}):e.jsx("span",{children:" ! "})}),n&&e.jsx("p",{className:"text-sm text-danger text-center",children:n})]})}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-white/60",children:["  "," ",e.jsx(re,{to:"/register",className:"text-primary-400 hover:text-primary-300 font-medium transition-colors",children:" !"})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>c("/"),className:"text-white/50 hover:text-white/80 text-sm font-medium transition-colors underline decoration-dotted",children:"        "})})]})})},Ml=()=>{const[t,s]=d.useState(!1),[r,a]=d.useState(!1),[n,o]=d.useState(!1),{register:i}=Se(),[c,h]=d.useState(""),m=_t(),{register:l,handleSubmit:u,watch:w,formState:{errors:p}}=zr({mode:"onBlur",reValidateMode:"onChange"}),x=w("password"),g=async y=>{if(y.password!==y.confirmPassword){D.error("  ! ");return}h(""),o(!0);try{const v=y.username.trim();await i({username:v,password:y.password}),m("/game"),D.success("   !    ")}catch(v){v.message==="User already exists with this username"?(h("     !             ."),D.error("  .")):v.message==="Username cannot contain spaces"?(h("     .       _  ."),D.error("  .")):(h("       ."),D.error(v.message||"      !"))}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/50",children:e.jsx(Ct,{className:"w-8 h-8 text-white"})}),e.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:""})]}),e.jsx("p",{className:"text-white/60",children:"      ! "})]}),e.jsxs("div",{className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-8",children:[e.jsxs("form",{onSubmit:u(g),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"  "}),e.jsxs("div",{className:"relative",children:[e.jsx(er,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",placeholder:"      ",className:"w-full pr-12 pl-4 py-3 bg-glass-hover border-2 border-accent-500/30 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-accent-400 focus:shadow-lg focus:shadow-accent-500/50 transition-all",...l("username",{required:"    !",minLength:{value:3,message:"      "},maxLength:{value:20,message:"       "},pattern:{value:/^[a-zA-Z0-9_]+$/,message:"     _   ( )"},validate:{noSpaces:y=>!/\s/.test(y||"")||"     .       _  .",availability:async y=>{if(!y||y.length<3||/\s/.test(y))return!0;try{const v=await kt.checkUsername(y);return v.available?!0:v.message==="Username cannot contain spaces"?"     .       _  .":"     !        ."}catch{return"     .       ."}}}})})]}),p.username&&e.jsx("p",{className:"mt-2 text-sm text-danger",children:p.username.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" "}),e.jsxs("div",{className:"relative",children:[e.jsx(bt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:t?"text":"password",placeholder:"   ",className:"w-full pr-12 pl-12 py-3 bg-glass-hover border-2 border-secondary-500/30 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-secondary-400 focus:shadow-lg focus:shadow-secondary-500/50 transition-all",...l("password",{required:"    !",minLength:{value:6,message:"     "}})}),e.jsx("button",{type:"button",onClick:()=>s(!t),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/40 hover:text-white transition-colors",children:t?e.jsx(Bs,{className:"w-5 h-5"}):e.jsx(ns,{className:"w-5 h-5"})})]}),p.password&&e.jsx("p",{className:"mt-2 text-sm text-danger",children:p.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"   "}),e.jsxs("div",{className:"relative",children:[e.jsx(bt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:r?"text":"password",placeholder:"     ",className:"w-full pr-12 pl-12 py-3 bg-glass-hover border-2 border-blue-500/30 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-blue-400 focus:shadow-lg focus:shadow-blue-500/50 transition-all",...l("confirmPassword",{required:"   !",validate:y=>y===x||"  !"})}),e.jsx("button",{type:"button",onClick:()=>a(!r),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/40 hover:text-white transition-colors",children:r?e.jsx(Bs,{className:"w-5 h-5"}):e.jsx(ns,{className:"w-5 h-5"})})]}),p.confirmPassword&&e.jsx("p",{className:"mt-2 text-sm text-danger",children:p.confirmPassword.message})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500 hover:from-primary-600 hover:via-secondary-600 hover:to-primary-600 disabled:bg-glass-hover disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-all flex items-center justify-center space-x-2 space-x-reverse shadow-lg shadow-primary-500/50 hover:shadow-xl hover:shadow-secondary-500/50",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"   ..."})]}):e.jsx("span",{children:" ! "})}),c&&e.jsx("p",{className:"text-sm text-danger text-center",children:c})]}),e.jsx("div",{className:"text-center mt-6 pt-6 border-t border-white/10",children:e.jsxs("p",{className:"text-white/60",children:["  "," ",e.jsx(re,{to:"/login",className:"text-primary-400 hover:text-primary-300 font-medium transition-colors",children:" !"})]})})]})]})})},Ul=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-8xl font-bold text-white mb-4",children:"404"}),e.jsx("p",{className:"text-2xl text-white/80 mb-2",children:"Page Not Found"}),e.jsx("p",{className:"text-white/60 max-w-md mx-auto",children:"The page you're looking for doesn't exist. Maybe you took a wrong turn in the word maze?"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-primary-500 to-primary-700 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ct,{className:"w-16 h-16 text-white"})}),e.jsx("p",{className:"text-white/60 italic",children:`"Don't worry, even the best wordsmiths get lost sometimes!"`})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(re,{to:"/",className:"bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Js,{className:"w-5 h-5"}),e.jsx("span",{children:"Go Home"})]}),e.jsxs(re,{to:"/game",className:"bg-glass hover:bg-glass-hover text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2 border border-glass-border",children:[e.jsx(Ct,{className:"w-5 h-5"}),e.jsx("span",{children:"Play Game"})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Did You Know?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-lg border border-glass-border p-4",children:e.jsx("p",{className:"text-white/80 text-sm",children:"The longest word in English has 189,819 letters and would take 3.5 hours to pronounce!"})}),e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-lg border border-glass-border p-4",children:e.jsx("p",{className:"text-white/80 text-sm",children:'"I am" is the shortest complete sentence in the English language.'})}),e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-lg border border-glass-border p-4",children:e.jsx("p",{className:"text-white/80 text-sm",children:'The word "set" has the most definitions in the dictionary with 430 different meanings!'})})]})]})]})}),ct=t=>{if(t==null)return"0";const s=Number(t);return Number.isNaN(s)?"0":s.toLocaleString("fa-IR")},Es=(t,s=!1)=>{if(!t)return"";const r=new Date(t);return Number.isNaN(r.getTime())?"":new Intl.DateTimeFormat("fa-IR",{year:"numeric",month:"long",day:"numeric",...s&&{hour:"2-digit",minute:"2-digit"}}).format(r)},Tl=()=>{const{user:t,updateUser:s,logout:r}=Se(),[a,n]=d.useState(!1),[o,i]=d.useState(!1),[c,h]=d.useState(!1),[m,l]=d.useState(null),[u,w]=d.useState({username:"",email:""}),[p,x]=d.useState(!1),[g,y]=d.useState(""),[v,S]=d.useState(!1),C=d.useRef(null),F=d.useMemo(()=>{const O=(m==null?void 0:m.completedLevels)??(t==null?void 0:t.completedLevels);return Array.isArray(O)?O.map((U,J)=>{const j=(U==null?void 0:U.levelId)??(U==null?void 0:U.level)??U,G=(j==null?void 0:j._id)??(U==null?void 0:U._id)??(U==null?void 0:U.id)??J,ae=typeof G=="object"&&G!==null&&typeof G.toString=="function"?G.toString():`${G}`,L=(j==null?void 0:j.order)??(U==null?void 0:U.order)??null,A=(j==null?void 0:j.letters)??(U==null?void 0:U.letters)??null,I=typeof(U==null?void 0:U.stars)=="number"?Math.min(3,Math.max(0,Math.round(U.stars))):null,K=(U==null?void 0:U.completedAt)??null;return{id:ae,order:L,letters:A,stars:I,completedAt:K}}).filter(Boolean).sort((U,J)=>U.completedAt&&J.completedAt?new Date(J.completedAt).getTime()-new Date(U.completedAt).getTime():U.completedAt?-1:J.completedAt?1:(J.order??0)-(U.order??0)):[]},[m,t]),H=d.useMemo(()=>[{label:" ",value:ct((m==null?void 0:m.levelsCleared)??(t==null?void 0:t.levelsCleared)??0),icon:Ur},{label:" ",value:ct((m==null?void 0:m.totalScore)??(t==null?void 0:t.totalScore)??0),icon:Ue},{label:" ",value:ct((m==null?void 0:m.wordsFound)??(t==null?void 0:t.wordsFound)??0),icon:He},{label:"  ",value:ct((m==null?void 0:m.bestStreak)??(t==null?void 0:t.bestStreak)??0),icon:Ko},{label:" ",value:ct((m==null?void 0:m.currentStreak)??(t==null?void 0:t.currentStreak)??0),icon:Ht},{label:"",value:ct((m==null?void 0:m.coins)??(t==null?void 0:t.coins)??0),icon:ke}],[m,t]),V=d.useCallback(async()=>{try{x(!0),y("");const O=await kt.getMe();l(O),w({username:(O==null?void 0:O.username)||"",email:(O==null?void 0:O.email)||""}),s(O)}catch(O){console.error("Failed to load profile",O),y(O.message||"    ")}finally{x(!1)}},[s]),$=async()=>{if(a){n(!1),i(!1);return}n(!0),await V()};d.useEffect(()=>{if(!a)return;const O=J=>{C.current&&!C.current.contains(J.target)&&(n(!1),i(!1))},U=J=>{J.key==="Escape"&&(n(!1),i(!1))};return document.addEventListener("mousedown",O),document.addEventListener("keydown",U),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("keydown",U)}},[a]),d.useEffect(()=>{if(!v)return;const O=U=>{U.key==="Escape"&&S(!1)};return document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}},[v]);const P=O=>{const{name:U,value:J}=O.target;w(j=>({...j,[U]:J}))},Z=async O=>{var U,J;if(O.preventDefault(),!c)try{h(!0);const j={},G=(_==null?void 0:_.username)||"",ae=typeof u.username<"u"?u.username.trim():G;ae&&ae!==G&&(j.username=ae);const L=(_==null?void 0:_.email)||null,A=typeof u.email=="string"?u.email.trim():"",I=A.length>0?A:null;if(I!==L&&(j.email=I),Object.keys(j).length===0){mt("    "),i(!1);return}const K=await kt.updateProfile(j);l(K),w({username:(K==null?void 0:K.username)||"",email:(K==null?void 0:K.email)||""}),s(K),mt.success("    "),i(!1)}catch(j){console.error("Failed to save profile",j);const G=j.message||((J=(U=j.response)==null?void 0:U.data)==null?void 0:J.message)||"   ";mt.error(G)}finally{h(!1)}},Y=()=>{S(!0)},R=()=>{S(!1)},f=()=>{r(),n(!1),i(!1),S(!1)},_=m||t;return e.jsxs("div",{className:"relative",ref:C,children:[e.jsxs("button",{onClick:$,className:"flex items-center space-x-2 space-x-reverse text-white px-4 py-2 rounded-xl transition-colors bg-slate-800/80 hover:bg-slate-700 border border-slate-700",type:"button",children:[e.jsx(er,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:block font-medium",children:(_==null?void 0:_.username)||""})]}),e.jsx(ve,{children:a&&e.jsxs(E.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"fixed sm:absolute left-0 sm:left-auto sm:right-0 top-16 sm:top-auto mt-0 sm:mt-3 w-full sm:w-[360px] md:w-[420px] max-w-[95vw] bg-slate-900 border border-slate-700 rounded-none sm:rounded-2xl shadow-xl overflow-hidden z-50",children:[e.jsx("div",{className:"px-5 py-5 border-b border-slate-700 bg-slate-800",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-white",children:(_==null?void 0:_.username)||""}),e.jsxs("p",{className:"text-sm text-white/70 flex items-center gap-2 mt-2",children:[e.jsx(Yo,{className:"w-4 h-4 text-accent-400"}),(_==null?void 0:_.email)||"  "]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs text-white/70 flex items-center gap-1 justify-end",children:[e.jsx(zo,{className:"w-4 h-4 text-secondary-400"}),"  ",Es(_==null?void 0:_.createdAt)]}),e.jsxs("p",{className:"text-xs text-white/70 flex items-center gap-1 justify-end mt-1",children:[e.jsx(Ht,{className:"w-4 h-4 text-secondary-400"})," : ",Es(_==null?void 0:_.lastActive,!0)]})]}),e.jsx("button",{type:"button",onClick:()=>{n(!1),i(!1)},className:"inline-flex h-9 w-9 items-center justify-center rounded-lg border border-slate-700 text-white/70 transition-colors hover:bg-slate-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-primary-500/60 focus:ring-offset-2 focus:ring-offset-slate-800","aria-label":"  ",children:e.jsx(rt,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[calc(100vh-200px)] sm:max-h-[600px] overflow-y-auto bg-slate-900",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-primary-400"})," "]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:H.map(({label:O,value:U,icon:J})=>e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl px-3 py-3 flex items-center gap-2 hover:border-primary-500/40 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 border border-slate-700 flex items-center justify-center",children:e.jsx(J,{className:"w-5 h-5 text-primary-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-white",children:U}),e.jsx("p",{className:"text-xs text-white/70",children:O})]})]},O))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5 text-accent-400"})," "]}),g&&!p?e.jsx("p",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/30 rounded-lg px-3 py-2",children:g}):null,p?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(Ie,{className:"w-8 h-8 text-primary-400 animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 border border-slate-700 flex items-center justify-center",children:e.jsx(Ht,{className:"w-5 h-5 text-secondary-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:" "}),e.jsx("p",{className:"text-xs text-white/70",children:Es(_==null?void 0:_.lastActive,!0)})]})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl px-4 py-3",children:[e.jsxs("p",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(Ur,{className:"w-5 h-5 text-accent-300"}),"  "]}),F.length>0?e.jsx("ul",{className:"max-h-28 overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:F.map((O,U)=>e.jsxs("li",{className:"flex items-center justify-between text-xs text-white/80 bg-slate-900 border border-slate-700 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold",children:[" ",ct(O.order??U+1)]}),O.letters?e.jsx("span",{className:"text-white/60 font-medium",children:O.letters}):null]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:3}).map((J,j)=>{const G=j<(O.stars??0);return e.jsx("span",{className:G?"text-amber-300":"text-white/20",children:G?"":""},`${O.id}-star-${j}`)})})]},O.id))}):e.jsx("p",{className:"text-xs text-white/60",children:"    ."})]})]})]}),e.jsx("div",{className:"border-t border-primary-500/20 pt-4",children:o?e.jsxs("form",{onSubmit:Z,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-xs font-semibold text-white/70 mb-2",children:" "}),e.jsx("input",{id:"username",name:"username",type:"text",value:u.username,onChange:P,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2.5 text-sm text-white placeholder-white/40 focus:outline-none focus:border-primary-400/60 focus:ring-1 focus:ring-primary-400/60"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold text-white/70 mb-2",children:""}),e.jsx("input",{id:"email",name:"email",type:"email",value:u.email,onChange:P,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2.5 text-sm text-white placeholder-white/40 focus:outline-none focus:border-secondary-400/60 focus:ring-1 focus:ring-secondary-400/60"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),w({username:(_==null?void 0:_.username)||"",email:(_==null?void 0:_.email)||""})},className:"px-5 py-2.5 rounded-lg text-sm font-semibold text-white/80 hover:text-white hover:bg-slate-800 border border-slate-700",children:""}),e.jsx("button",{type:"submit",disabled:c,className:"px-5 py-2.5 rounded-lg bg-primary-600 text-sm font-bold text-white hover:bg-primary-500 disabled:opacity-60 disabled:cursor-not-allowed",children:c?"  ...":" "})]})]}):e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>i(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-slate-800 border border-slate-700 text-sm font-bold text-white hover:border-primary-400/40 hover:bg-slate-700",children:[e.jsx(al,{className:"w-4 h-4"})," "]}),e.jsxs("button",{type:"button",onClick:Y,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-gradient-to-r from-red-500/20 to-pink-500/20 border border-red-400/40 text-sm font-bold text-red-200 hover:border-red-400/60 hover:shadow-[0_0_20px_rgba(239,68,68,0.4)] hover:scale-105 transition-all",children:[e.jsx(Xo,{className:"w-4 h-4"}),""]})]})})]})]})}),e.jsx(ve,{children:v&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[60] flex min-h-screen items-center justify-center bg-slate-950/70 backdrop-blur-sm px-4",onClick:R,children:e.jsxs(E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},className:"w-full max-w-sm rounded-2xl border border-slate-700 bg-slate-900 p-6 shadow-2xl",onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"    "}),e.jsx("p",{className:"mt-2 text-sm text-white/70",children:"           ."})]}),e.jsxs("div",{className:"flex flex-col-reverse gap-3 sm:flex-row sm:justify-center",children:[e.jsx("button",{type:"button",onClick:R,className:"flex-1 rounded-xl border border-slate-700 px-4 py-2.5 text-sm font-semibold text-white/80 transition-colors hover:bg-slate-800 hover:text-white",children:""}),e.jsx("button",{type:"button",onClick:f,className:"flex-1 rounded-xl bg-gradient-to-r from-red-500 via-rose-500 to-pink-500 px-4 py-2.5 text-sm font-bold text-white shadow-lg shadow-red-500/30 transition-transform hover:scale-[1.02]",children:""})]})]})})})]})},Ol=({children:t})=>{var m;const[s,r]=d.useState(!1),{user:a,isAuthenticated:n}=Se(),o=gt(),i=[{name:"",href:"/",icon:Js},{name:"",href:"/game",icon:Ct},{name:"",href:"/levels",icon:es},{name:" ",href:"/leitner",icon:He},{name:"",href:"/store",icon:pt},{name:"",href:"/leaderboard",icon:Ue}],c=[{name:" ",href:"/admin",icon:La}],h=l=>o.pathname===l;return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("nav",{className:"bg-glass backdrop-blur-xl border-b-2 border-glass-border sticky top-0 z-50 shadow-[0_4px_30px_rgba(168,85,247,0.1)]",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(re,{to:"/",className:"flex items-center space-x-2 space-x-reverse group",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 via-secondary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-[0_0_20px_rgba(168,85,247,0.4)] group-hover:shadow-[0_0_30px_rgba(168,85,247,0.6)] transition-all group-hover:scale-110",children:e.jsx(Ct,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:""})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8 space-x-reverse",children:[i.map(l=>{const u=l.icon;return e.jsxs(re,{to:l.href,className:`flex items-center space-x-2 space-x-reverse px-4 py-2 rounded-xl transition-all font-medium ${h(l.href)?"bg-gradient-to-r from-primary-500 to-secondary-500 text-white shadow-[0_0_20px_rgba(168,85,247,0.5)]":"text-white/80 hover:text-white hover:bg-glass-hover hover:shadow-[0_0_15px_rgba(168,85,247,0.2)]"}`,children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:l.name})]},l.name)}),(a==null?void 0:a.isAdmin)&&c.map(l=>{const u=l.icon;return e.jsxs(re,{to:l.href,className:`flex items-center space-x-2 space-x-reverse px-4 py-2 rounded-xl transition-all font-medium border-2 ${h(l.href)?"bg-gradient-to-r from-accent-500 to-blue-500 text-white border-accent-400 shadow-[0_0_20px_rgba(6,182,212,0.5)]":"text-accent-300 hover:text-white hover:bg-accent-500/20 border-accent-500/30 hover:border-accent-400/50 hover:shadow-[0_0_15px_rgba(6,182,212,0.3)]"}`,children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:l.name})]},l.name)})]}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[n&&a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse bg-gradient-to-r from-accent-500/20 to-accent-600/10 px-4 py-2 rounded-xl border border-accent-500/30 shadow-[0_0_15px_rgba(6,182,212,0.2)]",children:[e.jsx(ke,{className:"w-5 h-5 text-accent-400 drop-shadow-[0_0_8px_rgba(6,182,212,0.5)]"}),e.jsx("span",{className:"text-white font-bold",children:((m=a.coins)==null?void 0:m.toLocaleString())||0})]}),e.jsx(Tl,{})]}):e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(re,{to:"/login",className:"text-white/80 hover:text-white px-4 py-2 rounded-xl transition-all hover:bg-glass-hover font-medium",children:""}),e.jsx(re,{to:"/register",className:"bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-400 hover:to-secondary-400 text-white px-6 py-2 rounded-xl transition-all shadow-[0_0_15px_rgba(168,85,247,0.4)] hover:shadow-[0_0_25px_rgba(168,85,247,0.6)] font-bold",children:""})]}),e.jsx("button",{onClick:()=>r(!s),className:"md:hidden text-white hover:bg-glass-hover p-2 rounded-lg transition-colors",children:s?e.jsx(rt,{className:"w-6 h-6"}):e.jsx(tl,{className:"w-6 h-6"})})]})]})}),e.jsx(ve,{children:s&&e.jsx(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"md:hidden bg-glass-dark backdrop-blur-xl border-t-2 border-glass-border",children:e.jsx("div",{className:"px-4 py-4 space-y-2",children:[...i,...a!=null&&a.isAdmin?c:[]].map(l=>{const u=l.icon;return e.jsxs(re,{to:l.href,onClick:()=>r(!1),className:`flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-xl transition-all font-medium ${h(l.href)?"bg-gradient-to-r from-primary-500 to-secondary-500 text-white shadow-[0_0_20px_rgba(168,85,247,0.5)]":"text-white/80 hover:text-white hover:bg-glass-hover hover:shadow-[0_0_15px_rgba(168,85,247,0.2)]"}`,children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:l.name})]},l.name)})})})})]}),e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})}),e.jsx("footer",{className:"bg-glass backdrop-blur-xl border-t-2 border-glass-border mt-auto shadow-[0_-4px_30px_rgba(168,85,247,0.1)]",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent font-medium",children:" 2024  -       "})})})})]})},Ls=({children:t})=>{const{isAuthenticated:s,loading:r}=Se(),a=gt();return r?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):s?t:e.jsx(Ps,{to:"/login",state:{from:a},replace:!0})},$l=({children:t})=>{const{isAuthenticated:s,isAdmin:r,loading:a}=Se(),n=gt();return a?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):s?r?t:e.jsx(Ps,{to:"/",replace:!0}):e.jsx(Ps,{to:"/login",state:{from:n},replace:!0})},Fl="https://game.king-ofiq.ir/api",we=At.create({baseURL:Fl,headers:{"Content-Type":"application/json"}});we.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));const Re={async getDashboardStats(){var t,s;try{return(await we.get("/admin/dashboard")).data}catch(r){throw new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to get dashboard stats")}},async getWords(t={}){var s,r;try{const a=new URLSearchParams(t).toString();return(await we.get(`/admin/words?${a}`)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to get words")}},async createWord(t){var s,r;try{return(await we.post("/admin/words",t)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to create word")}},async updateWord(t,s){var r,a;try{return(await we.put(`/admin/words/${t}`,s)).data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update word")}},async deleteWord(t){var s,r;try{return(await we.delete(`/admin/words/${t}`)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete word")}},async getLevels(t={}){var s,r;try{const a=new URLSearchParams(t).toString();return(await we.get(`/admin/levels?${a}`)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to get levels")}},async createLevel(t){var s,r;try{return(await we.post("/admin/levels",t)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to create level")}},async updateLevel(t,s){var r,a;try{return(await we.put(`/admin/levels/${t}`,s)).data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update level")}},async deleteLevel(t){var s,r;try{return(await we.delete(`/admin/levels/${t}`)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete level")}},async getCoinPacks(){var t,s;try{return(await we.get("/admin/packs")).data}catch(r){throw new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to get coin packs")}},async createCoinPack(t){var s,r;try{return(await we.post("/admin/packs",t)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to create coin pack")}},async updateCoinPack(t,s){var r,a;try{return(await we.put(`/admin/packs/${t}`,s)).data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update coin pack")}},async deleteCoinPack(t){var s,r;try{return(await we.delete(`/admin/packs/${t}`)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete coin pack")}},async getUsers(t={}){var s,r;try{const a=new URLSearchParams(t).toString(),n=a?`?${a}`:"";return(await we.get(`/admin/users${n}`)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to get users")}},async getRewardSettings(){var t,s;try{return(await we.get("/admin/settings/rewards")).data}catch(r){throw new Error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to get reward settings")}},async updateRewardSettings(t){var s,r;try{return(await we.put("/admin/settings/rewards",t)).data}catch(a){throw new Error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to update reward settings")}}},Ir=()=>{var i,c,h,m,l,u,w,p,x;const t=_t(),{data:s,isLoading:r}=Ve(["adminDashboard"],()=>Re.getDashboardStats(),{staleTime:5*60*1e3});if(r)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});const a=s==null?void 0:s.data,n=[{title:"Total Users",value:((i=a==null?void 0:a.overview)==null?void 0:i.totalUsers)||0,icon:os,color:"text-primary-400",bgColor:"bg-primary-500/20"},{title:"Total Levels",value:((c=a==null?void 0:a.overview)==null?void 0:c.totalLevels)||0,icon:is,color:"text-secondary-400",bgColor:"bg-secondary-500/20"},{title:"Total Words",value:((h=a==null?void 0:a.overview)==null?void 0:h.totalWords)||0,icon:$r,color:"text-purple-400",bgColor:"bg-purple-500/20"},{title:"Coin Packs",value:((m=a==null?void 0:a.overview)==null?void 0:m.totalCoinPacks)||0,icon:pt,color:"text-yellow-400",bgColor:"bg-yellow-500/20"}],o=[{title:"Active Today",value:((l=a==null?void 0:a.activity)==null?void 0:l.activeUsersToday)||0,icon:Io,color:"text-success"},{title:"New Users Today",value:((u=a==null?void 0:a.activity)==null?void 0:u.newUsersToday)||0,icon:Ys,color:"text-blue-400"},{title:"Total Purchases",value:((w=a==null?void 0:a.activity)==null?void 0:w.totalPurchases)||0,icon:Vo,color:"text-green-400"},{title:"Total Revenue",value:Be(((p=a==null?void 0:a.activity)==null?void 0:p.totalRevenue)||0),icon:ys,color:"text-yellow-400"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((g,y)=>{const v=g.icon;return e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${g.bgColor}`,children:e.jsx(v,{className:`w-6 h-6 ${g.color}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:g.value.toLocaleString()}),e.jsx("div",{className:"text-white/60 text-sm",children:g.title})]})]})},y)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Today's Activity"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((g,y)=>{const v=g.icon;return e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+y*.1},className:"bg-glass backdrop-blur-lg rounded-xl border border-glass-border p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{className:`w-8 h-8 ${g.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:g.value}),e.jsx("div",{className:"text-white/60 text-sm",children:g.title})]})]})},y)})})]}),((x=a==null?void 0:a.levels)==null?void 0:x.topLevels)&&a.levels.topLevels.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Most Popular Levels"}),e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:e.jsx("div",{className:"space-y-4",children:a.levels.topLevels.slice(0,5).map((g,y)=>{var v;return e.jsx(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+y*.1},className:"flex items-center justify-between bg-glass-hover rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary-500 to-primary-700 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:g.order})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-medium",children:[" ",g.order,": ",g.letters]}),e.jsxs("div",{className:"text-white/60 text-sm",children:[((v=g.words)==null?void 0:v.length)||0," "]})]})]})},g._id)})})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"bg-glass backdrop-blur-lg rounded-xl border border-glass-border p-4 hover:bg-glass-hover transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary-400",onClick:()=>t("/admin/users"),onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),t("/admin/users"))},role:"button",tabIndex:0,children:e.jsxs("div",{className:"text-center",children:[e.jsx(os,{className:"w-8 h-8 text-primary-400 mx-auto mb-2"}),e.jsx("div",{className:"text-white font-medium",children:"Manage Users"}),e.jsx("div",{className:"text-white/60 text-sm",children:"View and manage user accounts"})]})}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1},className:"bg-glass backdrop-blur-lg rounded-xl border border-glass-border p-4 hover:bg-glass-hover transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-secondary-400",onClick:()=>t("/admin/words",{state:{openCreate:!0}}),onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),t("/admin/words",{state:{openCreate:!0}}))},role:"button",tabIndex:0,children:e.jsxs("div",{className:"text-center",children:[e.jsx($r,{className:"w-8 h-8 text-secondary-400 mx-auto mb-2"}),e.jsx("div",{className:"text-white font-medium",children:"Add Words"}),e.jsx("div",{className:"text-white/60 text-sm",children:"Create new word entries"})]})}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},className:"bg-glass backdrop-blur-lg rounded-xl border border-glass-border p-4 hover:bg-glass-hover transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-purple-400",onClick:()=>t("/admin/levels",{state:{openCreate:!0}}),onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),t("/admin/levels",{state:{openCreate:!0}}))},role:"button",tabIndex:0,children:e.jsxs("div",{className:"text-center",children:[e.jsx(is,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),e.jsx("div",{className:"text-white font-medium",children:"Create Level"}),e.jsx("div",{className:"text-white/60 text-sm",children:"Design new game levels"})]})}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.3},className:"bg-glass backdrop-blur-lg rounded-xl border border-glass-border p-4 hover:bg-glass-hover transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-yellow-400",onClick:()=>t("/admin/coin-packs"),onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),t("/admin/coin-packs"))},role:"button",tabIndex:0,children:e.jsxs("div",{className:"text-center",children:[e.jsx(pt,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),e.jsx("div",{className:"text-white font-medium",children:"Manage Store"}),e.jsx("div",{className:"text-white/60 text-sm",children:"Update coin packs and pricing"})]})})]})]})]})},Il=()=>{const t=gt(),s=_t(),[r,a]=d.useState([]),[n,o]=d.useState(!1),[i,c]=d.useState(!1),[h,m]=d.useState(""),[l,u]=d.useState(""),[w,p]=d.useState(""),[x,g]=d.useState("");d.useEffect(()=>{y()},[]),d.useEffect(()=>{var C;(C=t.state)!=null&&C.openCreate&&(o(!0),s(t.pathname,{replace:!0}))},[t,s]);const y=async()=>{try{c(!0);const C=await Re.getLevels({limit:100});a(C.data.levels)}catch(C){m(C.message||"Failed to fetch levels")}finally{c(!1)}},v=async C=>{if(C.preventDefault(),!w.trim()||!x.trim()){m("     !");return}try{c(!0),m(""),await Re.createLevel({letters:w.trim(),words:x.trim()}),u("     ! "),p(""),g(""),o(!1),await y(),setTimeout(()=>u(""),3e3)}catch(F){m(F.message||"Failed to create level")}finally{c(!1)}},S=async C=>{if(window.confirm("         "))try{c(!0),await Re.deleteLevel(C),u("    !"),await y(),setTimeout(()=>u(""),3e3)}catch(F){m(F.message||"Failed to delete level")}finally{c(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" "}),e.jsx("p",{className:"text-white/60",children:"     -     !"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-primary-500 hover:bg-primary-600 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-2 space-x-reverse",children:[e.jsx(Zs,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})]}),l&&e.jsx("div",{className:"bg-green-500/20 border border-green-500 rounded-lg p-4",children:e.jsx("p",{className:"text-green-400 text-center font-medium",children:l})}),h&&e.jsx("div",{className:"bg-danger/20 border border-danger rounded-lg p-4",children:e.jsx("p",{className:"text-danger text-center font-medium",children:h})}),e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:i&&r.length===0?e.jsx("div",{className:"text-center text-white/60 py-8",children:"  ..."}):r.length===0?e.jsx("div",{className:"text-center text-white/60 py-8",children:"   !"}):e.jsx("div",{className:"grid gap-4",children:r.map((C,F)=>e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:F*.05},className:"flex items-center justify-between bg-glass-hover rounded-lg p-4 hover:bg-glass transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-secondary-500 to-secondary-700 rounded-lg flex items-center justify-center",children:e.jsx(is,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-bold text-lg",children:[" ",C.order,": ",C.letters]}),e.jsxs("div",{className:"text-white/60 text-sm",children:[C.words.length," ",C.isPublished&&e.jsx("span",{className:"mr-2 text-green-400",children:"  "})]}),e.jsxs("div",{className:"text-white/40 text-xs mt-1",children:[": ",C.words.map(H=>H.text).join(", ")]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[C.isPublished&&e.jsx("div",{className:"p-2 text-green-400",children:e.jsx(ut,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(C._id),className:"p-2 text-white/60 hover:text-danger hover:bg-glass rounded-lg transition-colors",disabled:i,children:e.jsx(Xs,{className:"w-4 h-4"})})]})]},C._id))})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-8 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:" "}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" (: AWET)"}),e.jsx("input",{type:"text",placeholder:"  ...",value:w,onChange:C=>p(C.target.value.toUpperCase()),className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400 text-2xl font-bold text-center tracking-widest",disabled:i}),e.jsx("p",{className:"text-white/40 text-sm mt-1",children:"      "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"    ( :  )"}),e.jsx("textarea",{placeholder:"WET: | TEA: | ATE:",value:x,onChange:C=>g(C.target.value),rows:6,className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400 resize-none font-mono",disabled:i}),e.jsx("p",{className:"text-white/40 text-sm mt-1",children:"      :    |     .         ."}),e.jsxs("div",{className:"mt-2 inline-flex items-center space-x-2 space-x-reverse text-xs text-primary-200 bg-primary-500/10 border border-primary-500/20 rounded-lg px-3 py-1.5",children:[e.jsx("span",{className:"font-semibold",children:":"}),e.jsx("span",{className:"font-mono",children:"WET: | TEA: | ATE:"})]})]}),e.jsxs("div",{className:"flex space-x-4 space-x-reverse mt-8",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),p(""),g(""),m("")},className:"flex-1 bg-glass-hover hover:bg-glass text-white font-medium py-3 px-6 rounded-lg transition-colors",disabled:i,children:""}),e.jsx("button",{type:"submit",className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-medium py-3 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:i?"  ...":" "})]})]})]})})]})},As={name:"",description:"",coins:"",price:"",bonusCoins:"",order:"",imageUrl:"",featured:!1,popular:!1,isActive:!0},Bl=()=>{const[t,s]=d.useState([]),[r,a]=d.useState(""),[n,o]=d.useState(!1),[i,c]=d.useState(!1),[h,m]=d.useState(null),[l,u]=d.useState(As),[w,p]=d.useState(!1),[x,g]=d.useState(!1),[y,v]=d.useState(""),[S,C]=d.useState(""),[F,H]=d.useState(""),[V,$]=d.useState(null);d.useEffect(()=>{P()},[]);const P=async()=>{try{p(!0),v("");const j=await Re.getCoinPacks();s(j.data||[])}catch(j){v(j.message||"     .")}finally{p(!1)}},Z=()=>{c(!1),m(null),u(As),C(""),o(!0)},Y=j=>{c(!0),m(j),C(""),u({name:j.name||"",description:j.description||"",coins:j.coins!=null?String(j.coins):"",price:j.price!=null?String(Math.round(j.price)):"",bonusCoins:j.bonusCoins!=null?String(j.bonusCoins):"",order:j.order!=null?String(j.order):"",imageUrl:j.imageUrl||"",featured:!!j.featured,popular:!!j.popular,isActive:j.isActive!==void 0?!!j.isActive:!0}),o(!0)},R=()=>{x||(o(!1),m(null),u(As),C(""),c(!1))},f=async j=>{if(window.confirm(`    ${j.name}  `))try{$(j._id),v(""),await Re.deleteCoinPack(j._id),H("    ."),await P(),setTimeout(()=>H(""),3e3)}catch(G){v(G.message||"     .")}finally{$(null)}},_=(j,G)=>{u(ae=>({...ae,[j]:G}))},O=async j=>{j.preventDefault();const G=Number(l.coins),ae=Number(l.price),L=Number(l.bonusCoins||0),A=l.order===""?0:Number(l.order);if(!l.name.trim()){C("    .");return}if(!Number.isFinite(G)||G<10){C("        .");return}if(!Number.isFinite(ae)||ae<=0){C("     .");return}const I=Math.round(ae);if(!Number.isFinite(L)||L<0){C("    .");return}C("");const K={name:l.name.trim(),description:l.description.trim()||void 0,coins:G,price:I,bonusCoins:L,totalCoins:G+L,order:A,currency:"TOMAN",imageUrl:l.imageUrl.trim()||void 0,featured:l.featured,popular:l.popular,isActive:l.isActive};console.log(`${i?"Updating":"Creating"} coin pack payload:`,K);try{g(!0),v(""),i&&h?(await Re.updateCoinPack(h._id,K),H("    .")):(await Re.createCoinPack(K),H("     .")),R(),await P(),setTimeout(()=>H(""),3e3)}catch(se){C(se.message||"     .")}finally{g(!1)}},U=d.useMemo(()=>{if(!r.trim())return t;const j=r.toLowerCase();return t.filter(G=>{var A,I;const ae=((A=G.name)==null?void 0:A.toLowerCase())||"",L=((I=G.description)==null?void 0:I.toLowerCase())||"";return ae.includes(j)||L.includes(j)})},[t,r]),J=d.useMemo(()=>new Intl.NumberFormat("fa-IR"),[]);return e.jsxs("div",{className:"space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  "}),e.jsx("p",{className:"text-white/60",children:"          ."})]}),e.jsxs("button",{onClick:Z,className:"bg-primary-500 hover:bg-primary-600 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-reverse space-x-2",children:[e.jsx(Zs,{className:"w-5 h-5"}),e.jsx("span",{children:" "})]})]}),F&&e.jsx("div",{className:"bg-green-500/20 border border-green-500 rounded-xl p-4",children:e.jsx("p",{className:"text-green-400 text-center font-medium",children:F})}),y&&e.jsxs("div",{className:"bg-danger/20 border border-danger rounded-xl p-4 flex items-center space-x-reverse space-x-2",children:[e.jsx(ol,{className:"w-5 h-5 text-danger"}),e.jsx("p",{className:"text-danger font-medium flex-1 text-center",children:y})]}),e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-xl border border-glass-border p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ea,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",placeholder:"   ...",value:r,onChange:j=>a(j.target.value),className:"w-full pr-12 pl-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400 transition-colors"})]})}),e.jsx("div",{className:"bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6",children:w?e.jsx("div",{className:"text-center text-white/60 py-10",children:"   ..."}):U.length===0?e.jsx("div",{className:"text-center text-white/60 py-10",children:"  .   !"}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map((j,G)=>e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:G*.05},className:`bg-glass backdrop-blur-lg rounded-2xl border border-glass-border p-6 ${j.featured?"ring-2 ring-yellow-400/50":""} hover:bg-glass-hover transition-all`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[j.featured&&e.jsx(as,{className:"w-6 h-6 text-yellow-400"}),j.popular&&e.jsx(Nt,{className:"w-6 h-6 text-orange-400"}),!j.featured&&!j.popular&&e.jsx(ke,{className:"w-6 h-6 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:j.name}),e.jsxs("p",{className:"text-white/50 text-xs mt-1",children:[j.isActive?"":"","   : ",J.format(j.order??0)]})]})]}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${j.isActive?"bg-green-500/20 text-green-400":"bg-danger/20 text-danger"}`,children:j.isActive?"":""})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-reverse space-x-2 mb-2",children:[e.jsx(ke,{className:"w-8 h-8 text-yellow-400"}),e.jsx("span",{className:"text-3xl font-bold text-white",children:J.format(j.totalCoins??(j.coins??0)+(j.bonusCoins??0))})]}),e.jsxs("div",{className:"text-white/60 text-sm mt-1",children:["  (: ",J.format(j.coins??0),j.bonusCoins?` + : ${J.format(j.bonusCoins)}`:"",")"]})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:Be(j.price)}),e.jsx("div",{className:"text-white/60 text-sm",children:"  "})]}),e.jsxs("div",{className:"text-center mb-6 text-white/60 text-sm space-y-1",children:[e.jsxs("div",{children:[J.format(j.timesPurchased||0),"   "]}),e.jsxs("div",{children:[" : ",Be(j.revenueGenerated||0)]})]}),j.description&&e.jsx("p",{className:"text-white/50 text-sm mb-4 line-clamp-3",children:j.description}),e.jsxs("div",{className:"flex items-center justify-center space-x-reverse space-x-2",children:[e.jsx("button",{onClick:()=>Y(j),className:"p-2 text-white/60 hover:text-white hover:bg-glass rounded-lg transition-colors",disabled:V===j._id,children:e.jsx(rl,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(j),className:"p-2 text-white/60 hover:text-danger hover:bg-glass rounded-lg transition-colors disabled:opacity-50",disabled:V===j._id,children:e.jsx(Xs,{className:"w-4 h-4"})})]})]},j._id))})}),n&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative bg-glass backdrop-blur-lg rounded-2xl border border-glass-border w-full max-w-2xl max-h-[calc(100vh-2rem)] overflow-y-auto px-4 py-6 sm:px-6 sm:py-8",children:[e.jsx("div",{className:"flex items-start justify-between mb-6",children:e.jsx("h3",{className:"text-xl font-bold text-white",children:i?"  ":"  "})}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" "}),e.jsx("input",{type:"text",value:l.name,onChange:j=>_("name",j.target.value),placeholder:"    ",className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400",disabled:x,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"  "}),e.jsx("input",{type:"number",min:"10",value:l.coins,onChange:j=>_("coins",j.target.value),placeholder:" 100",className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400",disabled:x,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" "}),e.jsx("input",{type:"number",min:"0",value:l.bonusCoins,onChange:j=>_("bonusCoins",j.target.value),placeholder:" 20",className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400",disabled:x})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" ()"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"1",value:l.price,onChange:j=>_("price",j.target.value),placeholder:" 10000",className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400 pr-20",disabled:x,required:!0}),e.jsx("span",{className:"absolute inset-y-0 left-4 flex items-center text-white/60 text-sm",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" "}),e.jsx("input",{type:"number",min:"0",value:l.order,onChange:j=>_("order",j.target.value),placeholder:" 1",className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400",disabled:x})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" ()"}),e.jsx("input",{type:"text",value:l.imageUrl,onChange:j=>_("imageUrl",j.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400",disabled:x})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:" ()"}),e.jsx("textarea",{rows:3,value:l.description,onChange:j=>_("description",j.target.value),placeholder:"   ",className:"w-full px-4 py-3 bg-glass-hover border border-glass-border rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-primary-400 resize-none",disabled:x})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-reverse space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-glass-border text-primary-500 focus:ring-primary-500",checked:l.featured,onChange:j=>_("featured",j.target.checked),disabled:x}),e.jsx("span",{className:"text-white",children:"  "})]}),e.jsxs("label",{className:"flex items-center space-x-reverse space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-glass-border text-primary-500 focus:ring-primary-500",checked:l.popular,onChange:j=>_("popular",j.target.checked),disabled:x}),e.jsx("span",{className:"text-white",children:" "})]}),e.jsxs("label",{className:"flex items-center space-x-reverse space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-glass-border text-primary-500 focus:ring-primary-500",checked:l.isActive,onChange:j=>_("isActive",j.target.checked),disabled:x}),e.jsx("span",{className:"text-white",children:" "})]})]}),S&&e.jsx("div",{className:"bg-danger/20 border border-danger rounded-lg p-3 text-danger text-sm text-center",children:S}),e.jsxs("div",{className:"flex space-x-reverse space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:R,className:"flex-1 bg-glass-hover hover:bg-glass text-white font-medium py-3 px-6 rounded-lg transition-colors disabled:opacity-50",disabled:x,children:""}),e.jsx("button",{type:"submit",className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white font-medium py-3 px-6 rounded-lg transition-colors disabled:opacity-50",disabled:x,children:x?"  ...":i?" ":" "})]})]})]})]})]})},Br={skipLevelCoinsReward:"0",skipLevelPointsReward:"0",wordFoundCoinsReward:"0",wordFoundPointsReward:"0"},Dl=t=>{if(!t)return"";try{return new Intl.DateTimeFormat("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(t))}catch{return new Date(t).toLocaleString("fa-IR")}},Dr=t=>({skipLevelCoinsReward:String((t==null?void 0:t.skipLevelCoinsReward)??0),skipLevelPointsReward:String((t==null?void 0:t.skipLevelPointsReward)??0),wordFoundCoinsReward:String((t==null?void 0:t.wordFoundCoinsReward)??0),wordFoundPointsReward:String((t==null?void 0:t.wordFoundPointsReward)??0)}),zl=()=>{var y,v;const t=cs(),[s,r]=d.useState(()=>({...Br})),[a,n]=d.useState(()=>({...Br})),{data:o,isLoading:i,isFetching:c,refetch:h}=Ve(["adminRewardSettings"],()=>Re.getRewardSettings(),{staleTime:5*60*1e3,onSuccess:S=>{if(S!=null&&S.data){const C=Dr(S.data);r(C),n(C)}},onError:S=>{mt.error(S.message||"     .")}}),m=Ot(S=>Re.updateRewardSettings(S),{onSuccess:S=>{if(mt.success("     ."),S!=null&&S.data){const C=Dr(S.data);r(C),n(C),t.setQueryData(["adminRewardSettings"],S)}else h()},onError:S=>{mt.error(S.message||"     .")}}),l=S=>C=>{const F=C.target.value;/^\d*$/.test(F)&&r(H=>({...H,[S]:F}))},u=S=>{S.preventDefault();const C={skipLevelCoinsReward:Number(s.skipLevelCoinsReward||0),skipLevelPointsReward:Number(s.skipLevelPointsReward||0),wordFoundCoinsReward:Number(s.wordFoundCoinsReward||0),wordFoundPointsReward:Number(s.wordFoundPointsReward||0)};if(Object.entries(C).find(([,H])=>!Number.isFinite(H)||H<0)){mt.error("    .");return}m.mutate(C)},w=()=>{r(a)},p=d.useMemo(()=>Object.keys(s).some(S=>s[S]!==a[S]),[s,a]);if(i)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});const x=(y=o==null?void 0:o.data)==null?void 0:y.updatedAt,g=(v=o==null?void 0:o.data)==null?void 0:v.updatedBy;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"  "}),e.jsx("p",{className:"text-white/70",children:"                 ."})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse bg-secondary-500/20 text-secondary-200 px-4 py-2 rounded-xl",children:[e.jsx(Qo,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:" "})]})]}),e.jsxs("form",{onSubmit:u,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-glass backdrop-blur-lg border border-glass-border rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"   "}),e.jsx("p",{className:"text-white/50 text-sm mt-1",children:"              ."})]}),e.jsx(ll,{className:"w-10 h-10 text-primary-300"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex flex-col space-y-2",children:[e.jsx("span",{className:"text-white/70 text-sm",children:" "}),e.jsx("input",{type:"text",inputMode:"numeric",value:s.skipLevelCoinsReward,onChange:l("skipLevelCoinsReward"),className:"bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-400",placeholder:" 50"})]}),e.jsxs("label",{className:"flex flex-col space-y-2",children:[e.jsx("span",{className:"text-white/70 text-sm",children:" "}),e.jsx("input",{type:"text",inputMode:"numeric",value:s.skipLevelPointsReward,onChange:l("skipLevelPointsReward"),className:"bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-400",placeholder:" 20"})]})]})]}),e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-glass backdrop-blur-lg border border-glass-border rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"   "}),e.jsx("p",{className:"text-white/50 text-sm mt-1",children:"               ."})]}),e.jsx(xe,{className:"w-10 h-10 text-yellow-300"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex flex-col space-y-2",children:[e.jsx("span",{className:"text-white/70 text-sm",children:" "}),e.jsx("input",{type:"text",inputMode:"numeric",value:s.wordFoundCoinsReward,onChange:l("wordFoundCoinsReward"),className:"bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-400",placeholder:" 5"})]}),e.jsxs("label",{className:"flex flex-col space-y-2",children:[e.jsx("span",{className:"text-white/70 text-sm",children:" "}),e.jsx("input",{type:"text",inputMode:"numeric",value:s.wordFoundPointsReward,onChange:l("wordFoundPointsReward"),className:"bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-400",placeholder:" 10"})]})]})]})]}),e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-glass backdrop-blur-lg border border-glass-border rounded-2xl p-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-white/80 text-sm flex items-center space-x-2 space-x-reverse",children:[e.jsx(Tr,{className:"w-4 h-4 text-primary-300"}),e.jsxs("span",{children:[" : ",x?Dl(x):" "]})]}),g&&e.jsxs("div",{className:"text-white/60 text-sm",children:[": ",g.username||g.email]}),c&&e.jsx("div",{className:"text-primary-300 text-xs",children:"   ..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:w,disabled:!p||m.isLoading,className:`flex items-center gap-2 px-4 py-2 rounded-lg border border-white/10 text-white/80 transition ${!p||m.isLoading?"opacity-50 cursor-not-allowed":"hover:bg-white/10"}`,children:[e.jsx(nl,{className:"w-4 h-4"}),""]}),e.jsxs("button",{type:"submit",disabled:!p||m.isLoading,className:`flex items-center gap-2 px-5 py-2 rounded-lg bg-primary-500 text-white font-medium transition ${!p||m.isLoading?"opacity-70 cursor-not-allowed":"hover:bg-primary-400"}`,children:[e.jsx(Tr,{className:"w-4 h-4"}),m.isLoading?"  ...":" "]})]})]})]})]})},Wl=[{value:"recent",label:"Newest first"},{value:"oldest",label:"Oldest first"},{value:"highestSpend",label:"Highest spenders"},{value:"lowestSpend",label:"Lowest spenders"},{value:"name",label:"Name A  Z"}],Gt=10,qe=t=>{const s=Number(t||0);return Number.isFinite(s)?s.toLocaleString("en-US"):""},ql=t=>{if(!t)return"";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return""}},Hl=t=>{if(!t)return"";try{return new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}},Vl=()=>{const[t,s]=d.useState(""),[r,a]=d.useState(""),[n,o]=d.useState("recent"),[i,c]=d.useState(1),[h,m]=d.useState([]),[l,u]=d.useState({totalUsers:0,payingUsers:0,totalRevenue:0,totalCoinsPurchased:0,averageSpendPerPayingUser:0}),[w,p]=d.useState({page:1,totalPages:1,totalCount:0,limit:Gt}),[x,g]=d.useState(!1),[y,v]=d.useState("");d.useEffect(()=>{const P=setTimeout(()=>{a(t.trim()),c(1)},400);return()=>clearTimeout(P)},[t]),d.useEffect(()=>{let P=!0;return(async()=>{var Y,R,f,_,O,U,J,j,G,ae;try{g(!0),v("");const L=await Re.getUsers({page:i,limit:Gt,sort:n,...r?{search:r}:{}});if(!P)return;const A=(L==null?void 0:L.data)||{};m(A.users||[]),u({totalUsers:((Y=A.summary)==null?void 0:Y.totalUsers)||0,payingUsers:((R=A.summary)==null?void 0:R.payingUsers)||0,totalRevenue:((f=A.summary)==null?void 0:f.totalRevenue)||0,totalCoinsPurchased:((_=A.summary)==null?void 0:_.totalCoinsPurchased)||0,averageSpendPerPayingUser:((O=A.summary)==null?void 0:O.averageSpendPerPayingUser)||0}),p({page:((U=A.pagination)==null?void 0:U.page)||i,totalPages:((J=A.pagination)==null?void 0:J.totalPages)||1,totalCount:((j=A.pagination)==null?void 0:j.totalCount)||((G=A.users)==null?void 0:G.length)||0,limit:((ae=A.pagination)==null?void 0:ae.limit)||Gt})}catch(L){P&&(v(L.message||"Failed to load users"),m([]))}finally{P&&g(!1)}})(),()=>{P=!1}},[i,n,r]);const S=d.useMemo(()=>[{title:"Registered players",value:qe(l.totalUsers),helper:`${qe(w.totalCount||l.totalUsers)} total accounts`,icon:os,gradient:"from-primary-500/30 to-primary-600/20"},{title:"Paying players",value:qe(l.payingUsers),helper:l.totalUsers?`${(l.payingUsers/Math.max(l.totalUsers,1)*100).toFixed(1)}% of players`:"",icon:dl,gradient:"from-emerald-500/30 to-emerald-600/20"},{title:"Lifetime revenue",value:Be(l.totalRevenue),helper:`${qe(l.totalCoinsPurchased)} coins sold`,icon:Ys,gradient:"from-amber-500/30 to-amber-600/20"},{title:"Avg. spend per payer",value:Be(l.averageSpendPerPayingUser),helper:l.payingUsers?`Across ${qe(l.payingUsers)} customers`:"No purchases yet",icon:xe,gradient:"from-indigo-500/30 to-indigo-600/20"}],[l,w.totalCount]),C=Math.max(w.totalPages||1,1),F=Math.min(Math.max(i,1),C),H=(F-1)*w.limit+(h.length?1:0),V=(F-1)*w.limit+h.length,$=d.useMemo(()=>x?Array.from({length:Gt}).map((P,Z)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[2fr,1fr,1fr,1fr] gap-4 items-center px-4 py-4 border-b border-white/5 last:border-none",children:[e.jsx("div",{className:"h-10 bg-white/5 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-4 bg-white/5 rounded animate-pulse hidden md:block"}),e.jsx("div",{className:"h-4 bg-white/5 rounded animate-pulse hidden md:block"}),e.jsx("div",{className:"h-4 bg-white/5 rounded animate-pulse hidden md:block"})]},`skeleton-${Z}`)):h.length?h.map(P=>{var Y,R;const Z=((R=(Y=P.username)==null?void 0:Y[0])==null?void 0:R.toUpperCase())||"?";return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[2fr,1fr,1fr,1fr] gap-4 items-center px-4 py-4 border-b border-white/5 last:border-none bg-glass-hover/40 hover:bg-glass-hover transition-colors rounded-xl md:rounded-none md:bg-transparent md:hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-500/80 to-primary-400/60 text-white font-semibold flex items-center justify-center",children:Z}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-semibold",children:[e.jsx("span",{children:P.username}),P.isAdmin&&e.jsx("span",{className:"px-2 py-0.5 text-[11px] uppercase tracking-wide bg-white/10 border border-white/10 rounded-full text-white/80",children:"Admin"})]}),e.jsx("div",{className:"text-white/50 text-sm",children:P.email||"No email on file"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-white/40 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-3.5 h-3.5"}),qe(P.coins)," coins"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Is,{className:"w-3.5 h-3.5"}),qe(P.totalScore)," pts"]})]})]})]}),e.jsxs("div",{className:"flex md:block items-center justify-between md:justify-start",children:[e.jsx("div",{className:"text-white font-semibold",children:Be(P.totalSpent)}),e.jsx("div",{className:"text-xs text-white/40 md:mt-1",children:"Lifetime spend"})]}),e.jsxs("div",{className:"flex md:block items-center justify-between md:justify-start",children:[e.jsx("div",{className:"text-white font-semibold",children:qe(P.totalCoinsPurchased)}),e.jsx("div",{className:"text-xs text-white/40 md:mt-1",children:"Coins purchased"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(Do,{className:"w-4 h-4 text-primary-300"}),ql(P.createdAt)]}),e.jsxs("div",{className:"text-xs text-white/40",children:["Last purchase: ",Hl(P.lastPurchaseAt)]})]})]},P._id||P.username)}):e.jsx("div",{className:"text-center text-white/60 py-12",children:r?"No players match your search just yet.":"No players have registered yet."}),[h,x,r]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"User Management"}),e.jsx("p",{className:"text-white/60 max-w-2xl",children:"Monitor every registered player, track their lifetime value, and understand how coin purchases fuel your community."})]})}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:S.map(({title:P,value:Z,helper:Y,icon:R,gradient:f})=>e.jsxs(E.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-glass backdrop-blur-xl border border-white/10 rounded-2xl p-5 relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${f} opacity-60 pointer-events-none`}),e.jsxs("div",{className:"relative flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-widest text-white/50 mb-2",children:P}),e.jsx("p",{className:"text-2xl font-semibold text-white",children:Z})]}),e.jsx("div",{className:"p-3 bg-black/20 rounded-xl border border-white/10 text-white",children:e.jsx(R,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"relative mt-3 text-sm text-white/60",children:Y})]},P))}),e.jsxs("div",{className:"bg-glass backdrop-blur-xl rounded-2xl border border-glass-border p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ea,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",value:t,onChange:P=>s(P.target.value),placeholder:"Search players by username or email...",className:"w-full pl-12 pr-4 py-3 bg-black/30 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-primary-400 transition-colors"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-white/50",children:"Sort by"}),e.jsx("select",{value:n,onChange:P=>{o(P.target.value),c(1)},className:"bg-black/40 border border-white/10 rounded-xl text-white px-4 py-2 focus:outline-none focus:border-primary-400",children:Wl.map(P=>e.jsx("option",{value:P.value,className:"bg-slate-900",children:P.label},P.value))})]})]}),y&&e.jsx("div",{className:"bg-danger/10 border border-danger/40 text-danger px-4 py-3 rounded-xl",children:y}),e.jsxs("div",{className:"rounded-2xl border border-white/5 overflow-hidden",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-[2fr,1fr,1fr,1fr] gap-4 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-white/40 bg-white/5",children:[e.jsx("span",{children:"Player"}),e.jsx("span",{children:"Spend"}),e.jsx("span",{children:"Coins purchased"}),e.jsx("span",{children:"Registration"})]}),e.jsx("div",{className:"divide-y divide-white/5",children:$})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 text-sm text-white/60",children:[e.jsxs("div",{children:[h.length>0&&e.jsxs("span",{children:["Showing ",H,"-",V," of ",qe(w.totalCount)," players"]}),h.length===0&&!x&&e.jsx("span",{children:"Showing 0 results"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>c(P=>Math.max(P-1,1)),disabled:F===1||x,className:"px-4 py-2 rounded-xl border border-white/10 text-white/80 hover:bg-white/10 disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("div",{className:"px-4 py-2 rounded-xl border border-white/10 text-white/70",children:["Page ",F," of ",C]}),e.jsx("button",{type:"button",onClick:()=>c(P=>Math.min(P+1,C)),disabled:F===C||x,className:"px-4 py-2 rounded-xl border border-white/10 text-white/80 hover:bg-white/10 disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})},Gl=new sn({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:5*60*1e3}}});function Kl(){return e.jsx(rn,{client:Gl,children:e.jsx(Mo,{children:e.jsx(To,{children:e.jsx(tn,{children:e.jsx("div",{className:"min-h-screen bg-wood bg-cover bg-center bg-fixed",children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-wood-900/80 via-wood-800/60 to-wood-900/80",children:[e.jsxs(ur,{children:[e.jsx(be,{path:"/login",element:e.jsx(Rl,{})}),e.jsx(be,{path:"/register",element:e.jsx(Ml,{})}),e.jsx(be,{path:"/*",element:e.jsx(Ol,{children:e.jsxs(ur,{children:[e.jsx(be,{path:"/",element:e.jsx(xl,{})}),e.jsx(be,{path:"/game",element:e.jsx(vl,{})}),e.jsx(be,{path:"/levels",element:e.jsx(Ls,{children:e.jsx(kl,{})})}),e.jsx(be,{path:"/leitner",element:e.jsx(Al,{})}),e.jsx(be,{path:"/store",element:e.jsx(Ls,{children:e.jsx(Cl,{})})}),e.jsx(be,{path:"/payment/verify",element:e.jsx(Ls,{children:e.jsx(El,{})})}),e.jsx(be,{path:"/leaderboard",element:e.jsx(Ll,{})}),e.jsxs(be,{path:"/admin/*",element:e.jsx($l,{children:e.jsx(Pl,{})}),children:[e.jsx(be,{index:!0,element:e.jsx(Ir,{})}),e.jsx(be,{path:"levels",element:e.jsx(Il,{})}),e.jsx(be,{path:"coin-packs",element:e.jsx(Bl,{})}),e.jsx(be,{path:"settings/rewards",element:e.jsx(zl,{})}),e.jsx(be,{path:"users",element:e.jsx(Vl,{})}),e.jsx(be,{path:"*",element:e.jsx(Ir,{})})]}),e.jsx(be,{path:"*",element:e.jsx(Ul,{})})]})})})]}),e.jsx(Xn,{position:"top-right",toastOptions:{duration:4e3,style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"},success:{iconTheme:{primary:"#34d399",secondary:"white"}},error:{iconTheme:{primary:"#ef4444",secondary:"white"}}}})]})})})})})})}Rs.createRoot(document.getElementById("root")).render(e.jsx(Xa.StrictMode,{children:e.jsx(Kl,{})}));
//# sourceMappingURL=index-43aaad9a.js.map
